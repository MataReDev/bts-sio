import{_ as p,c as o,k as s,a as i,I as e,w as t,U as a,D as r,o as h}from"./chunks/framework.aGaNZw_P.js";const N=JSON.parse('{"title":"TP1c. Prendre en main la ligne de commande","description":"","frontmatter":{},"headers":[],"relativePath":"tp/devops/serveur/tp1c.md","filePath":"tp/devops/serveur/tp1c.md","lastUpdated":1704218918000}'),d={name:"tp/devops/serveur/tp1c.md"},c=s("h1",{id:"tp1c-prendre-en-main-la-ligne-de-commande",tabindex:"-1"},[i("TP1c. Prendre en main la ligne de commande "),s("a",{class:"header-anchor",href:"#tp1c-prendre-en-main-la-ligne-de-commande","aria-label":'Permalink to "TP1c. Prendre en main la ligne de commande"'},"​")],-1),u={class:"details custom-block"},k=s("summary",null,"Sommaire",-1),m={class:"table-of-contents"},g=s("li",null,[s("a",{href:"#introduction"},"Introduction")],-1),v=s("li",null,[s("a",{href:"#preparation"},"Préparation")],-1),F=s("li",null,[s("a",{href:"#pre-requis"},"Pré-requis")],-1),b=s("li",null,[s("a",{href:"#ressources"},"Ressources")],-1),y=s("a",{href:"#la-vm"},"La VM",-1),C=s("li",null,[s("a",{href:"#etape-1-creez-une-vm"},"Étape 1 : Créez une VM")],-1),f=s("li",null,[s("a",{href:"#creation-complete-de-la-vm"},"Création complète de la VM")],-1),E={href:"#creation-de-la-vm-via-un-modele"},B=s("li",null,[s("a",{href:"#etape-2-configurez-la-vm"},"Étape 2 : Configurez la VM")],-1),_=s("li",null,[s("a",{href:"#etape-3-connectez-vous-a-la-vm"},"Étape 3 : Connectez-vous à la VM")],-1),q=a('<li><a href="#les-commandes-de-base">Les commandes de base</a><ul><li><a href="#creer-une-arborescence">Créer une arborescence</a></li><li><a href="#installer-un-serveur-web">Installer un serveur web</a></li><li><a href="#les-permissions">Les permissions</a></li><li><a href="#verifier-les-logs">Vérifier les logs</a></li></ul></li><li><a href="#evolution-du-site">Évolution du site</a></li><li><a href="#me-donner-acces-a-votre-serveur">Me donner accès à votre serveur</a></li><li><a href="#restitution">Restitution</a></li>',4),A=a('<div class="tip custom-block"><p class="custom-block-title">TP évalué</p><p>Nous sommes à un point étape. La réalisation de ce TP sera évaluée. Il sera évalué de la manière suivante :</p><ul><li>VM fonctionnelle : <strong>5 points</strong> (en intégrant les éléments de sécurité).</li><li>Accès à la VM via échange de clés : <strong>2 points</strong>. (La clé publique à ajouter à votre VM est disponible en fin de TP).</li><li>Réalisation des étapes présentées dans le TP : <strong>5 points</strong>.</li><li>Fourniture d&#39;un rapport illustrant les différentes étapes : <strong>2 points</strong>.</li><li>Fourniture de la fiche serveur : <strong>2 points</strong>.</li></ul></div><h2 id="introduction" tabindex="-1">Introduction <a class="header-anchor" href="#introduction" aria-label="Permalink to &quot;Introduction&quot;">​</a></h2><p>Avant de commencer, il est important de savoir que la ligne de commande est un outil puissant et très utile. Maîtriser les rudiments de celle-ci vous permettra de gagner du temps et donc d’être plus efficace.</p><h2 id="preparation" tabindex="-1">Préparation <a class="header-anchor" href="#preparation" aria-label="Permalink to &quot;Préparation&quot;">​</a></h2><p>Pour réaliser ce TP, vous aurez besoin d&#39;un environnement de Linux. Je vous propose d&#39;en créer une en suivant le <a href="./tp1b.html">TP précédent</a>.</p><h2 id="pre-requis" tabindex="-1">Pré-requis <a class="header-anchor" href="#pre-requis" aria-label="Permalink to &quot;Pré-requis&quot;">​</a></h2><p>Dans ce TP nous allons utiliser l&#39;accès SSH pour nous connecter à la VM.</p><p>Vous êtes prêt ?</p>',8),V=s("iframe",{src:"https://giphy.com/embed/2uIlaHVsql55CLP3as",width:"480",height:"270",frameBorder:"0",class:"giphy-embed",allowFullScreen:""},null,-1),P=a('<h2 id="ressources" tabindex="-1">Ressources <a class="header-anchor" href="#ressources" aria-label="Permalink to &quot;Ressources&quot;">​</a></h2><p>Pour réaliser ce TP, vous aurez besoin de :</p><ul><li><a href="/cheatsheets/serveur/linux-debian-based.html">Aide mémoire Debian</a></li><li><a href="/cheatsheets/serveur/debian-reseau.html">Générateur de configuration</a></li><li><a href="/cheatsheets/ssh-key/">Aide mémoire clé SSH</a></li></ul><h2 id="la-vm" tabindex="-1">La VM <a class="header-anchor" href="#la-vm" aria-label="Permalink to &quot;La VM&quot;">​</a></h2><p>Pour ce TP je vais vous demander de créer une VM. Cette VM doit respecter les spécifications suivantes :</p><ul><li>Nom de la VM : <code>&lt;votre nom&gt;-ligne-de-commande</code>.</li><li>OS : Debian 11.5</li><li>Mémoire : 1Go (ou 2Go si vous utilisez le modèle).</li><li>CPU : 1.</li><li>Disque : 5Go (ou 8Go si vous utilisez le modèle).</li><li>Utilisateur : <code>&lt;votre nom&gt;</code>.</li><li>Mot de passe : <code>&lt;votre mot de passe&gt;</code> (mot de passe de votre choix, mais qui respecte les règles de sécurité).</li></ul><div class="tip custom-block"><p class="custom-block-title">Rappel</p><p>Ici je ne vais pas vous redonner les commandes, je vous laisse chercher dans les ressources :</p><ul><li><a href="/cheatsheets/serveur/linux-debian-based.html">Aide mémoire Debian</a></li><li><a href="./tp1b.html">TP précédent</a></li><li><a href="./tp1alt.html">Créer une VM plus rapidement depuis un modèle</a></li><li>Votre prise de notes</li></ul><p>c&#39;est à vous de jouer !</p></div><h3 id="etape-1-creez-une-vm" tabindex="-1">Étape 1 : Créez une VM <a class="header-anchor" href="#etape-1-creez-une-vm" aria-label="Permalink to &quot;Étape 1 : Créez une VM&quot;">​</a></h3><h3 id="creation-complete-de-la-vm" tabindex="-1">Création complète de la VM <a class="header-anchor" href="#creation-complete-de-la-vm" aria-label="Permalink to &quot;Création complète de la VM&quot;">​</a></h3><p>Dans cette version, vous allez devoir créer la VM depuis le début. Vous avez plus d&#39;options, mais vous devez réaliser l&#39;installation du système d&#39;exploitation.</p><ul><li><a href="./tp1.html">Consulter la documentation</a></li></ul>',11),w={id:"creation-de-la-vm-via-un-modele",tabindex:"-1"},x=s("a",{class:"header-anchor",href:"#creation-de-la-vm-via-un-modele","aria-label":'Permalink to "Création de la VM via un modèle <Badge type="tip" text="Meilleure solution" vertical="top" />"'},"​",-1),D=a(`<p>Dans cette version, vous allez créer votre VM à partir d&#39;un modèle. Le modèle contient déjà le système d&#39;exploitation et les logiciels installés. Vous n&#39;avez plus qu&#39;à configurer la VM (réseau, utilisateur, etc.).</p><ul><li><a href="./tp1alt.html">Consulter la documentation</a></li></ul><p>À l&#39;aide des TP précédents, créez une VM qui respecte les spécifications ci-dessus.</p><h3 id="etape-2-configurez-la-vm" tabindex="-1">Étape 2 : Configurez la VM <a class="header-anchor" href="#etape-2-configurez-la-vm" aria-label="Permalink to &quot;Étape 2 : Configurez la VM&quot;">​</a></h3><p>Vérifier que votre VM respecte les spécifications suivantes :</p><ul><li>La VM doit avoir une IP statique. (Vous pouvez utiliser le générateur de configuration).</li><li>La VM doit avoir accès à Internet (<code>ping www.google.com</code> doit fonctionner).</li><li>La VM doit posséder les <strong>vmtools</strong> (<code>apt install open-vm-tools</code>)</li></ul><h3 id="etape-3-connectez-vous-a-la-vm" tabindex="-1">Étape 3 : Connectez-vous à la VM <a class="header-anchor" href="#etape-3-connectez-vous-a-la-vm" aria-label="Permalink to &quot;Étape 3 : Connectez-vous à la VM&quot;">​</a></h3><p>Pour vous connecter à la VM, vous devez utiliser la commande <code>ssh</code> depuis votre machine hôte. Pour que cela fonctionne :</p><ul><li>Vous devez avoir installé le serveur SSH sur votre VM (voir <a href="./tp1b.html">TP précédent</a>).</li><li>Vous devez avoir généré une clé SSH sur votre machine hôte et l&#39;avoir ajoutée à votre VM (voir <a href="./tp1b.html">TP précédent</a>).</li><li>L&#39;accès par mot de passe doit être désactivé sur votre VM (voir <a href="./tp1b.html">TP précédent</a>).</li><li>L&#39;accès <code>root</code> par SSH doit être désactivé sur votre VM (voir <a href="./tp1b.html">TP précédent</a>).</li></ul><details class="details custom-block"><summary>Rappel sur la clé SSH</summary><p>Pour installer votre clé SSH sur votre serveur, il vous suffit de faire la commande suivante sur votre ordinateur.</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ssh-copy-id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">usernam</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">e</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ipaddres</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">s</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>⚠️ Vous devez évidemment remplacer <code>&lt;username&gt;</code>et <code>&lt;ipaddress&gt;</code>par votre utilisateur et votre mot de passe. Exemple :</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ssh-copy-id</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pi@192.168.1.253</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>Rien de plus, à partir de maintenant votre serveur acceptera votre connexion sans vous demander de mot de passe. Pratique non ? (Et surtout très sécurisé)</p></details><h2 id="les-commandes-de-base" tabindex="-1">Les commandes de base <a class="header-anchor" href="#les-commandes-de-base" aria-label="Permalink to &quot;Les commandes de base&quot;">​</a></h2><p>Nous avons maintenant une VM qui fonctionne. Nous allons maintenant nous intéresser à l&#39;OS et les programmes qui y sont installés. Avant de commencer, nous allons voir comment utiliser les bases de la ligne de commande.</p><ul><li><code>ls</code> : Liste les fichiers et dossiers. (Exemple : <code>ls -l</code> affiche les fichiers et dossiers avec les permissions).</li><li><code>cd</code> : Change de dossier. (Exemple : <code>cd /var/log</code> change de dossier pour aller dans le dossier <code>/var/log</code>).</li><li><code>mkdir</code> : Crée un dossier. (Exemple : <code>mkdir /var/log/mon-dossier</code> crée le dossier <code>/var/log/mon-dossier</code>).</li><li><code>touch</code> : Crée un fichier. (Exemple : <code>touch /var/log/mon-fichier</code> crée le fichier <code>/var/log/mon-fichier</code>).</li><li><code>rm</code> : Supprime un fichier. (Exemple : <code>rm /var/log/mon-fichier</code> supprime le fichier <code>/var/log/mon-fichier</code>).</li><li><code>rm -r</code> : Supprime un dossier. (Exemple : <code>rm -r /var/log/mon-dossier</code> supprime le dossier <code>/var/log/mon-dossier</code>).</li><li><code>mv</code> : Déplace un fichier. (Exemple : <code>mv /var/log/mon-fichier /var/log/mon-dossier</code> déplace le fichier <code>/var/log/mon-fichier</code> dans le dossier <code>/var/log/mon-dossier</code>).</li><li><code>cp</code> : Copie un fichier. (Exemple : <code>cp /var/log/mon-fichier /var/log/mon-dossier</code> copie le fichier <code>/var/log/mon-fichier</code> dans le dossier <code>/var/log/mon-dossier</code>).</li><li><code>cat</code> : Affiche le contenu d&#39;un fichier. (Exemple : <code>cat /var/log/syslog</code> affiche le contenu du fichier syslog).</li><li><code>nano</code> : Éditeur de texte (<em>personnellement je préfère <code>vim</code></em>). (Exemple : <code>nano /var/log/mon-fichier</code> ouvre le fichier <code>/var/log/mon-fichier</code> dans l&#39;éditeur de texte).</li><li><code>tail</code> : Affiche les dernières lignes d&#39;un fichier. (Exemple : <code>tail -f /var/log/syslog</code> affiche les dernières lignes du fichier syslog en temps réel).</li></ul><p>Il existe de nombreuses autres commandes, mais celles-ci sont les plus utilisées. <strong>Il est important de savoir les utiliser.</strong></p><div class="tip custom-block"><p class="custom-block-title">Quelques astuces</p><ul><li>La touche <code>tab</code> : permets de compléter une commande ou un chemin de fichier.</li><li><code>!!</code> : permet de répéter la dernière commande.</li><li><code>ctlr + r</code> : permet de rechercher une commande dans l&#39;historique.</li><li><code>échap puis :wq</code> : permet de sauvegarder et quitter un fichier ouvert avec <code>vim</code>.</li><li><code>échap puis :q!</code> : permet de quitter un fichier ouvert avec <code>vim</code> sans sauvegarder.</li></ul></div><h3 id="creer-une-arborescence" tabindex="-1">Créer une arborescence <a class="header-anchor" href="#creer-une-arborescence" aria-label="Permalink to &quot;Créer une arborescence&quot;">​</a></h3><p>À l&#39;aide des commandes vues précédemment, créez une arborescence qui respecte les spécifications suivantes :</p><ul><li>Créez un dossier <code>vbrosseau</code> dans le dossier <code>/home/</code>.</li><li>Créez un dossier <code>tp1</code> dans le dossier <code>/home/vbrosseau/</code>.</li><li>Créez un fichier <code>fichier1.md</code> dans le dossier <code>/home/vbrosseau/tp1/</code>. (deux solutions possibles, via <code>touch</code> ou via <code>nano</code>).</li><li>Créez un fichier <code>fichier2.md</code> dans le dossier <code>/home/vbrosseau/tp1/</code>. (deux solutions possibles, via <code>touch</code> ou via <code>nano</code>).</li><li>Mettre le contenu suivant dans le fichier <code>fichier1</code> :</li></ul><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Voici</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> le</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> contenu</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> du</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> fichier</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">-</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Ligne</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">-</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Ligne</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">-</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Ligne</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 3</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li>Mettre le contenu suivant dans le fichier <code>fichier2</code> :</li></ul><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Voici</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> le</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> contenu</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> du</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> fichier</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">-</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Ligne</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">-</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Ligne</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">-</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Ligne</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 3</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li>Déplacez le fichier <code>fichier1.md</code> dans le dossier <code>/home/vbrosseau/</code>.</li><li>Dupliquez le fichier <code>fichier2.md</code> dans le dossier <code>/home/vbrosseau/tp1/</code> et renommez-le <code>fichier2bis.md</code>.</li><li>Renommez le fichier <code>fichier1.md</code> en <code>introduction.md</code>.</li><li>Changer le contenu du fichier <code>introduction.md</code> pour qu&#39;il contienne :</li></ul><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Avec</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ce</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> fichier</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> je</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> vais</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> avoir</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> une</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bonne</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> note.</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><details class="details custom-block"><summary>Solution (je vous conseille de faire l&#39;exercice avant de regarder la solution)</summary><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mkdir</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /home/vbrosseau</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mkdir</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /home/vbrosseau/tp1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">touch</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /home/vbrosseau/tp1/fichier1.md</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">touch</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /home/vbrosseau/tp1/fichier2.md</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">nano</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /home/vbrosseau/tp1/fichier1.md</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">nano</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /home/vbrosseau/tp1/fichier2.md</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mv</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /home/vbrosseau/tp1/fichier1.md</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /home/vbrosseau/</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cp</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /home/vbrosseau/tp1/fichier2.md</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /home/vbrosseau/tp1/fichier2bis.md</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mv</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /home/vbrosseau/fichier1.md</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /home/vbrosseau/introduction.md</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">nano</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /home/vbrosseau/introduction.md</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div></details><h3 id="installer-un-serveur-web" tabindex="-1">Installer un serveur web <a class="header-anchor" href="#installer-un-serveur-web" aria-label="Permalink to &quot;Installer un serveur web&quot;">​</a></h3><p>Notre serveur a maintenant besoin d&#39;un service Web (HTML seulement), nous allons donc y installer Apache. Nous allons utiliser la commande <code>apt</code> pour installer Apache.</p><ul><li>Installez Apache avec la commande <code>apt</code>.</li><li>Vérifiez que le service Apache est bien lancé.</li></ul><div class="tip custom-block"><p class="custom-block-title">Comment faire ?</p><p>Je vous laisse regarder dans les ressources du TP précédent (voir <a href="./tp1b.html">TP précédent</a>). Pour voir comment installer Apache.</p></div><details class="details custom-block"><summary>Solution (je vous conseille de faire l&#39;exercice avant de regarder la solution)</summary><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">apt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> update</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">apt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apache2</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> status</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apache2</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></details><h3 id="les-permissions" tabindex="-1">Les permissions <a class="header-anchor" href="#les-permissions" aria-label="Permalink to &quot;Les permissions&quot;">​</a></h3><p>Afin que votre utilisateur puisse modifier le code de votre site, vous devez modifier les permissions du dossier <code>/var/www/</code> :</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">chown</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -R</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">VOTRE-UTILISATEU</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">R</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">:www-data</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /var/www/</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h4 id="creer-votre-page-web" tabindex="-1">Créer votre page web <a class="header-anchor" href="#creer-votre-page-web" aria-label="Permalink to &quot;Créer votre page web&quot;">​</a></h4><p>Vous êtes en SLAM, du coup le Web vous connaissez ? Je vous propose de créer une page web qui respecte les spécifications suivantes :</p><ul><li>Le titre de la page doit être <code>TC 5</code>.</li><li>Le titre principal de la page doit être <code>TC 5</code>.</li><li>Le texte de la page doit être <code>Bienvenue sur la page de TC 5</code>.</li><li>Le texte de la page doit être en rouge et en gras et centré.</li><li>Votre page doit contenir 3 liens vers les pages suivantes : <ul><li><a href="https://www.google.com" target="_blank" rel="noreferrer">Google</a></li><li><a href="https://www.facebook.com" target="_blank" rel="noreferrer">Facebook</a></li><li><a href="https://www.twitter.com" target="_blank" rel="noreferrer">Twitter</a></li></ul></li><li><strong>Pour l&#39;instant pas de PHP car notre serveur n&#39;est pas configuré pour.</strong></li></ul><p>Où devez-vous placer votre page web pour qu&#39;elle soit accessible depuis l&#39;extérieur ? Par défaut, Apache place les pages web dans le dossier <code>/var/www/html/</code>.</p><p>Je vous laisse éditer le fichier <code>/var/www/html/index.html</code> pour y mettre votre page web.</p><details class="details custom-block"><summary>Solution (je vous conseille de faire l&#39;exercice avant de regarder la solution)</summary><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">nano</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /var/www/html/index.html</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></details><p>Une fois le fichier édité, vous pouvez le visualiser en ouvrant votre navigateur et en tapant l&#39;adresse IP de votre serveur.</p><h3 id="verifier-les-logs" tabindex="-1">Vérifier les logs <a class="header-anchor" href="#verifier-les-logs" aria-label="Permalink to &quot;Vérifier les logs&quot;">​</a></h3><p>Maintenant que vous avez un serveur web, il est important de vérifier les logs pour voir si tout se passe bien. Pour cela, nous allons utiliser la commande <code>tail</code>.</p><ul><li>Affichez les logs d&#39;Apache en temps réel.</li><li>Affichez les logs d&#39;Apache pour les 10 dernières lignes.</li></ul><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tail</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /var/log/apache2/access.log</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tail</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -n</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /var/log/apache2/access.log</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>Vous pouvez aussi afficher l&#39;ensemble des logs avec la commande :</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">nano</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /var/log/apache2/access.log</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>🚨 Je vous laisse tester, normalement vous devriez voir les logs de vos connexions au serveur. Vous pouvez le voir en temps réel avec la commande <code>tail -f</code> et en accédant à votre page web depuis votre navigateur.</p><p>PS: N&#39;oubliez pas de quitter la commande <code>tail -f</code> avec <code>CTRL + C</code> pour pouvoir continuer le TP. PS2: N&#39;oubliez pas que vous devez me restituer un document PDF en fin de TP qui contient vos observations.</p><h2 id="evolution-du-site" tabindex="-1">Évolution du site <a class="header-anchor" href="#evolution-du-site" aria-label="Permalink to &quot;Évolution du site&quot;">​</a></h2><p>Afin de rendre votre site plus attractif, vous allez ajouter une page <code>apropos.html</code> qui contiendra les informations de contact de votre site. Celle-ci devra contenir les informations suivantes :</p><ul><li>Nom de l&#39;école : <code>Lycée Chevrollier</code>.</li><li>Votre nom &amp; prénom.</li><li>Une description de votre site.</li><li>La date de réalisation du site.</li></ul><p>Cette page devra être accessible depuis la page <code>index.html</code> via un lien nommé <code>A propos</code> et pointant vers la page <code>pages/apropos.html</code>.</p><div class="tip custom-block"><p class="custom-block-title">Comment faire ?</p><p>En vous aidant des étapes précédentes, vous devriez pouvoir créer votre page <code>apropos.html</code> et la rendre accessible depuis la page <code>index.html</code>.</p><p>Bon courage !</p></div><h2 id="me-donner-acces-a-votre-serveur" tabindex="-1">Me donner accès à votre serveur <a class="header-anchor" href="#me-donner-acces-a-votre-serveur" aria-label="Permalink to &quot;Me donner accès à votre serveur&quot;">​</a></h2><p>Votre réalisation est maintenant terminée, il est temps de me donner accès à votre serveur pour que je puisse vérifier votre travail. Nous avons vu dans le TP précédent comment autoriser votre clé SSH sur le serveur. Évidemment, je ne vais pas vous demander votre clé SSH, mais je vais vous fournir ma clé SSH <strong>publique</strong>.</p><p>La procédure est la suivante :</p><ul><li>Récupérez ma clé SSH publique (télécharger le fichier <a href="https://gist.githubusercontent.com/c4software/7902465cf82695ab5260a202757fe0ca/raw/dda707234b009333483556da61f8a990e08215ed/id_rsa_etudiant.pub" target="_blank" rel="noreferrer">ici</a>).</li><li>Ajouter le contenu du fichier <code>id_rsa_etudiant.pub</code> dans le fichier <code>~/.ssh/authorized_keys</code> de votre utilisateur sur le serveur (exemple : <code>/home/vbrosseau/.ssh/authorized_keys</code>). <ul><li>Vous pouvez utiliser <code>nano</code> ou <code>vim</code> pour éditer le fichier.</li></ul></li><li>Vous pouvez également le faire via la commande curl :</li></ul><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">su</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> -</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # Se connecter en tant que root</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">apt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> curl</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # Installer curl si ce n&#39;est pas déjà fait</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exit</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # Se déconnecter en tant que root</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">curl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://gist.githubusercontent.com/c4software/7902465cf82695ab5260a202757fe0ca/raw/dda707234b009333483556da61f8a990e08215ed/id_rsa_etudiant.pub</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &gt;&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/.ssh/authorized_keys</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # Ajouter la clé SSH publique dans le fichier authorized_keys</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="tip custom-block"><p class="custom-block-title">À la fin de cette étape, votre fichier <code>authorized_keys</code> devrait ressembler à ça :</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ssh-rsa</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> VotreClé</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ...</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ssh-rsa</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> MaClé</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ...</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></div><p>À présent, si vous me donnez l&#39;adresse IP de votre serveur, je pourrais me connecter dessus et vérifier votre travail. Si vous avez des problèmes, n&#39;hésitez pas à me contacter.</p><div class="danger custom-block"><p class="custom-block-title">Attention</p><p>En réalisant cette étape, vous me donnez accès à votre serveur. Je ne ferai rien de malveillant, mais je vous conseille de ne pas laisser votre serveur accessible à tout le monde. Vous ne devez ajouter que des personnes de confiance dans le fichier <code>authorized_keys</code>.</p><p>Si vous avez bien réalisé les étapes précédentes, je ne devrais pas avoir accès en root à votre serveur. Les modifications que je pourrais faire seront limitées à votre utilisateur, mais c&#39;est quand même mieux de ne pas laisser votre serveur accessible à tout le monde…</p></div><h2 id="restitution" tabindex="-1">Restitution <a class="header-anchor" href="#restitution" aria-label="Permalink to &quot;Restitution&quot;">​</a></h2><p>Pour restituer le projet, merci de me fournir les éléments suivants :</p><ul><li>L&#39;adresse IP de votre serveur.</li><li>Votre fiche serveur.</li><li>Rapport illustrant les différentes étapes.</li></ul><p>Le rendu se fera via le formulaire suivant : <a href="https://forms.gle/1U7j3Wwku1gpNMDf6" target="_blank" rel="noreferrer">Rendre le TP</a></p><p>Bravo vous avez terminé le TP !</p><details class="details custom-block"><summary>Comment sera validé la partie VM ?</summary><p>Pour valider la partie VM, je vais utiliser le script suivant :</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#!/bin/bash</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Définir le chemin du fichier CSV contenant les informations de connexion</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">csv_file</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./input.csv&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Fonction pour se connecter en SSH et exécuter une commande</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ssh_execute</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    ssh</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -i</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/.ssh/id_rsa_etudiant</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">remote_user</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}@\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">remote_host</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">$1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">echo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Validation des VMs&quot;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">echo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;VM Name;OS;Memory;CPU;Disk;index.html;apropos.html&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> vm_check_result.csv</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Boucle sur chaque ligne du fichier CSV</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">awk</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -F</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;;&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;{print $1, $2}&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">csv_file</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> while</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> read</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> user</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ip</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">do</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    echo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Validation pour l&#39;utilisateur \${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">user</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">} avec l&#39;adresse IP \${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ip</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}.&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # Définir les paramètres de la machine distante</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    remote_host</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ip</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    remote_user</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">user</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # Définir les paramètres de la VM</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    vm_name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;-ligne-de-commande&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # Vérifier le nom de la VM</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    vm_name_result</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">$(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ssh_execute</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;hostname&quot;)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # Vérifier l&#39;OS</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    os_result</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">$(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ssh_execute</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;lsb_release -ds&quot;)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # Vérifier la mémoire </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    memory_result</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">$(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ssh_execute</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;awk &#39;/MemTotal/{print </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">2}&#39; /proc/meminfo&quot;)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # Vérifier le CPU</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    cpu_result</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">$(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ssh_execute</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;nproc&quot;)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # Vérifier le disque</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    disk_result</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">$(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ssh_execute</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;df -h | grep &#39;/dev/sda1&#39;&quot; </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> awk</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;{print $2}&#39;)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    index_check</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">$(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ssh_execute</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;wget -qO- http://localhost/index.html | grep -q &#39;TC 5&#39; &amp;&amp; echo &#39;true&#39; || echo &#39;false&#39;&quot;)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    apropos_check</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">$(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ssh_execute</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;wget -qO- http://localhost/pages/apropos.html | grep -q &#39;html&#39; &amp;&amp; echo &#39;true&#39; || echo &#39;false&#39;&quot;)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # Enregistrer les résultats dans un fichier CSV</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    echo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">vm_name_result</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">};\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">os_result</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">};\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">memory_result</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">};\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">cpu_result</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">};\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">disk_result</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">};\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">index_check</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">};\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">apropos_check</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &gt;&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> vm_check_result.csv</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">done</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br></div></div></details>`,67),z=s("iframe",{src:"https://giphy.com/embed/4PXUYM1bXS3lRXO7lX",width:"480",height:"480",frameBorder:"0",class:"giphy-embed",allowFullScreen:""},null,-1);function M(S,T,L,I,$,j){const n=r("Badge"),l=r("center");return h(),o("div",null,[c,s("details",u,[k,s("nav",m,[s("ul",null,[g,v,F,b,s("li",null,[y,s("ul",null,[C,f,s("li",null,[s("a",E,[i("Création de la VM via un modèle "),e(n,{type:"tip",text:"Meilleure solution",vertical:"top"})])]),B,_])]),q])])]),A,e(l,null,{default:t(()=>[V]),_:1}),P,s("h3",w,[i("Création de la VM via un modèle "),e(n,{type:"tip",text:"Meilleure solution",vertical:"top"}),i(),x]),D,e(l,null,{default:t(()=>[z]),_:1})])}const H=p(d,[["render",M]]);export{N as __pageData,H as default};
