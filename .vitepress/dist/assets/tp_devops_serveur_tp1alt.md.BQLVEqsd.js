import{_ as e,c as a,o as i,U as s}from"./chunks/framework.aGaNZw_P.js";const l="/assets/modele-step-1.DMO-nScm.jpg",r="/assets/modele-step-3.C1E91fC9.jpg",o="/assets/modele-step-4.BKCTPIg-.jpg",t="/assets/modele-step-5.BgEiLSXz.jpg",n="/assets/modele-step-6.BvPjpq5-.jpg",u="/assets/modele-step-7.DEARdvGp.jpg",d="/assets/edit-hostname.DTF6rBQh.jpg",P=JSON.parse(`{"title":"TP1. Cr√©er une VM sur la ferme √† partir d'un mod√®le.","description":"Dans ce TP nous allons voir comment cr√©er une VM (machine virtuelle) sur la ferme VMWare du BTS SIO √† Angers depuis un mod√®le.","frontmatter":{"description":"Dans ce TP nous allons voir comment cr√©er une VM (machine virtuelle) sur la ferme VMWare du BTS SIO √† Angers depuis un mod√®le."},"headers":[],"relativePath":"tp/devops/serveur/tp1alt.md","filePath":"tp/devops/serveur/tp1alt.md","lastUpdated":1704218918000}`),c={name:"tp/devops/serveur/tp1alt.md"},p=s('<h1 id="tp1-creer-une-vm-sur-la-ferme-a-partir-d-un-modele" tabindex="-1">TP1. Cr√©er une VM sur la ferme √† partir d&#39;un mod√®le. <a class="header-anchor" href="#tp1-creer-une-vm-sur-la-ferme-a-partir-d-un-modele" aria-label="Permalink to &quot;TP1. Cr√©er une VM sur la ferme √† partir d&#39;un mod√®le.&quot;">‚Äã</a></h1><details class="details custom-block"><summary>Sommaire</summary><nav class="table-of-contents"><ul><li><a href="#objectifs">Objectifs</a></li><li><a href="#pre-requis">Pr√©-requis</a></li><li><a href="#les-etapes">Les √©tapes</a><ul><li><a href="#_0-creer-la-vm">0. Cr√©er la VM</a></li><li><a href="#_1-choix-du-modele-dans-la-liste">1. Choix du mod√®le dans la liste</a></li><li><a href="#_3-nom-de-la-vm-et-emplacement">3. Nom de la VM et emplacement</a></li><li><a href="#_4-configuration-de-la-vm">4. Configuration de la VM</a></li><li><a href="#_5-configuration-du-stockage">5. Configuration du stockage</a></li><li><a href="#_6-personnalisation-de-la-vm">6. Personnalisation de la VM</a></li><li><a href="#_7-choix-du-vlan">7. Choix du VLAN</a></li></ul></li><li><a href="#premier-demarrage">Premier d√©marrage</a><ul><li><a href="#changer-la-configuration-reseau">Changer la configuration r√©seau</a></li><li><a href="#changer-le-mot-de-passe-de-l-utilisateur-root">Changer le mot de passe de l&#39;utilisateur root</a></li><li><a href="#creer-un-compte-utilisateur">Cr√©er un compte utilisateur</a></li><li><a href="#mettre-a-jour-le-systeme">Mettre √† jour le syst√®me</a></li><li><a href="#changer-le-nom-de-la-machine">Changer le nom de la machine</a></li></ul></li><li><a href="#conclusion">Conclusion</a></li></ul></nav></details><h2 id="objectifs" tabindex="-1">Objectifs <a class="header-anchor" href="#objectifs" aria-label="Permalink to &quot;Objectifs&quot;">‚Äã</a></h2><p>Dans ce TP nous allons voir comment cr√©er une VM sur la ferme VMWare du BTS SIO √† Angers depuis un mod√®le. L&#39;id√©e de ce TP est de comprendre la d√©marche √† suivre.</p><div class="danger custom-block"><p class="custom-block-title">üëã Attention</p><p>La ferme est un √©quipement partag√© par l&#39;ensemble des √©tudiants du BTS (1√®re et 2√®me ann√©e). Il est donc important de respecter quelques r√®gles d&#39;utilisation pour une utilisation optimale de la ferme, et surtout <strong>dans l&#39;int√©r√™t de tous</strong>.</p></div><p>Dans ce TP nous allons utiliser un mod√®le d√©j√† cr√©√©. Si vous souhaitez cr√©er une VM sans mod√®le, vous pouvez suivre le <a href="./tp1.html">TP1</a>.</p><h2 id="pre-requis" tabindex="-1">Pr√©-requis <a class="header-anchor" href="#pre-requis" aria-label="Permalink to &quot;Pr√©-requis&quot;">‚Äã</a></h2><div class="tip custom-block"><p class="custom-block-title">Uniquement disponible pour le Lyc√©e / VPN</p><p>Pour r√©aliser ce TP vous devez :</p><ul><li>√ätre connect√© √† la ferme du BTS SIO √† Angers (ou via le VPN).</li><li>Avoir un compte sur L&#39;AD.</li></ul></div><h2 id="les-etapes" tabindex="-1">Les √©tapes <a class="header-anchor" href="#les-etapes" aria-label="Permalink to &quot;Les √©tapes&quot;">‚Äã</a></h2><p>Vous retrouverez ci-dessous les √©tapes √† suivre pour r√©aliser une machine depuis un mod√®le.</p><div class="danger custom-block"><p class="custom-block-title">üëã Attention</p><p>Cr√©er une VM √† partir d&#39;un mod√®le est plus rapide que de cr√©er une VM √† partir de z√©ro. Cependant, un mod√®le impose la personnalisation de la VM en fin de proc√©dure. √Ä savoir :</p><ul><li>Configuration du VLAN.</li><li>Configuration de l&#39;IP.</li><li>Configuration du nom de la machine.</li><li>Changement du mot de passe <code>root</code>.</li><li>Mise √† jour des paquets de la machine.</li></ul></div><h3 id="_0-creer-la-vm" tabindex="-1">0. Cr√©er la VM <a class="header-anchor" href="#_0-creer-la-vm" aria-label="Permalink to &quot;0. Cr√©er la VM&quot;">‚Äã</a></h3><p>Pour cr√©er une VM, il faut :</p><ul><li>S√©lectionner le mod√®le dans le dossier ¬´ MODELES ¬ª.</li><li>Clique droit sur la VM que vous souhaitez prendre comme mod√®le</li><li>Puis ¬´ Nouvelle VM √† partir de ce mod√®le ¬ª.</li></ul><h3 id="_1-choix-du-modele-dans-la-liste" tabindex="-1">1. Choix du mod√®le dans la liste <a class="header-anchor" href="#_1-choix-du-modele-dans-la-liste" aria-label="Permalink to &quot;1. Choix du mod√®le dans la liste&quot;">‚Äã</a></h3><p><img src="'+l+'" alt="Type de cr√©ation" loading="lazy"></p><div class="tip custom-block"><p class="custom-block-title">üìù Remarque</p><p>Le nom du mod√®le est compos√© de la fa√ßon suivante :</p><ul><li><code>MODELE-</code> : Pr√©fixe.</li><li><code>OS</code> : Nom de l&#39;OS (exemple : <code>debian</code>).</li><li><code>VERSION</code> : Version de l&#39;OS (exemple : <code>11.5</code>).</li><li><code>UTILISATEUR</code> : Nom de l&#39;utilisateur pour utiliser le mod√®le (exemple: <code>root</code>).</li><li><code>Mot de passe</code> : Mot de passe de l&#39;utilisateur pour utiliser le mod√®le (exemple : <code>root</code>). <strong>Ce mot de passe est √† changer une fois la VM cr√©√©e.</strong></li></ul></div><h3 id="_3-nom-de-la-vm-et-emplacement" tabindex="-1">3. Nom de la VM et emplacement <a class="header-anchor" href="#_3-nom-de-la-vm-et-emplacement" aria-label="Permalink to &quot;3. Nom de la VM et emplacement&quot;">‚Äã</a></h3><p><img src="'+r+'" alt="Nom de la VM et emplacement" loading="lazy"></p><h3 id="_4-configuration-de-la-vm" tabindex="-1">4. Configuration de la VM <a class="header-anchor" href="#_4-configuration-de-la-vm" aria-label="Permalink to &quot;4. Configuration de la VM&quot;">‚Äã</a></h3><p><img src="'+o+'" alt="Ressources" loading="lazy"></p><h3 id="_5-configuration-du-stockage" tabindex="-1">5. Configuration du stockage <a class="header-anchor" href="#_5-configuration-du-stockage" aria-label="Permalink to &quot;5. Configuration du stockage&quot;">‚Äã</a></h3><p><img src="'+t+'" alt="Stockage" loading="lazy"></p><h3 id="_6-personnalisation-de-la-vm" tabindex="-1">6. Personnalisation de la VM <a class="header-anchor" href="#_6-personnalisation-de-la-vm" aria-label="Permalink to &quot;6. Personnalisation de la VM&quot;">‚Äã</a></h3><p><img src="'+n+'" alt="R√©seau" loading="lazy"></p><h3 id="_7-choix-du-vlan" tabindex="-1">7. Choix du VLAN <a class="header-anchor" href="#_7-choix-du-vlan" aria-label="Permalink to &quot;7. Choix du VLAN&quot;">‚Äã</a></h3><p>N&#39;oubliez pas de choisir le VLAN pour votre VM.</p><p><img src="'+u+'" alt="VLAN" loading="lazy"></p><h2 id="premier-demarrage" tabindex="-1">Premier d√©marrage <a class="header-anchor" href="#premier-demarrage" aria-label="Permalink to &quot;Premier d√©marrage&quot;">‚Äã</a></h2><p>Maintenant que votre VM est cr√©√©e, il faut la d√©marrer, comme pour n&#39;importe quelle autre VM.</p><p>Cependant, vu qu&#39;il s&#39;agit d&#39;une VM cr√©√©e √† partir d&#39;un mod√®le, il y a quelques √©tapes √† suivre pour la configurer.</p><ul><li>Changer la configuration r√©seau.</li><li>Changer le mot de passe de l&#39;utilisateur <code>root</code>.</li><li>Vous cr√©ez un compte utilisateur.</li><li>Mettre √† jour le syst√®me.</li></ul><h3 id="changer-la-configuration-reseau" tabindex="-1">Changer la configuration r√©seau <a class="header-anchor" href="#changer-la-configuration-reseau" aria-label="Permalink to &quot;Changer la configuration r√©seau&quot;">‚Äã</a></h3><p>Pour cette √©tape vous pouvez utiliser l&#39;outil disponible dans l&#39;aide m√©moire :</p><p>En utilisant l&#39;aide m√©moire <a href="/cheatsheets/serveur/debian-reseau.html">disponible ici</a>, g√©n√©rer une nouvelle adresse IP pour votre serveur.</p><p>Une fois suivi vous pouvez v√©rifier que votre serveur a bien une nouvelle adresse IP en utilisant la commande <code>ip a</code>.</p><p>Vous pouvez aussi v√©rifier l&#39;acc√®s √† internet en utilisant la commande <code>ping google.com</code></p><div class="tip custom-block"><p class="custom-block-title">√áa ne fonctionne pas ?</p><ul><li>V√©rifier que votre VM est bien connect√©e au bon VLAN.</li><li>V√©rifier que vous n&#39;avez pas d√©j√† utilis√© cette adresse IP.</li><li>V√©rifier le serveur DNS (dans les fichiers <code>/etc/resolv.conf</code> et <code>/etc/network/interfaces</code>).</li></ul></div><h3 id="changer-le-mot-de-passe-de-l-utilisateur-root" tabindex="-1">Changer le mot de passe de l&#39;utilisateur <code>root</code> <a class="header-anchor" href="#changer-le-mot-de-passe-de-l-utilisateur-root" aria-label="Permalink to &quot;Changer le mot de passe de l&#39;utilisateur `root`&quot;">‚Äã</a></h3><p>Pour changer le mot de passe de l&#39;utilisateur, <code>root</code> vous pouvez utiliser la commande <code>passwd</code>.</p><h3 id="creer-un-compte-utilisateur" tabindex="-1">Cr√©er un compte utilisateur <a class="header-anchor" href="#creer-un-compte-utilisateur" aria-label="Permalink to &quot;Cr√©er un compte utilisateur&quot;">‚Äã</a></h3><p>Pour cr√©er un compte utilisateur, vous pouvez utiliser la commande <code>adduser &lt;votre-nom-d-utilisateur&gt;</code>.</p><div class="tip custom-block"><p class="custom-block-title">üìù Remarque</p><p>Il est important de cr√©er un compte utilisateur pour ne pas utiliser le compte <code>root</code> pour se connecter.</p></div><h3 id="mettre-a-jour-le-systeme" tabindex="-1">Mettre √† jour le syst√®me <a class="header-anchor" href="#mettre-a-jour-le-systeme" aria-label="Permalink to &quot;Mettre √† jour le syst√®me&quot;">‚Äã</a></h3><p>Maintenant que votre VM est pr√™te, il faut mettre √† jour le syst√®me.</p><p>Pour cela vous pouvez utiliser la commande :</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">apt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> update</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &amp;&amp; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">apt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> upgrade</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -y</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="changer-le-nom-de-la-machine" tabindex="-1">Changer le nom de la machine <a class="header-anchor" href="#changer-le-nom-de-la-machine" aria-label="Permalink to &quot;Changer le nom de la machine&quot;">‚Äã</a></h3><p>Par d√©faut le nom de la machine sera celui du mod√®le. Pour changer le nom de la machine, vous pouvez utiliser la commande <code>hostnamectl</code>.</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># D√©finir le nom de la machine</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">hostnamectl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> set-hostname</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> votre-nouveau-nom-de-machine</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>Puis changer le fichiers <code>/etc/hosts</code> pour que le nom de la machine soit correct. Dans mon cas je vais remplacer :</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">192.168.137.10</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> modele-debian-11</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>Par :</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">192.168.MON.IP</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> vbrosseau-demo-modele</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>Vous pouvez utiliser <code>vim</code> ou <code>nano</code> pour modifier le fichier.</p><details class="details custom-block"><summary>le fichiers /etc/hosts avant modification</summary><p><img src="'+d+'" alt="Fichier /etc/hosts" loading="lazy"></p></details><h2 id="conclusion" tabindex="-1">Conclusion <a class="header-anchor" href="#conclusion" aria-label="Permalink to &quot;Conclusion&quot;">‚Äã</a></h2><p>Vous avez maintenant une VM fonctionnelle, vous pouvez maintenant l&#39;utiliser pour vos projets.</p>',58),m=[p];function h(g,v,f,b,k,C){return i(),a("div",null,m)}const _=e(c,[["render",h]]);export{P as __pageData,_ as default};
