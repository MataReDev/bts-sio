import{_ as s,c as e,o as i,U as a}from"./chunks/framework.aGaNZw_P.js";const m=JSON.parse(`{"title":"Créer des services très rapidement (et simplement)","description":"Dans ce TP nous allons voir comment monter rapidement (et très simplement) un service avec Docker. Ici pas de Docker-Composes ou autre… Il s'agit de voir que Docker vous nous permettre de créer très simplement un « Serveur » pour répondre à une problématique ponctuelle de developpement.","frontmatter":{"description":"Dans ce TP nous allons voir comment monter rapidement (et très simplement) un service avec Docker. Ici pas de Docker-Composes ou autre… Il s'agit de voir que Docker vous nous permettre de créer très simplement un « Serveur » pour répondre à une problématique ponctuelle de developpement."},"headers":[],"relativePath":"tp/docker/creer_server_local.md","filePath":"tp/docker/creer_server_local.md","lastUpdated":1675966572000}`),n={name:"tp/docker/creer_server_local.md"},r=a(`<h1 id="creer-des-services-tres-rapidement-et-simplement" tabindex="-1">Créer des services très rapidement (et simplement) <a class="header-anchor" href="#creer-des-services-tres-rapidement-et-simplement" aria-label="Permalink to &quot;Créer des services très rapidement (et simplement)&quot;">​</a></h1><p>Dans ce TP nous allons voir comment monter rapidement (et très simplement) un service avec Docker. Ici pas de Docker-Composes ou autre… Il s&#39;agit de voir que Docker vous nous permettre de créer très simplement un « Serveur » pour répondre à une problématique ponctuelle de développement.</p><div class="danger custom-block"><p class="custom-block-title">Un détail</p><p>Le plus important dans ce genre de « stack » c&#39;est de se souvenir qu&#39;un conteneur Docker est « Stateless », c&#39;est-à-dire que les données seront effacées à chaque redémarrage de celui-ci. Donc attention !</p></div><p>Vous avez oublié comment fonctionne la ligne de commande de Docker ? <a href="/cheatsheets/docker/">Petit rappel ici sur son utilisation</a></p><h2 id="php" tabindex="-1">PHP <a class="header-anchor" href="#php" aria-label="Permalink to &quot;PHP&quot;">​</a></h2><p>Même si PHP est relativement et très simplement disponible sur différents environnements, il est quand même intéressant de voir comment le lancer directement via Docker. Pourquoi ? Et bien, car Docker va nous permettre de lancer plusieurs versions du PHP sur la même machine. Pratique par exemple si vous souhaitez tester rapidement un développement. De plus nous allons voir qu&#39;avec le système de volume, il sera possible de le faire en quelques secondes.</p><h3 id="php-7" tabindex="-1">PHP 7 <a class="header-anchor" href="#php-7" aria-label="Permalink to &quot;PHP 7&quot;">​</a></h3><div class="language-sh vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Pour *Nix</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --rm</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 8080</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">:80</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -v</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> $(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">pwd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">):/var/www/html/</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> php:7-apache</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Pour Windows</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --rm</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 8080</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">:80</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -v</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> %cd%:/var/www/html/</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> php:7-apache</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>Tester la commande (et chercher pourquoi ça ne fonctionne pas).</p><h3 id="php-8" tabindex="-1">PHP 8 <a class="header-anchor" href="#php-8" aria-label="Permalink to &quot;PHP 8&quot;">​</a></h3><div class="language-sh vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Pour *Nix</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --rm</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 8080</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">:80</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -v</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> $(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">pwd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">):/var/www/html/</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> php:8.2-apache</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Pour Windows</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --rm</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 8080</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">:80</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -v</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> %cd%:/var/www/html/</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> php:8.2-apache</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="la-force-de-docker" tabindex="-1">La force de Docker <a class="header-anchor" href="#la-force-de-docker" aria-label="Permalink to &quot;La force de Docker&quot;">​</a></h3><p>Ici nous voyons que Docker nous permet de lancer très rapidement un serveur PHP. Mais ce n&#39;est pas tout, nous allons voir que nous pouvons également lancer plusieurs versions de PHP sur la même machine. Pour cela, il suffit de changer le numéro de version dans la commande.</p><p>C&#39;est vraiment très pratique pour tester rapidement un projet, une idée, ou même pour faire des tests de compatibilité.</p><h2 id="postgresql-ou-autre-bdd" tabindex="-1">PostgreSQL (ou autre BDD) <a class="header-anchor" href="#postgresql-ou-autre-bdd" aria-label="Permalink to &quot;PostgreSQL (ou autre BDD)&quot;">​</a></h2><p>Créer temporairement un serveur de base de données peut-être intéressant pour tester un projet ou une idée. Vous utilisez actuellement peut-être XAMPP ou WAMP pour faire ce genre de choses, mais vous êtes limité à une version précise de Postgres (ou MySQL) ; avec Docker pas de limite ! Vous avez l&#39;embarras du choix pour la version.</p><div class="language-sh vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 5432</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">:5432</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> fixy-postgres</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -v</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ./pgData:/var/lib/postgresql/data</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -e</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> POSTGRES_USER=myUser</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -e</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> POSTGRES_PASSWORD=myPassword</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> postgres</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>C&#39;est à vous, je vous laisse tester le container. Pour tester la connexion à votre base de données, je vous propose plusieurs solutions :</p><ul><li>[<a href="https://wiki.postgresql.org/wiki/PostgreSQL_Clients#HeidiSQL" target="_blank" rel="noreferrer">https://wiki.postgresql.org/wiki/PostgreSQL_Clients#HeidiSQL</a>](HeidiSQL gratuit)</li><li>Datagrip de JetBrains</li><li>WebStorm / PHPStorm / InteliJ</li></ul><div class="tip custom-block"><p class="custom-block-title">Vous ne savez pas comment faire ?</p><p>Appeler moi, nous allons le faire ensemble.</p></div><h3 id="une-autre-bdd" tabindex="-1">Une autre BDD ? <a class="header-anchor" href="#une-autre-bdd" aria-label="Permalink to &quot;Une autre BDD ?&quot;">​</a></h3><p>Vous n&#39;utilisez pas PostgreSQL, mais MySQL !? Aucun problème sur le DockerHub il y a également une image officielle pour MySQL ; <a href="https://hub.docker.com/_/mysql" target="_blank" rel="noreferrer">disponible ici</a></p><p>En regardant la documentation, je vous laisse faire la même chose que pour <a href="https://hub.docker.com/_/postgres" target="_blank" rel="noreferrer">PostgreSQL</a></p><div class="tip custom-block"><p class="custom-block-title">Ici pas de commande je vous laisse chercher</p><p>Juste une petite aide, le port de MySQL est le <code>3306</code>.</p></div><details class="details custom-block"><summary>Solution</summary><div class="language-sh vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 3306</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">:3306</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> fixy-mysql</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -v</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ./mysqlData:/var/lib/mysql</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -e</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> MYSQL_ROOT_PASSWORD=myPassword</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mysql</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></details><h2 id="wordpress" tabindex="-1">Wordpress <a class="header-anchor" href="#wordpress" aria-label="Permalink to &quot;Wordpress&quot;">​</a></h2><p>Nous avons vu PHP, une base de données (MySQL et PostgreSQL), pourquoi ne pas aller plus loin ? En effet Docker ne se limite pas à PHP / Python / MySQL nous pouvons packager ce que nous souhaitons. C&#39;est le cas de plein de solutions Wordpress en fait parti ; vous avez sur le <a href="https://hub.docker.com/_/wordpress" target="_blank" rel="noreferrer">DockerHub une image toute prête avec la dernière version de Wordpress</a></p><div class="language-sh vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -e</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> WORDPRESS_DB_USER=root</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -e</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> WORDPRESS_DB_PASSWORD=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">passwor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">d</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> wordpress</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 8080</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">:80</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -v</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> $(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">pwd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">)/html:/var/www/html</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> wordpress</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="danger custom-block"><p class="custom-block-title">vous voyez le problème ?</p><p>Et oui… Wordpress seul n&#39;est pas très utile ! Il nous faut une base de données pour sauvegarder les données du container. C&#39;est à partir d&#39;ici que nous allons voir <a href="/tp/docker/docker_compose.html">la force de Docker Compose</a>.</p><p>Bien évidemment Docker Compose n&#39;est pas obligatoire… Je vous laisse tester et regarder comment il est possible de faire <strong>sans</strong>.</p></div><h2 id="aller-plus-loin" tabindex="-1">Aller plus loin <a class="header-anchor" href="#aller-plus-loin" aria-label="Permalink to &quot;Aller plus loin&quot;">​</a></h2><p>Pour finaliser votre découverte, je vous propose de monter un serveur Redmine :</p><ul><li><a href="https://hub.docker.com/_/redmine" target="_blank" rel="noreferrer">https://hub.docker.com/_/redmine</a></li></ul><p>Redmine est un outil de gestion de projet, il est très simple à utiliser et très complet. Vous pouvez l&#39;utiliser pour gérer vos projets, vos tâches, vos bugs, etc.</p><p>Une fois démarré, je vous laisse découvrir l&#39;outil.</p><h2 id="conclusion" tabindex="-1">Conclusion <a class="header-anchor" href="#conclusion" aria-label="Permalink to &quot;Conclusion&quot;">​</a></h2><p>Dans ce TP nous avons vu comment lancer un container Docker. Nous avons vu que Docker est très simple à utiliser et que nous pouvons lancer plusieurs versions de PHP sur la même machine.</p><p>Nous avons également vu que nous pouvons lancer une base de données (MySQL ou PostgreSQL) et même un serveur Web contenant le site Wordpress.</p><p>Ici l&#39;idée c&#39;était de vous montrer que Docker était très simple à utiliser et qu&#39;il pouvait nous servir comme un environnement de développement.</p>`,38),t=[r];function l(p,o,h,d,k,u){return i(),e("div",null,t)}const F=s(n,[["render",l]]);export{m as __pageData,F as default};
