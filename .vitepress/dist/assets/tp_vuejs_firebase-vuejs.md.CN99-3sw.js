import{_ as t}from"./chunks/vuejs-init.Du3E_Ssu.js";import{_ as r,c as p,I as n,w as l,U as e,D as h,o,k as s,a as i}from"./chunks/framework.aGaNZw_P.js";const k="/assets/carte_marker.ChPODiCK.png",d="/assets/creation-firebase.CRx9wa_q.png",u="/assets/configuration-web.B2jhlf-f.png",c="/assets/init_firebase.CofbddAR.png",E="/assets/security_firebase.DErICK68.png",g="/assets/serve_npm.CaNs1x33.png",m="/assets/first-map.Bw9h2Uvh.png",b="/assets/evolution_carte.B8skbKub.png",G=JSON.parse('{"title":"Firebase + VueJS 2.0","description":"Dans ce TP nous allons découvrir Firebase RealtimeDB (base de données temps réel). Nous allons coupler cette base de données temps réel à la puissance de VueJS pour obtenir en un rien de temps une application web surpuissante.","frontmatter":{"description":"Dans ce TP nous allons découvrir Firebase RealtimeDB (base de données temps réel). Nous allons coupler cette base de données temps réel à la puissance de VueJS pour obtenir en un rien de temps une application web surpuissante."},"headers":[],"relativePath":"tp/vuejs/firebase-vuejs.md","filePath":"tp/vuejs/firebase-vuejs.md","lastUpdated":1643396127000}'),y={name:"tp/vuejs/firebase-vuejs.md"},v=e('<h1 id="firebase-vuejs-2-0" tabindex="-1">Firebase + VueJS 2.0 <a class="header-anchor" href="#firebase-vuejs-2-0" aria-label="Permalink to &quot;Firebase + VueJS 2.0&quot;">​</a></h1><p>Dans ce TP nous allons découvrir Firebase RealtimeDB (base de données temps réel). Nous allons coupler cette base de données temps réel à la puissance de VueJS pour obtenir en un rien de temps une application web surpuissante.</p><h2 id="introduction" tabindex="-1">Introduction <a class="header-anchor" href="#introduction" aria-label="Permalink to &quot;Introduction&quot;">​</a></h2><p>Nous allons mettre en place une carte du monde qui affiche en temps réel l&#39;emplacement des utilisateurs qui interagissent avec la carte. Mais nous pourrions également afficher les personnes présentes sur votre site.</p><p><img src="'+k+'" alt="Carte Marker fin" loading="lazy"></p><h2 id="la-mise-en-place" tabindex="-1">La mise en place <a class="header-anchor" href="#la-mise-en-place" aria-label="Permalink to &quot;La mise en place&quot;">​</a></h2><p>Nous allons utiliser VueCLI pour initialiser le projet, première étape l&#39;installation.</p><h2 id="installer-nodejs-vuecli" tabindex="-1">Installer NodeJS + VueCLI <a class="header-anchor" href="#installer-nodejs-vuecli" aria-label="Permalink to &quot;Installer NodeJS + VueCLI&quot;">​</a></h2><p>Avant de commencer, nous allons avoir besoin de plusieurs outils :</p><ul><li>NodeJS</li><li>VueCli</li></ul><h2 id="nodejs" tabindex="-1">NodeJS <a class="header-anchor" href="#nodejs" aria-label="Permalink to &quot;NodeJS&quot;">​</a></h2><p>La première étape va être l’installation de NodeJS, la démarche est différente en fonction de votre environnement, mais pour résumer <a href="https://nodejs.org/en/download/" target="_blank" rel="noreferrer">sous Windows c’est ici</a> prendre la version CURRENT, sous OSX le plus simple c’est via Brew <code>brew install nodejs</code>, et sous Linux c’est via le gestionnaire de paquet <code>apt install nodejs</code></p><p>Une fois installé, vous êtes prêt, votre PC est prêt à accueillir l’outil Vue-Cli.</p><h2 id="vue-cli" tabindex="-1">Vue-Cli <a class="header-anchor" href="#vue-cli" aria-label="Permalink to &quot;Vue-Cli&quot;">​</a></h2><p>Vue-Cli est un outil qui simplifie la création d’un nouveau projet Vue-JS à partir de template fourni par la communauté.</p><p>Dans un terminal lancer la commande suivante dans le <code>Node.js Command Prompt</code> :</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -g</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> @vue/cli</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>Maintenant que vue-cli est installé, vous avez à votre disposition sur votre ordinateur une nouvelle commande, la commande <code>vue</code>.</p><p>Pour créer un nouveau projet, c’est simple il suffit de lancer la commande suivante dans le <code>Node.js Command Prompt</code>.</p><h2 id="initialiser-le-projet" tabindex="-1">Initialiser le projet <a class="header-anchor" href="#initialiser-le-projet" aria-label="Permalink to &quot;Initialiser le projet&quot;">​</a></h2><p>La création d&#39;un nouveau projet est très simple. Il suffit de rentrer la commande suivante :</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">vue create firebase</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">vuejs</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>Choisir l&#39;option « Default ».</p><p>🤓 git est déjà initialisé, vous pouvez en profiter pour pusher votre code sur Github / Gitlab.</p><h3 id="questions" tabindex="-1">Questions <a class="header-anchor" href="#questions" aria-label="Permalink to &quot;Questions&quot;">​</a></h3><ul><li>Pourquoi git est déjà initialisé ?</li><li>Allez jeter un coup d&#39;œil au fichier <code>.gitignore</code></li></ul><h2 id="tester" tabindex="-1">Tester <a class="header-anchor" href="#tester" aria-label="Permalink to &quot;Tester&quot;">​</a></h2><p>Le projet initialisé par <code>Vue-Cli</code> est immédiatement fonctionnel. Testez-le en saisissant :</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">npm run serve</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="'+t+`" alt="VueJS init" loading="lazy"></p><h2 id="les-dependances" tabindex="-1">Les dépendances <a class="header-anchor" href="#les-dependances" aria-label="Permalink to &quot;Les dépendances&quot;">​</a></h2><p>Maintenant que notre projet est « initialisé », nous allons avoir besoin de quelques dépendances NPM pour faire fonctionner notre projet. Notre projet va utiliser les technologies suivantes :</p><ul><li>firebase</li><li>leaflet</li></ul><p>Firebase comme vous le savez va nous servir de système de base de données. <a href="http://leafletjs.com/" target="_blank" rel="noreferrer">Leaflet</a> quant à lui est une librairie qui va nous permettre d&#39;afficher très rapidement une carte sur notre site internet.</p><h3 id="ajouter-les-dependances" tabindex="-1">Ajouter les dépendances <a class="header-anchor" href="#ajouter-les-dependances" aria-label="Permalink to &quot;Ajouter les dépendances&quot;">​</a></h3><p>Les deux outils / librairies que nous allons utiliser sont disponibles via NPM, nous allons donc les installer / ajouter au projet via les commandes suivantes :</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> firebase@7.24.0</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> leaflet</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> vue2-leaflet</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --save</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="danger custom-block"><p class="custom-block-title">Firebase 7.24 ?</p><ul><li>Heu ? Nous n&#39;installons pas la dernière version Mr ?</li><li>Et bien non ! Cette fois-ci nous allons volontairement choisir une version un peu plus ancienne…</li><li>Pourquoi ?</li><li>Et bien… À cause d&#39;une librairie que nous utilisons ! Dans ce projet nous utilisons Vuefire 2.0 qui n&#39;est compatible qu&#39;avec Firebase 7.X.</li></ul></div><h3 id="configuration-de-la-dependance-carte" tabindex="-1">Configuration de la dépendance carte <a class="header-anchor" href="#configuration-de-la-dependance-carte" aria-label="Permalink to &quot;Configuration de la dépendance carte&quot;">​</a></h3><p>Certains plugins nécessitent de la configuration supplémentaire, ça sera le cas pour Vue2-Leaflet (et Firebase). Comme vous, je ne connais pas la configuration de l&#39;ensemble des dépendances existantes. Première étape :</p><ul><li><a href="https://vue2-leaflet.netlify.app/quickstart/" target="_blank" rel="noreferrer">Lire la documentation sur le site de Vue2-Leaflet</a></li></ul><p>Maintenant que nous avons vu comment s&#39;intègre le Leaflet, réfléchissons comment intégrer ça dans notre projet :</p><ul><li>À l&#39;arrache dans le fichier <code>main.js</code> ? ✋ =&gt; NON</li><li>Dans un dossier <code>plugins</code> =&gt; 👍 Oui</li></ul><p>À votre avis pourquoi ?</p><h3 id="creation-de-la-partie-plugin" tabindex="-1">Création de la partie plugin <a class="header-anchor" href="#creation-de-la-partie-plugin" aria-label="Permalink to &quot;Création de la partie plugin&quot;">​</a></h3><p>Créer le fichier <code>src/plugins/vue2-leaflet.js</code> y mettre dedans :</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { Icon } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;leaflet&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;leaflet/dist/leaflet.css&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// this part resolve an issue where the markers would not appear</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">delete</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Icon.Default.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">prototype</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">._getIconUrl;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Icon.Default.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mergeOptions</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  iconRetinaUrl: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;leaflet/dist/images/marker-icon-2x.png&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  iconUrl: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;leaflet/dist/images/marker-icon.png&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  shadowUrl: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;leaflet/dist/images/marker-shadow.png&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><ul><li>D&#39;où vient le code ?</li></ul><h3 id="declarer-le-plugin" tabindex="-1">Déclarer le plugin <a class="header-anchor" href="#declarer-le-plugin" aria-label="Permalink to &quot;Déclarer le plugin&quot;">​</a></h3><p>Maintenant que la configuration du « plugin » est effective nous devons le déclarer dans notre fichier <code>main.js</code> pour ça rien de compliquer.</p><p>Ajouter l&#39;import :</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;./plugins/vue2-leaflet&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>🤓 Avec les autres imports déjà existants.</p><h3 id="questions-1" tabindex="-1">Questions <a class="header-anchor" href="#questions-1" aria-label="Permalink to &quot;Questions&quot;">​</a></h3><ul><li>Pourquoi l&#39;import est-il nécessaire ?</li><li>Pourquoi vue2-leaflet et pas juste leaflet ?</li></ul><h3 id="dependance-supplementaire" tabindex="-1">Dépendance supplémentaire <a class="header-anchor" href="#dependance-supplementaire" aria-label="Permalink to &quot;Dépendance supplémentaire&quot;">​</a></h3><p>Le gros avantage de NPM (et de NodeJS) c&#39;est la quantité de librairies disponibles pour répondre à un besoin, nous allons donc en profiter pour gagner du temps dans notre réalisation.</p><p>Firebase est plutôt simple à utiliser, mais nativement celle-ci ne s&#39;intègre pas directement avec le « state » d&#39;un composant VueJS! Mais grâce à d&#39;excellents développeurs c&#39;est maintenant possible et très simplement. Pour ça nous allons utiliser :</p><ul><li><a href="https://vuefire.vuejs.org/" target="_blank" rel="noreferrer">Vuefire</a></li></ul><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> vuefire@2.2.5</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --save</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>⚠️ Dans une prochaine étape, nous allons configurer Vuefire. Pour l&#39;instant le package est disponible, mais non actif.</p><p>🤓 Je vous invite quand même à aller voir <a href="https://github.com/vuejs/vuefire/tree/v1" target="_blank" rel="noreferrer">la documentation</a> de VueFire pour voir de quoi il en retourne !</p><h2 id="creation-du-projet-sur-firebase" tabindex="-1">Création du projet sur Firebase <a class="header-anchor" href="#creation-du-projet-sur-firebase" aria-label="Permalink to &quot;Création du projet sur Firebase&quot;">​</a></h2><p>Maintenant que nos dépendances sont installées et que notre projet est initialisé, nous allons configurer le projet sur Firebase :</p><p>Première étape <a href="https://console.firebase.google.com/u/0/" target="_blank" rel="noreferrer">créer le projet sur le site de Firebase</a></p><p><img src="`+d+'" alt="Création Firebase" loading="lazy"></p><p>Maintenant que le projet est créé, nous allons récupérer la configuration :</p><p><img src="'+u+`" alt="Configuration Web" loading="lazy"></p><p>Nous allons récupérer une partie du code fourni… Nous allons prendre la configuration (dans mon cas) :</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Initialize Firebase</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> config </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  apiKey: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;✋-CHANGE-CHANGE-CHANGE-CHANGE-✋&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  authDomain: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;reatlime-maps.firebaseapp.com&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  databaseURL: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://reatlime-maps.firebaseio.com&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  projectId: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;reatlime-maps&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  storageBucket: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;reatlime-maps.appspot.com&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  messagingSenderId: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;✋✋✋✋✋✋✋✋&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> config;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>Nous allons mettre le code dans le fichier <code>src/config/firebase.js</code> ⬅️</p><p>⚠️ ✋ Attention à bien changer la valeur de <code>apiKey</code> et <code>messagingSenderId</code>. ✋ ⚠️</p><p>BRAVO ! Votre projet est maintenant capable de « se connecter » avec Firebase !</p><h3 id="questions-2" tabindex="-1">Questions <a class="header-anchor" href="#questions-2" aria-label="Permalink to &quot;Questions&quot;">​</a></h3><ul><li>Et la sécurité ? À votre avis, comment ça fonctionne ?</li><li>Est-il possible de faire autrement ?</li></ul><h2 id="activer-la-realtime-db" tabindex="-1">Activer la Realtime DB <a class="header-anchor" href="#activer-la-realtime-db" aria-label="Permalink to &quot;Activer la Realtime DB&quot;">​</a></h2><p>Dans l&#39;interface de Firebase, activez la Realtime DB.</p><p><img src="`+c+'" alt="Init Firebase" loading="lazy"></p><p><img src="'+E+`" alt="Security Firebase" loading="lazy"></p><h2 id="modification-du-code-pour-inclure-la-configuration-firebase" tabindex="-1">Modification du code pour inclure la configuration Firebase <a class="header-anchor" href="#modification-du-code-pour-inclure-la-configuration-firebase" aria-label="Permalink to &quot;Modification du code pour inclure la configuration Firebase&quot;">​</a></h2><p>Maintenant que nous avons ajouté la configuration, nous devons la déclarer dans notre code. Comme pour Vue2-Leaflet nous allons ajouter un fichier de « configuration du plugin » dans le dossier, <code>src/plugins/</code> ajouter un fichier nommé <code>firebase.js</code> avec le contenu suivant :</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> firebaseConfig </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;../config/firebase&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> firebase </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;firebase/app&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;firebase/database&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Vue </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;vue&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> firebaseApp</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> firebase.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">initializeApp</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(firebaseConfig);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> db</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> firebaseApp.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">database</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Vue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">prototype</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.$db </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> db;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> firebaseApp;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>Comme pour leaflet, ajouter un import dans le fichier <code>main.js</code> pour référencer notre « configuration de plugin » :</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;./plugins/firebase&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="questions-3" tabindex="-1">Questions <a class="header-anchor" href="#questions-3" aria-label="Permalink to &quot;Questions&quot;">​</a></h3><ul><li>Que fait le code ?</li><li>Comment connaitre les autres options ?</li><li>Vue.prototype ? Kézako ? On en parle !</li></ul><h2 id="testons" tabindex="-1">Testons <a class="header-anchor" href="#testons" aria-label="Permalink to &quot;Testons&quot;">​</a></h2><p>Bien maintenant, que nous avons mis en place les bases de notre projet, testons si celui-ci fonctionne correctement. Pour ça (dans un terminal) :</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> serve</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>Après quelques secondes de compilation (pré-processing) vous devriez avoir sur votre écran :</p><p><img src="`+g+'" alt="serve npm" loading="lazy"></p><p>Et dans votre navigateur toujours la même chose à savoir :</p><p><img src="'+t+`" alt="VueJS init" loading="lazy"></p><h2 id="creation-de-notre-premiere-vue-composant" tabindex="-1">Création de notre première vue / composant. <a class="header-anchor" href="#creation-de-notre-premiere-vue-composant" aria-label="Permalink to &quot;Création de notre première vue / composant.&quot;">​</a></h2><p>Notre projet est maintenant prêt à recevoir son premier <code>.vue</code> bien à vous. Toujours dans le but d&#39;organiser son travail, nous allons commencer par créer un dossier :</p><ul><li><code>src/views/</code></li></ul><p>Ce dossier nous servira à ranger l&#39;ensemble de nos vues, pour l&#39;instant nous allons créer une vue nommée <code>map.vue</code> ce fichier contiendra le code source de notre carte.</p><p>Créer le fichier <code>src/views/map.vue</code> avec le contenu suivant :</p><div class="language-vue vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">l-map</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;map&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> :</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">zoom</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">zoom</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> :</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">center</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">center</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ref</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;myMap&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">l-tile-layer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> :</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">url</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">url</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">l-tile-layer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">l-map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { LMap, LTileLayer, LMarker, LControl } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;vue2-leaflet&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;myMap&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  data</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      url: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;http://{s}.tile.osm.org/{z}/{x}/{y}.png&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      zoom: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">13</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      center: [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">47.472092</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.550589</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  components: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    LMap,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    LTileLayer,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    LMarker,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    LControl,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  methods: {},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">style</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> scoped</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">#map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  height</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">%</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  width</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">%</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">style</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><p>✋ D&#39;où vient le code ? Tout simplement une adaptation du <a href="https://vue2-leaflet.netlify.app/components/LMap.html" target="_blank" rel="noreferrer">code de démonstration fourni par Vue2-Leaflet</a></p><h2 id="utiliser-notre-premiere-vue" tabindex="-1">Utiliser notre première vue <a class="header-anchor" href="#utiliser-notre-premiere-vue" aria-label="Permalink to &quot;Utiliser notre première vue&quot;">​</a></h2><p>Créer la vue ne déclenche rien, il faut maintenant l&#39;importer. Comme vu en cours, la « base » de notre application est répartie entre deux fichiers :</p><ul><li>Le main.js : qui contient les imports de base et la déclaration de notre objet <code>.vue</code>.</li><li>l&#39;App.vue : qui contient la « racine » de notre HTML (c&#39;est dans celui-ci que nous allons référencer notre nouvelle vue / composant).</li></ul><p>Modifier le <code>App.vue</code> par :</p><div class="language-vue vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;container&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">myMap</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> myMap </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;./views/map.vue&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;app&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  components: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    myMap,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">style</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">html</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">body</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">.container</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  margin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  padding</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  height</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">%</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  width</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">%</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">style</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><h3 id="questions-4" tabindex="-1">Questions <a class="header-anchor" href="#questions-4" aria-label="Permalink to &quot;Questions&quot;">​</a></h3><ul><li>Quelles sont les différences ?</li><li>Pourquoi le CSS n&#39;est pas <code>scoped</code> ?</li><li>À quoi correspond <code>components</code> ?</li></ul><h2 id="tester-1" tabindex="-1">Tester <a class="header-anchor" href="#tester-1" aria-label="Permalink to &quot;Tester&quot;">​</a></h2><p>Votre projet doit maintenant afficher une carte, tester rapidement via la commande :</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> serve</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="`+m+'" alt="Première carte" loading="lazy"></p><h2 id="configurer-vuefire" tabindex="-1">Configurer VueFire <a class="header-anchor" href="#configurer-vuefire" aria-label="Permalink to &quot;Configurer VueFire&quot;">​</a></h2><p>Comme pour Vue2-Leaflet et firebase, VueFire nécessite une déclaration pour être utilisé dans le projet.</p><ul><li><a href="https://vuefire.vuejs.org/" target="_blank" rel="noreferrer">Lire la documentation</a>.</li><li>Créer le fichier dans le dossier <code>plugins</code>.</li><li>Réaliser l&#39;import dans le fichier <code>main.js</code>.</li></ul>',114),F=s("p",null,[s("code",null,"src/plugins/vuefire.js")],-1),f=s("div",{class:"language-js vp-adaptive-theme line-numbers-mode"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"js"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"import"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," Vue "),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"from"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "vue"'),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"import"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," { rtdbPlugin } "),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"from"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "vuefire"'),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),i(`
`),s("span",{class:"line"}),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Vue."),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"use"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(rtdbPlugin);")])])]),s("div",{class:"line-numbers-wrapper","aria-hidden":"true"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br"),s("span",{class:"line-number"},"4"),s("br")])],-1),C=s("p",null,[s("code",null,"main.js")],-1),q=s("div",{class:"language-js vp-adaptive-theme line-numbers-mode"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"js"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// […]")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"import"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "./plugins/vuefire"'),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),i(`
`),s("span",{class:"line"}),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// […]")])])]),s("div",{class:"line-numbers-wrapper","aria-hidden":"true"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br"),s("span",{class:"line-number"},"4"),s("br")])],-1),j=s("div",{class:"tip custom-block"},[s("p",{class:"custom-block-title"},"TIP"),s("p",null,"Et voilà ! Votre base RealtimeDB est accessible !")],-1),B=e(`<h2 id="connecter-firebase-a-notre-vue" tabindex="-1">Connecter Firebase à notre vue <a class="header-anchor" href="#connecter-firebase-a-notre-vue" aria-label="Permalink to &quot;Connecter Firebase à notre vue&quot;">​</a></h2><p>Grâce au plugin l&#39;intégration de Firebase va être très simplifiée. Déjà vous avez mis en place Firebase et injecter le connecteur de base de données grâce au « plugin » et « Vue.prototype », nous allons devoir l&#39;utiliser. Pour ça, modifiez le fichier <code>maps.vue</code> pour ajouter (après name) :</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">firebase</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    markerList: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.$db.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ref</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/markerList/&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>Ajouter également dans les <code>data</code> de votre composant une variable nommée <code>markerList</code> avec comme valeurs <code>[]</code>.</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">markerList</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [];</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="questions-5" tabindex="-1">Questions : <a class="header-anchor" href="#questions-5" aria-label="Permalink to &quot;Questions :&quot;">​</a></h3><ul><li>D&#39;où vient <code>this.$db</code> ?</li><li>À quoi correspond le <code>/markerList/</code> ?</li></ul><p>Et c&#39;est tout ! Vous avez maintenant dans votre objet vue une nouvelle variable de disponible, <code>markerList</code> celle-ci est synchronisée avec votre base de données temps réel (Firebase RealtimeDB).</p><h2 id="manipuler-la-base-realtimedb" tabindex="-1">Manipuler la base RealtimeDB <a class="header-anchor" href="#manipuler-la-base-realtimedb" aria-label="Permalink to &quot;Manipuler la base RealtimeDB&quot;">​</a></h2><p>La manipulation de la base RealtimeDB va se faire via l&#39;objet <code>this.$firebaseRefs</code>. Voilà l&#39;ensemble des actions possibles :</p><h3 id="ajouter-une-nouvelle-entree" tabindex="-1">Ajouter une nouvelle entrée : <a class="header-anchor" href="#ajouter-une-nouvelle-entree" aria-label="Permalink to &quot;Ajouter une nouvelle entrée :&quot;">​</a></h3><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.$firebaseRefs.markerList.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/*…*/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="modifier-une-entree" tabindex="-1">Modifier une entrée : <a class="header-anchor" href="#modifier-une-entree" aria-label="Permalink to &quot;Modifier une entrée :&quot;">​</a></h3><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.$firebaseRefs.markerList[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">].</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">update</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/*...*/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Marker updated!&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><ul><li><code>0</code> étant l&#39;index de l&#39;élément à modifier.</li><li><code>/* ... */</code> étant le nouveau contenu, par exemple <code>[0, 0]</code></li></ul></div><h3 id="supprimer-un-element" tabindex="-1">Supprimer un élément : <a class="header-anchor" href="#supprimer-un-element" aria-label="Permalink to &quot;Supprimer un élément :&quot;">​</a></h3><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.$firebaseRefs.markerList.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">child</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(identifiant).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">remove</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><p><code>identifiant</code> étant la clé unique représentant votre élément en base.</p></div><p><a href="https://vuefire.vuejs.org/vuefire/writing-data.html#updates-to-collection-and-documents" target="_blank" rel="noreferrer">Plus de détail ici sur la documentation</a></p><h2 id="ajouter-un-marker" tabindex="-1">Ajouter un marker <a class="header-anchor" href="#ajouter-un-marker" aria-label="Permalink to &quot;Ajouter un marker&quot;">​</a></h2><p>Pour ajouter un marker sur la carte, nous allons utiliser la directive <code>@click</code> sur l&#39;objet <code>l-map</code> :</p><ul><li>Ajouter sur l&#39;objet <code>&lt;l-map&gt;</code> la directive suivante <code>@click=&quot;addMarker&quot;</code>.</li><li>Ajouter la méthode <code>addMarker</code> dans les méthodes de votre objet VueJS <code>addMarker(position){…}</code> .</li><li>À votre avis à quoi doit ressembler le code ?</li><li>Ajouter un <code>console.log(position)</code> avez-vous une propriété <code>latlng</code> ?</li><li>Remplacez-le <code>console.log</code> par le bon push pour ajouter dans la base de données la position.</li></ul>`,22),A=s("div",{class:"language-js vp-adaptive-theme line-numbers-mode"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"js"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"addMarker"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(position) {")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"  this"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".$firebaseRefs.markerList."),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"push"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"([")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    position.latlng.lat,")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    position.latlng.lng")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  ]);")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"},")])])]),s("div",{class:"line-numbers-wrapper","aria-hidden":"true"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br"),s("span",{class:"line-number"},"4"),s("br"),s("span",{class:"line-number"},"5"),s("br"),s("span",{class:"line-number"},"6"),s("br")])],-1),_=e('<h2 id="tester-2" tabindex="-1">Tester <a class="header-anchor" href="#tester-2" aria-label="Permalink to &quot;Tester&quot;">​</a></h2><ul><li>Ouvrer la <a href="https://console.firebase.google.com/" target="_blank" rel="noreferrer">console de Firebase</a> rendez-vous dans la partie <code>Database</code>.</li><li>Lancer votre projet local <code>npm run serve</code>.</li><li>Cliquer sur la carte.</li><li>Que constatez-vous ?</li></ul><h2 id="afficher-les-markers" tabindex="-1">Afficher les markers <a class="header-anchor" href="#afficher-les-markers" aria-label="Permalink to &quot;Afficher les markers&quot;">​</a></h2><p>Les markers ne s&#39;affichent pas ? C&#39;est normal! Pour l&#39;instant nous n&#39;avons pas mis le code permettant de les afficher. C&#39;est l&#39;étape à laquelle nous sommes.</p><p>La logique va être simpliste, nous devons afficher TOUS les éléments contenus dans la variable <code>markerList</code> déclarée précédemment.</p><p>Les étapes :</p><ul><li>Utilisation de <a href="https://vue2-leaflet.netlify.app/components/LMarker.html" target="_blank" rel="noreferrer">l-marker</a></li><li>Le mettre en place dans le <code>l-map</code> en suivant la documentation.</li><li>Mise en place d&#39;une boucle v-for.</li><li>et… c&#39;est tout</li><li>Essayer sans regarder la solution.</li></ul>',7),D=s("p",null,[i("Le marker est à mettre dans le "),s("code",null,"l-map"),i(".")],-1),P=s("div",{class:"language-html vp-adaptive-theme line-numbers-mode"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"html"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"<"),s("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"}},"l-marker")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"  v-for"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"="),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"(marker,i) in markerList"')]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"  :key"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"="),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"i"')]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"  :lat-lng"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"="),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"marker"')]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"></"),s("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"}},"l-marker"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},">")])])]),s("div",{class:"line-numbers-wrapper","aria-hidden":"true"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br"),s("span",{class:"line-number"},"4"),s("br"),s("span",{class:"line-number"},"5"),s("br")])],-1),x=s("div",{class:"tip custom-block"},[s("p",{class:"custom-block-title"},"Nous avons"),s("p",null,"Nous avons donc ici :"),s("ul",null,[s("li",null,"Un élément que nous allons répéter autant de fois que nous avons d'enregistrement en base de données."),s("li",null,[s("code",null,":key"),i(" qui permet d'optimiser les affichages.")]),s("li",null,[s("code",null,":lat-lng"),i(" qui positionne le marker (le picto) à l'endroit du click.")])])],-1),V=e(`<h2 id="tester-3" tabindex="-1">Tester <a class="header-anchor" href="#tester-3" aria-label="Permalink to &quot;Tester&quot;">​</a></h2><p>Toujours avec <code>npm run serve</code>, normalement des markers doivent s&#39;afficher. Tenter d&#39;en ajouter d&#39;autres.</p><h2 id="suppression-d-un-marker" tabindex="-1">Suppression d&#39;un marker <a class="header-anchor" href="#suppression-d-un-marker" aria-label="Permalink to &quot;Suppression d&#39;un marker&quot;">​</a></h2><p>Bon maintenant qu&#39;il y a plein de marker partout nous allons mettre en place le code pour les supprimer ! Voilà la procédure à suivre :</p><ul><li>Ajout d&#39;une méthode <code>removeMarker</code></li></ul><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">removeMarker</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(markerKey) {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.$firebaseRefs.markerList.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">child</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(markerKey).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">remove</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">},</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li>Ajouter la directive sur <code>l-marker</code> :</li></ul><div class="language-html vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@click=&quot;() =&gt; removeMarker(marker[&#39;.key&#39;])&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="tip custom-block"><p class="custom-block-title">Qu&#39;avons nous ici ?</p><p><code>() =&gt; removeMarker(marker[&#39;.key&#39;])</code> Représente une fonction qui sera appelée au click. Cette fonction déclenchera la suppression du marker. Le <code>marker[&#39;.key&#39;]</code> est l&#39;identifiant de l&#39;élément que l&#39;on souhaite supprimer.</p><p>le <code>…[&#39;.key&#39;]</code> est automatiquement ajouté par la librairie <code>Vuefire</code>.</p></div><h2 id="tester-4" tabindex="-1">Tester <a class="header-anchor" href="#tester-4" aria-label="Permalink to &quot;Tester&quot;">​</a></h2><p>Tenter de supprimer un marker en cliquant dessus.</p><h2 id="tester-a-plusieurs" tabindex="-1">Tester à plusieurs <a class="header-anchor" href="#tester-a-plusieurs" aria-label="Permalink to &quot;Tester à plusieurs&quot;">​</a></h2><p>Accéder à plusieurs au même projet (via votre IP) pour tester la synchronisation.</p><h2 id="centrer-la-carte-sur-votre-position" tabindex="-1">Centrer la carte sur votre position <a class="header-anchor" href="#centrer-la-carte-sur-votre-position" aria-label="Permalink to &quot;Centrer la carte sur votre position&quot;">​</a></h2><p>Profitons des nouvelles fonctionnalités de nos navigateurs pour améliorer notre carte. Actuellement la carte est centrée sur Angers… C&#39;est pratique… Si on se trouve à Angers… dans tous les autres cas, ce n’est pas forcément adapté. Nous allons donc utiliser l&#39;API <code>geolocation</code> de notre navigateur.</p><p>Celle-ci permet de localiser une personne en fonction de sa connexion Internet (ou GPS / Réseau téléphonique si disponible)</p><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Geolocation_API" target="_blank" rel="noreferrer">Documentation de l&#39;API geolocation</a>.</li><li>Ajouter une méthode dans le code dans le composant <code>map.vue</code>.</li><li>La méthode doit mettre à jour la Data <code>this.center = [lat, lng]</code>.</li><li>La méthode doit être appelée via un clique utilisateur <a href="https://vue2-leaflet.netlify.app/examples/custom-control.html" target="_blank" rel="noreferrer">Documentation de LControl</a></li></ul>`,17),L=s("p",null,[i("template : Dans le "),s("code",null,"l-map")],-1),T=s("div",{class:"language-html vp-adaptive-theme line-numbers-mode"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"html"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"<"),s("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"}},"l-control"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"> <"),s("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"}},"button"),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," @click"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"="),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"getUserLocation"'),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},">Localisez-moi</"),s("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"}},"button"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"> </"),s("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"}},"l-control"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},">")])])]),s("div",{class:"line-numbers-wrapper","aria-hidden":"true"},[s("span",{class:"line-number"},"1"),s("br")])],-1),M=s("p",null,"methods :",-1),w=s("div",{class:"language-js vp-adaptive-theme line-numbers-mode"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"js"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"getUserLocation"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"() {")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"  if"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"geolocation"'),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," in"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," navigator) {")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    navigator.geolocation."),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"getCurrentPosition"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}},"      position"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," =>"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," {")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"        this"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".$refs.myMap.mapObject."),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"setView"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"([position.coords.latitude, position.coords.longitude], "),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"22"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"      },")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}},"      error"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," =>"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," {")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        console."),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"error"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(error);")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"      }")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    );")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  }")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),s("div",{class:"line-numbers-wrapper","aria-hidden":"true"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br"),s("span",{class:"line-number"},"4"),s("br"),s("span",{class:"line-number"},"5"),s("br"),s("span",{class:"line-number"},"6"),s("br"),s("span",{class:"line-number"},"7"),s("br"),s("span",{class:"line-number"},"8"),s("br"),s("span",{class:"line-number"},"9"),s("br"),s("span",{class:"line-number"},"10"),s("br"),s("span",{class:"line-number"},"11"),s("br"),s("span",{class:"line-number"},"12"),s("br")])],-1),S=e(`<h3 id="integrer-bootstrap" tabindex="-1">Intégrer Bootstrap <a class="header-anchor" href="#integrer-bootstrap" aria-label="Permalink to &quot;Intégrer Bootstrap&quot;">​</a></h3><p>En utilisant la documentation fournie sur le site de <a href="https://bootstrap-vue.org/docs" target="_blank" rel="noreferrer">Vue-Bootstrap</a></p><p>Modifier l&#39;affichage du <code>button</code> précédemment ajouté pour lui donner un style plus propre.</p><h3 id="ajouter-une-confirmation" tabindex="-1">Ajouter une confirmation <a class="header-anchor" href="#ajouter-une-confirmation" aria-label="Permalink to &quot;Ajouter une confirmation&quot;">​</a></h3><p>Actuellement la suppression d&#39;un Marker est faite sans confirmation. En utilisant le composant <a href="https://bootstrap-vue.org/docs/components/modal#confirm-message-box" target="_blank" rel="noreferrer">Dialog de VueBootstrap</a> ajoutez une confirmation de suppression.</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.$bvModal.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">msgBoxConfirm</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Are you sure?&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">confirmation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // Confirmation peut-être true ou false en fonction du choix de l&#39;utilisateur.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="personalisation-du-marker" tabindex="-1">Personalisation du Marker <a class="header-anchor" href="#personalisation-du-marker" aria-label="Permalink to &quot;Personalisation du Marker&quot;">​</a></h3><p>La carte est basique… beaucoup trop ! Et si nous placions des markers différents en fonction du navigateur de l&#39;utilisateur. Je vous laisse réfléchir à comment nous pouvons faire ça :</p><ul><li>À la fois dans le code.</li><li>À la fois dans la base de données.</li></ul><h3 id="modification-du-marker" tabindex="-1">Modification du Marker <a class="header-anchor" href="#modification-du-marker" aria-label="Permalink to &quot;Modification du Marker&quot;">​</a></h3><p>En utilisant « Une Dialog » de Bootstrap ajouter le code nécessaire à la modification du Marker :</p><ul><li>Un click sur un Marker permet de choisis une nouvelle icône.</li><li>Un bouton « valider » enregistre la modification.</li></ul><h3 id="ajouter-une-ui-a-votre-projet" tabindex="-1">Ajouter une UI à votre projet <a class="header-anchor" href="#ajouter-une-ui-a-votre-projet" aria-label="Permalink to &quot;Ajouter une UI à votre projet&quot;">​</a></h3><p>Actuellement nous avons une carte pleine page qui s&#39;affiche dès notre arrivée sur le site Internet. C&#39;est pratique, mais finalement je souhaite avoir une interface plus classique avec une NavBar (comme celle de bootstrap).</p><p>En utilisant mes talents de design, voilà l&#39;interface que je souhaite obtenir. Vous noterez que j&#39;ai en haut deux boutons me permettant d&#39;accéder à deux fonctions de mon site (Carte &amp; Liste).</p><ul><li>La Vue carte, est similaire à celle actuelle, elle n’est par contre pas pleine page.</li><li>La Vue liste est une vision liste de l&#39;ensemble des points présent en base de données.</li></ul><p><img src="`+b+'" alt="Évolution" loading="lazy"></p><div class="danger custom-block"><p class="custom-block-title">Vous allez avoir besoin de plug-in</p><p>Je vous rappelle, que si vous souhaitez avoir plusieurs pages dans votre projet. Vous allez avoir besoin du plug-in Vue Router.</p><p>Je vous laisse choisir la bonne façon de l&#39;installer.</p><p><a href="https://router.vuejs.org/installation.html#npm" target="_blank" rel="noreferrer">Vue Router</a></p></div>',18);function I(N,z,R,J,U,Q){const a=h("Reveal");return o(),p("div",null,[v,n(a,{text:"Voir la solution"},{default:l(()=>[F,f,C,q,j]),_:1}),B,n(a,{text:"Voir la solution"},{default:l(()=>[A]),_:1}),_,n(a,{text:"Voir la solution"},{default:l(()=>[D,P,x]),_:1}),V,n(a,{text:"Voir la solution"},{default:l(()=>[L,T,M,w]),_:1}),S])}const K=r(y,[["render",I]]);export{G as __pageData,K as default};
