import{_ as s,c as e,o as i,U as a}from"./chunks/framework.aGaNZw_P.js";const n="/assets/form_bart.BjrH0lSy.png",g=JSON.parse(`{"title":"Utiliser la session","description":"Nous avons des informations, mais celle-ci est pour l'instant perdue Â« Ã  chaque rafraichissement Â»â€¦ C'est dommage d'autant plus qu'en PHP sauvegarder des informations c'est simple comme bonjour.","frontmatter":{"description":"Nous avons des informations, mais celle-ci est pour l'instant perdue Â« Ã  chaque rafraichissement Â»â€¦ C'est dommage d'autant plus qu'en PHP sauvegarder des informations c'est simple comme bonjour."},"headers":[],"relativePath":"tp/php/tp4.md","filePath":"tp/php/tp4.md","lastUpdated":1694697956000}`),l={name:"tp/php/tp4.md"},t=a(`<h1 id="utiliser-la-session" tabindex="-1">Utiliser la session <a class="header-anchor" href="#utiliser-la-session" aria-label="Permalink to &quot;Utiliser la session&quot;">â€‹</a></h1><p>Nous avons des informations, mais celle-ci est pour l&#39;instant perdue Â« Ã  chaque rafraichissement Â»â€¦ C&#39;est dommage d&#39;autant plus qu&#39;en PHP sauvegarder des informations c&#39;est simple comme bonjour.</p><details class="details custom-block"><summary>Sommaire</summary><nav class="table-of-contents"><ul><li><a href="#introduction">Introduction</a></li><li><a href="#sauvegarder-dans-la-session">Sauvegarder dans la session</a><ul><li><a href="#tester-le-code">Tester le code</a></li><li><a href="#demarrer-la-session">DÃ©marrer la session</a></li><li><a href="#utiliser-la-session-1">Utiliser la session</a></li><li><a href="#c-est-a-vous">C&#39;est Ã  vous</a></li></ul></li><li><a href="#sauvegarder-dans-un-cookie">Sauvegarder dans un cookie</a><ul><li><a href="#c-est-a-vous-1">C&#39;est Ã  vous</a></li></ul></li><li><a href="#verifier-le-bon-fonctionnement">VÃ©rifier le bon fonctionnement</a></li><li><a href="#les-limites-des-cookies">Les limites des Cookies</a></li><li><a href="#cookie-ou-session">Cookie ou Session ?</a></li><li><a href="#la-suite">La suiteâ€¦</a></li></ul></nav></details><h2 id="introduction" tabindex="-1">Introduction <a class="header-anchor" href="#introduction" aria-label="Permalink to &quot;Introduction&quot;">â€‹</a></h2><p>En PHP l&#39;usage de la session est transparent, c&#39;est Ã  dire que vous n&#39;avez pas vraiment Ã  vous souciez du fonctionnement de celle-ci tout ce que vous devez retenir c&#39;est que vos valeurs sont disponible dans les tableaux :</p><ul><li><code>$_SESSION</code></li><li><code>$_COOKIE</code></li></ul><div class="tip custom-block"><p class="custom-block-title">Super-globales ?</p><p>C&#39;est deux variables sont des <code>super-globales</code> elles sont donc toutes les deux en permanence disponible dans votre code, et sont automatiquement remplies dÃ¨s le dÃ©but du chargement de votre page.</p></div><p>La SESSION comme le COOKIE sont donc des variables Â« un peu magiques Â» qui vont vous permettre de sauvegarder des donnÃ©es entre chaque chargement de pages. Elles ont chacune un usage propre :</p><ul><li>La session servira pour des donnÃ©es temporaires. Les valeurs de la session sont sauvegardÃ©es <strong>sur le serveur</strong> (donc non modifiable par un utilisateur).</li><li>Le cookie servira plus pour de la sauvegarde de donnÃ©es Â« plus longue durÃ©e Â», mais non sensible. Exemple une prÃ©fÃ©rence d&#39;affichage, ou un identifiant permettant de suivre l&#39;activitÃ© d&#39;un utilisateur.</li></ul><h2 id="sauvegarder-dans-la-session" tabindex="-1">Sauvegarder dans la session <a class="header-anchor" href="#sauvegarder-dans-la-session" aria-label="Permalink to &quot;Sauvegarder dans la session&quot;">â€‹</a></h2><p>L&#39;utilisation de la SESSION est transparente, elle ne nÃ©cessite que le dÃ©marrage de celle-ci <strong>une seule fois</strong> et <strong>au dÃ©but de votre page</strong> PHP. La fonction Ã  appeler est :</p><div class="language-php vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">session_start</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="tip custom-block"><p class="custom-block-title">C&#39;est tout</p><p>Ã€ partir de cet instant vous avez maintenant accÃ¨s Ã  la SESSION de l&#39;utilisateur ğŸ†’.</p></div><div class="warning custom-block"><p class="custom-block-title">Oui maisâ€¦</p><p>Il est Ã©galement possible d&#39;arrÃªter la SESSION pour dÃ©truire toutes les valeurs enregistrÃ©es. Cette opÃ©ration se fait avec la fonction :</p><div class="language-php vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">session_destroy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>ğŸ™ˆ Cette opÃ©ration est Ã  faire par exemple Ã  la dÃ©connexion de l&#39;utilisateur sur votre site.</p></div><p>Dans le <a href="./tp3.html">TP3</a> (<a href="/demo/php/bart/bart-form-structure.zip">Le code du TP3 est disponible ici</a>.), nous avions crÃ©Ã© un Â« entry-point Â». Ce point d&#39;entrÃ©e (qui est une bonne pratique en termes de sÃ©curitÃ© ! Pourquoi Ã  votre avis ?) va nous servir Ã  dÃ©marrer la SESSION vous n&#39;aurez comme plus Ã  vous en soucier.</p><h3 id="tester-le-code" tabindex="-1">Tester le code <a class="header-anchor" href="#tester-le-code" aria-label="Permalink to &quot;Tester le code&quot;">â€‹</a></h3><p>Avant de continuer, je vous laisse tester le code. Pour Ã§a vous avez deux solutions :</p><ul><li>Utiliser XAMPP sur votre machine (ou Wamp).</li><li>Utiliser le serveur PHP intÃ©grÃ© Ã  PHP 8 (<strong>ma solution favorite</strong>).</li></ul><div class="tip custom-block"><p class="custom-block-title">Vous souhaitez utiliser le serveur intÃ©grÃ© ?</p><p>Merci Ã§a me fait plaisir ! Du coup, c&#39;est plutÃ´t simple, dans un terminal (par exemple celui intÃ©grÃ© Ã  VSCode) :</p><div class="language-sh vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Windows (avec XAMPP)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">C:/xampp/php/php</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -S</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> localhost:9000</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Windows (avec WAMP)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">C:/wamp64/bin/php/php8.2.0/php</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -S</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> localhost:9000</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Linux / OSX</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">php</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -S</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> localhost:9000</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>ğŸ‘‹ Besoin d&#39;aide ? Je suis lÃ  !</p></div><h3 id="demarrer-la-session" tabindex="-1">DÃ©marrer la session <a class="header-anchor" href="#demarrer-la-session" aria-label="Permalink to &quot;DÃ©marrer la session&quot;">â€‹</a></h3><p>Pour Ã§a, dans le fichier <code>index.php</code>, ajouter tout en haut, la ligne de code suivante :</p><div class="language-php vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">session_start</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="tip custom-block"><p class="custom-block-title">ATTENTION</p><p>Assurez-vous que cette ligne soit toujours la premiÃ¨re de votre fichier.</p></div><h3 id="utiliser-la-session-1" tabindex="-1">Utiliser la session <a class="header-anchor" href="#utiliser-la-session-1" aria-label="Permalink to &quot;Utiliser la session&quot;">â€‹</a></h3><p>Maintenant que notre SESSION est crÃ©Ã©e, vous pouvez :</p><div class="language-php vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;?</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">php</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Ã‰crire dedans</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$phrase </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;Je ne copie pas le code de valentin.&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$_SESSION[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;phrase&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $phrase;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;!--</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Ou</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> la</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> lire</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">par</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> exemple</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> --&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">input</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> type</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;text&#39;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> value</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;&lt;?php echo $_SESSION[&quot;phrase&quot;]; ?&gt;&#39;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;phrase&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;!--</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Ou</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> plus</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> simplement</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> --&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">input</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> type</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;text&#39;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> value</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;&lt;?= $_SESSION[&quot;phrase&quot;]; ?&gt;&#39;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;phrase&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;?</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">php</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Ou la lire, autre exemple</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">echo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $_SESSION[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;phrase&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">];</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Ou faire des opÃ©rations algorithmiques, par exemple</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">isset</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">($_SESSION[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;phrase&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">])){</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    echo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Il y a une session&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    echo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Il n&#39;y a pas de valeur en session&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h3 id="c-est-a-vous" tabindex="-1">C&#39;est Ã  vous <a class="header-anchor" href="#c-est-a-vous" aria-label="Permalink to &quot;C&#39;est Ã  vous&quot;">â€‹</a></h3><p>Maintenant que nous avons revu les bases de l&#39;utilisation de la session. Je vous propose de modifier le code que nous avons prÃ©cÃ©demment rÃ©alisÃ©. Dans le code que vous avez rÃ©alisÃ© / tÃ©lÃ©chargÃ©, nous avions crÃ©Ã© un formulaire :</p><p><img src="`+n+`" alt="Formulaire de choix pour le TP Bart" loading="lazy"></p><p>Le formulaire est actuellement Â« non persistÃ© Â», il est remis Ã  zÃ©ro Ã  chaque fois que vous accÃ©dez Ã  votre site. C&#39;est dommageâ€¦ Je vous propose dans un premier temps de le persister via la SESSION.</p><p><em>Vous devez dans un premier temps dÃ©finir les variables nÃ©cessaires :</em></p><table><thead><tr><th>Variables</th><th>Usage</th></tr></thead><tbody><tr><td><code>$_SESSION[&#39;phrase&#39;]</code></td><td>Sauvegarde la phrase saisie par l&#39;utilisateur</td></tr><tr><td><code>$_SESSION[&#39;count&#39;]</code></td><td>Sauvegarde le nombre choisi par l&#39;utilisateur</td></tr></tbody></table><p>Maintenant que nous avons les noms de variables. Il faut trouver Ã  quel moment sauvegarder les valeursÂ ?</p><p>Le bon moment est dans la page <code>bart.php</code>, cette page contient la logique d&#39;exÃ©cution de votre code, il faudra donc dans cette page Ã©crire quelque chose comme :</p><div class="language-php vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$_SESSION[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;phrase&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $_POST[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;phrase&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">];</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$_SESSION[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;count&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $_POST[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;count&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">];</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>La troisiÃ¨me, et derniÃ¨re Ã©tape, va Ãªtre de relire les valeurs enregistrÃ©es dans la session afin de les utiliser dans votre formulaire, par exemple, si vous souhaitez afficher la valeur de <code>$_SESSION[&#39;phrase&#39;]</code> dans un <code>input</code>:</p><div class="language-php vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">input</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> type</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;text&#39;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> value</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;&lt;?php echo $_SESSION[&quot;phrase&quot;]; ?&gt;&#39;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;phrase&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="tip custom-block"><p class="custom-block-title">Je vous laisse chercher pour le <code>select</code></p><p>Pour le <code>select</code> la logique va Ãªtre un peu similaire. Je vous laisse chercher comment Ã©crire le code permettant de Â« prÃ©-sÃ©lectionner Â» une option dans un <code>select</code>.</p><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/select" target="_blank" rel="noreferrer">Documentation</a></li></ul></div><h2 id="sauvegarder-dans-un-cookie" tabindex="-1">Sauvegarder dans un cookie <a class="header-anchor" href="#sauvegarder-dans-un-cookie" aria-label="Permalink to &quot;Sauvegarder dans un cookie&quot;">â€‹</a></h2><p>Le Cookie fonctionne un peu comme la SESSION au dÃ©tail prÃ¨s que vous enregistrez la valeur non pas sur le serveur, mais sur <strong>le poste de l&#39;utilisateur</strong>. Ce dÃ©tail <em>est important</em>, si vous stockez de l&#39;information sur le poste du client, Ã§a veut dire qu&#39;il est possible pour lui de la modifier (nous allons voir comment ensemble).</p><p>L&#39;autre diffÃ©rence entre la SESSION et les Cookies est la durÃ©e de vie de celle-ci, un cookie Ã  une durÃ©e de vie que vous choisissez ! Ã‡a peut aller de quelques secondes Ã  plusieurs mois. Ã€ noter tout de mÃªme que le Cookie peut Ãªtre supprimÃ© par le client.</p><p>Comme pour la session vous pouvez enregistrer ce que vous souhaitez dans un Cookie, cependant les donnÃ©es Ã©tant accessible par l&#39;utilisateur je vous conseille de sauvegarder des informations non sensibles telles que :</p><ul><li>ParamÃ©trage d&#39;affichage.</li><li>Identifiant de trekking (uuid).</li><li>DonnÃ©es saisies par l&#39;utilisateur (formulaire par exemple).</li></ul><p>Vous l&#39;avez peut-Ãªtre remarquÃ©, votre modification prÃ©cÃ©dente fonctionne correctement, mais si vous attendez plus de 22 minutes, vos donnÃ©es sont quand mÃªme perdues. Nous allons rÃ©soudre cette problÃ©matique en utilisant un Cookie plutÃ´t.</p><h3 id="c-est-a-vous-1" tabindex="-1">C&#39;est Ã  vous <a class="header-anchor" href="#c-est-a-vous-1" aria-label="Permalink to &quot;C&#39;est Ã  vous&quot;">â€‹</a></h3><p>Ã‰crire &amp; lire dans un cookie est trÃ¨s simple, tout aussi simple que dans la session. Ici pas de dÃ©marrage Ã  faire <strong>c&#39;est automatique</strong> !</p><div class="language-php vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Enregistre une valeur</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;Valeur de test&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">setcookie</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;monCookie&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, $value);</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">setcookie</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;monCookie&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, $value, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">time</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3600</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* expire dans 1 heure */</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// RÃ©cupÃ©ration d&#39;un cookie</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">echo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $_COOKIE[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;monCookie&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">];</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>Je vous laisse modifier votre code prÃ©cÃ©dent afin d&#39;utiliser des COOKIES plutÃ´t que la SESSION. Cette fois-ci, pas d&#39;aide, je vous laisse vous organiser.</p><h2 id="verifier-le-bon-fonctionnement" tabindex="-1">VÃ©rifier le bon fonctionnement <a class="header-anchor" href="#verifier-le-bon-fonctionnement" aria-label="Permalink to &quot;VÃ©rifier le bon fonctionnement&quot;">â€‹</a></h2><p>Je vous laisse valider le bon fonctionnement de votre site avec l&#39;utilisateur des Cookies.</p><div class="tip custom-block"><p class="custom-block-title">Quel est l&#39;impact d&#39;un tel changement ?</p><p>Avec ce que nous avons vu en cours, mais Ã©galement nos Ã©changes, regarder l&#39;impact Â« en termes de sÃ©curitÃ© Â» sur votre code :</p><ul><li>Avez-vous vu des diffÃ©rences ?</li><li>Pouvez-vous modifier le comportement Â« via une altÃ©ration cÃ´tÃ© client ? Â»</li></ul></div><h2 id="les-limites-des-cookies" tabindex="-1">Les limites des Cookies <a class="header-anchor" href="#les-limites-des-cookies" aria-label="Permalink to &quot;Les limites des Cookies&quot;">â€‹</a></h2><p>Comme vu en cours, avez-vous essayÃ© de modifier la valeur du Cookie ? Si ce n&#39;est pas le cas, je vous invite Ã  le faire. Pour Ã§a, vous pouvez utiliser l&#39;outil de dÃ©veloppement de votre navigateur (F12) et aller dans l&#39;onglet Â« Application Â».</p><p>Ã€ votre avis, quels sont les risques de l&#39;utilisation des Cookies (sans filtrage) ?</p><h2 id="cookie-ou-session" tabindex="-1">Cookie ou Session ? <a class="header-anchor" href="#cookie-ou-session" aria-label="Permalink to &quot;Cookie ou Session ?&quot;">â€‹</a></h2><p>Libre Ã  vous de choisir Cookie ou Session. Cependant, n&#39;oubliez pas que les Cookies sont dÃ©posÃ©s sur le poste Utilisateur et sont donc modifiables.</p><ul><li><strong>Les Cookies</strong>, sont utiles par exemple pour rendre persistantes sur une longue durÃ©e les donnÃ©es de personnalisation d&#39;une page.</li><li><strong>Les Sessions</strong> sont utiles pour sauvegarder <strong>sur le serveur</strong> et <strong>temporairement</strong> des informations de vies de votre site Internet (exemple l&#39;authentification, les donnÃ©es saisies dans un formulaire, etc.).</li></ul><h2 id="la-suite" tabindex="-1">La suiteâ€¦ <a class="header-anchor" href="#la-suite" aria-label="Permalink to &quot;La suiteâ€¦&quot;">â€‹</a></h2><p>La SESSION ou les Cookies servent pour diffÃ©rentes choses sur Internet. La persistance des donnÃ©es peut servir Ã  du tracking (vous le savezâ€¦), mais Ã©galement pour gÃ©rer une authentification client. Dans nos dÃ©veloppements la SESSION et les Cookies nous serviront principalement pour garder une trace de l&#39;utilisateur afin de le reconnaitre quand celui-ci navigue de page en page sur votre site Internet.</p><p>Pour la suite, <a href="./tp5.html">TP 5, protÃ©ger des pages Ã  l&#39;aide de la session</a></p>`,60),r=[t];function p(o,h,d,u,k,c){return i(),e("div",null,r)}const v=s(l,[["render",p]]);export{g as __pageData,v as default};
