import{_ as e,a as t,b as s}from"./chunks/settings.Dklhv7k8.js";import{_ as i,c as a,o,U as r}from"./chunks/framework.aGaNZw_P.js";const n="/assets/vue-init.DfPxlAKW.png",l="/assets/github.DPmyhb5M.png",u="/assets/step1.rubDZjwj.png",p="/assets/step2.B64JpWtr.png",c="/assets/step3.Bu7sdeXf.png",d="/assets/build.C5A3fBom.png",m="/assets/deploy_log.r91Ki-2t.png",P=JSON.parse('{"title":"Build, Deploy avec Netlify","description":"Dans ce document nous allons voir comment déployer une application simplement dans « le cloud » avec la plateforme Netlify.","frontmatter":{"description":"Dans ce document nous allons voir comment déployer une application simplement dans « le cloud » avec la plateforme Netlify."},"headers":[],"relativePath":"tp/ci/jamstack/netlify.md","filePath":"tp/ci/jamstack/netlify.md","lastUpdated":1640899309000}'),v={name:"tp/ci/jamstack/netlify.md"},h=r('<h1 id="build-deploy-avec-netlify" tabindex="-1">Build, Deploy avec Netlify <a class="header-anchor" href="#build-deploy-avec-netlify" aria-label="Permalink to &quot;Build, Deploy avec Netlify&quot;">​</a></h1><p>Dans ce document nous allons voir comment déployer une application simplement dans « le cloud » avec la plateforme Netlify.</p><h2 id="introduction" tabindex="-1">Introduction <a class="header-anchor" href="#introduction" aria-label="Permalink to &quot;Introduction&quot;">​</a></h2><p>Netlify est une plateforme gérant l&#39;ensemble des problématiques de déploiement, mais également d&#39;intégration continue pour que vous puisiez vous concentrer dans ce qui <strong>vous intéresse</strong> le développement de votre site Internet.</p><p>La solution de Netlify est intéressante, car elle nous permet entre autres de :</p><ul><li>Remplacer votre serveur.</li><li>Intégration continue (CI).</li><li>Déploiement continu (CD).</li><li>Intercepter les formulaires pour envoyer des emails sans rien coder.</li></ul><p>Et le tout vous allez le voir très très simplement (et en grande partie gratuitement)</p><h2 id="principe-de-fonctionnement" tabindex="-1">Principe de fonctionnement <a class="header-anchor" href="#principe-de-fonctionnement" aria-label="Permalink to &quot;Principe de fonctionnement&quot;">​</a></h2><p>NetLify est une solution qui repose entièrement sur votre Workflow de travail GIT (vous pouvez passer par une archive ZIP, mais ça n&#39;aurait aucun sens).</p><p>Nous allons donc :</p><ul><li>Connecter Github / Gitlab.</li><li>Choisir le projet.</li><li>Configurer le projet (branche, formulaire, script de déploiement)</li></ul><p>Vous allez le voir, la solution vous guidera pour que vous connectiez simplement votre projet Git et Netlify.</p><div class="danger custom-block"><p class="custom-block-title">Trop beau pour être vrai ?</p><p>C&#39;est magique, ça semble parfait non ? Si c&#39;est magique … C&#39;est qu&#39;il y a un truc ! Le truc ici c&#39;est que Netlify est compatible uniquement avec des sites pensés jamStack.</p></div><h3 id="jamstack" tabindex="-1">JamStack ? <a class="header-anchor" href="#jamstack" aria-label="Permalink to &quot;JamStack ?&quot;">​</a></h3><p>La jamstack c&#39;est une nouvelle façon de voir la conception de site Internet, cette nouvelle façon de faire va nous permettre de réduire les couts d&#39;hébergements / et bénéficier de l&#39;avantage du Cloud (CI/CD, compression des assets, FAAS…)</p><p>Plein de mots qui font peur, mais ne vous inquiétez pas… C&#39;est beaucoup plus simple qu&#39;il n&#39;y parait. Ici pas de PHP pour générer vos pages nous allons tout concevoir en HTML / JavaScript (VanillaJS, React, Vue, …) / CSS</p><p><img src="'+e+'" alt="JamStack" loading="lazy"></p><p><strong>JavaScript</strong> Les fonctionnalités dynamiques sont gérées par JavaScript. Vous êtes libres d’utiliser la bibliothèque ou le framework que vous voulez.</p><p><strong>APIs</strong> Les opérations côté serveur sont abstraites sous forme d’APIs réutilisables, accessibles en HTTPS à l’aide de JavaScript. Ces opérations peuvent être déléguées à des services tiers ou bien à vos propres fonctions. C&#39;est ce que l&#39;on appelle souvent FAAS (Function As A Service)</p><p><strong>Markup</strong> Les sites web sont servis sous forme de fichiers HTML statiques. Ses fichiers peuvent être générés à partir de fichiers source (Markdown, générateur de site, ou simplement avec du HTML à l&#39;ancienne).</p><div class="danger custom-block"><p class="custom-block-title">Est-ce la meilleure façon ?</p><p>C&#39;est à la mode oui… Mais est-ce la meilleure façon ? Je ne sais pas. Sachez juste que pour l&#39;instant c&#39;est un standard et que beaucoup l&#39;utilise.</p><p><strong>Il faut donc le connaitre / le maitriser.</strong></p></div><p><a href="https://jamstack.wtf/" target="_blank" rel="noreferrer">Plus d&#39;information sur la JamStack</a></p><h2 id="deployer-un-site" tabindex="-1">Déployer un site <a class="header-anchor" href="#deployer-un-site" aria-label="Permalink to &quot;Déployer un site&quot;">​</a></h2><p>Nous allons donc déployer un site « pour tester Netlify », si vous n&#39;avez pas de site static sous la main je vous propose d&#39;en créer un rapidement avec <a href="https://vitejs.dev/" target="_blank" rel="noreferrer">ViteJS</a></p><div class="language-sh vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> init</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> @vitejs/app</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="'+n+'" alt="Vue Init" loading="lazy"></p><p>Cette commande va nous créer un projet « générique » que nous pourrons déployer sur Netlify en quelques minutes. Vous allez voir… C&#39;est magique !</p><div class="danger custom-block"><p class="custom-block-title">Un instant</p><p>⚠️ Avant d&#39;aller plus loin je vous laisse tester ce que vous aller déployer.</p></div><h3 id="creer-le-site-sur-github-gitlab" tabindex="-1">Créer le site sur Github / Gitlab <a class="header-anchor" href="#creer-le-site-sur-github-gitlab" aria-label="Permalink to &quot;Créer le site sur Github / Gitlab&quot;">​</a></h3><p>Nous allons utiliser à 100% le principe de CI / CD, nous allons donc mettre en place notre projet sur Github / Gitlab pour que celui-ci puisse être « watch » par Netlify.</p><p><img src="'+t+'" alt="Integration continue" loading="lazy"></p><div class="tip custom-block"><p class="custom-block-title">Github ?</p><p>Dans la suite des exemples je vais utiliser Github, mais le fonctionnement est <strong>identique</strong> si vous décidez d&#39;utiliser GitLab.</p></div><p>Je vous laisse créer votre projet sur Github / Gitlab. Je pense que vous l&#39;avez déjà fait plusieurs fois. Si ce n&#39;est pas le cas, n&#39;hésitez pas à me solliciter.</p><p><img src="'+l+'" alt="Github" loading="lazy"></p><h3 id="connecter-github-gitlab-a-netlify" tabindex="-1">Connecter Github / Gitlab à Netlify <a class="header-anchor" href="#connecter-github-gitlab-a-netlify" aria-label="Permalink to &quot;Connecter Github / Gitlab à Netlify&quot;">​</a></h3><p>Maintenant que nous avons un projet sur Github / Gitlab, nous allons connecter la plateforme Netlify à votre code. Celle-ci prendra en charge <strong>automatiquement</strong> tout le processus de compilation de votre projet.</p><p>Concrètement qu&#39;est-ce que ça veut dire ? Lors d&#39;une modification de votre code source, Netlify va se déclencher et lancer « une machine » qui :</p><ul><li>Clonera la nouvelle version de votre site web.</li><li>Va installer les dépendances de votre projet.</li><li>Testera votre projet si vous avez des tests.</li><li>Lancera le script de « build ».</li><li>Sauvegardera dans leur CDN le résultat de la compilation.</li><li>… (et bien plus si vous avez activé d&#39;autres options).</li></ul><p>Nous allons donc suivre la configuration « ultra simple » de Netlify</p><p><img src="'+u+'" alt="Step 1" loading="lazy"><img src="'+p+'" alt="Step 2" loading="lazy"><img src="'+c+'" alt="Step 3" loading="lazy"></p><div class="tip custom-block"><p class="custom-block-title">Ici rien de bien compliqué</p><p>La seule partie « vraiment intéressante », c&#39;est la partie Build Settings. Nous avons ici les deux paramètres importants de notre flow CI/CD à savoir :</p><ul><li>La commande qui va compiler votre site.</li><li>Le dossier qui contiendra le résultat.</li></ul></div><h3 id="compilation-build" tabindex="-1">Compilation &amp; Build <a class="header-anchor" href="#compilation-build" aria-label="Permalink to &quot;Compilation &amp; Build&quot;">​</a></h3><p>Et voilà ! Votre site est en cours de compilation… Dans quelques instants vous aurez déployé sur Internet un site complètement fonctionnel.</p><p><img src="'+d+'" alt="Step 3" loading="lazy"></p><div class="danger custom-block"><p class="custom-block-title">Un peu de curiosité</p><p>Je vous laisse regarder ce que fait Netlify pendant le build notamment le Deploy Log.</p><p><img src="'+m+'" alt="Step 3" loading="lazy"></p></div><p>Le site est <a href="https://607e90d957d531e74a211201--loving-hodgkin-09f331.netlify.app/" target="_blank" rel="noreferrer">maintenant en ligne voici le mien par exemple</a></p><h3 id="apporter-des-modifications" tabindex="-1">Apporter des modifications <a class="header-anchor" href="#apporter-des-modifications" aria-label="Permalink to &quot;Apporter des modifications&quot;">​</a></h3><p>Je vous laisse modifier votre site Internet. Si vous avez correctement configuré votre stack applicatif, vous devriez normalement déclencher une recompilation de votre site web.</p><p>C&#39;est à vous.</p><h3 id="parametrage" tabindex="-1">Paramètrage <a class="header-anchor" href="#parametrage" aria-label="Permalink to &quot;Paramètrage&quot;">​</a></h3><p>Mais Netlify c&#39;est pas uniquement un simple CDN qui compile automatiquement vos sources ! C&#39;est aussi tout un tas d&#39;options permettant d&#39;optimiser votre site.</p><p><img src="'+s+'" alt="Settings" loading="lazy"></p><p>Ces règles sont nommées PostProcessing sur Netlify. Ne vous y trompez pas, les règles en question ne sont que des outils préparamètres pour vous faire gagner du temps. Si vous le souhaitez, il est complètement possible de faire la même chose avec des solutions comme Gitlab-CI.</p><p>Nous allons faire le tour ensemble des options. Je vous attends.</p><h3 id="aller-plus-loin" tabindex="-1">Aller plus loin <a class="header-anchor" href="#aller-plus-loin" aria-label="Permalink to &quot;Aller plus loin&quot;">​</a></h3><p>Nous avons vu la base regardons ce que nous allons pouvoir faire très simplement avec Netlify.</p><h4 id="le-prerendering" tabindex="-1">Le prérendering <a class="header-anchor" href="#le-prerendering" aria-label="Permalink to &quot;Le prérendering&quot;">​</a></h4><p>Nous avons ici un site complètement en JavaScript, pas idéal pour le référencement, pour le partage sur les Réseaux sociaux, etc. Nous allons pouvoir dire à Netlify de pré-render le site sur « leur serveur » pour que les robots des moteurs de recherche obtiennent une version HTML classique.</p><p>Cette problématique est relativement complexe à mettre en place en temps normal ! Avec Netlify vous allez voir c&#39;est très très simple.</p><h4 id="les-formulaires" tabindex="-1">Les formulaires <a class="header-anchor" href="#les-formulaires" aria-label="Permalink to &quot;Les formulaires&quot;">​</a></h4><p>Notre site est static oui… Donc exit le traitement serveur vous me direz ? Et bien pas vraiment… Souvent sur un site Internet ce que nous avons besoin c&#39;est « juste » d&#39;un envoi d&#39;email.</p><p>Et bien avec Netlify c&#39;est possible ! Et c&#39;est très simple ! Nous allons le configurer ensemble et tester.</p><ul><li>Ajouter un formulaire dans notre site Internet.</li><li>Activation de l&#39;option et mise en place de notification</li></ul><h4 id="les-branches" tabindex="-1">Les branches <a class="header-anchor" href="#les-branches" aria-label="Permalink to &quot;Les branches&quot;">​</a></h4><p>Tester en prod personne n&#39;aime ça… Pourtant vous pourriez vouloir montrer à votre client / collègue votre travail sans forcément le montrer sur votre ordinateur. Avec Netlify c&#39;est possible. Nous allons le configurer sur votre projet.</p><h4 id="la-compression-des-assets" tabindex="-1">La compression des ASSETS <a class="header-anchor" href="#la-compression-des-assets" aria-label="Permalink to &quot;La compression des ASSETS&quot;">​</a></h4><p>Des images trop lourdes ? Un CSS non compressé ? Des fichiers non minifiés ? Aucun problème regardons comment répondre à cette problématique.</p>',67),b=[h];function f(g,q,y,k,_,C){return o(),a("div",null,b)}const z=i(v,[["render",f]]);export{P as __pageData,z as default};
