import{_ as e,a as t,b as s}from"./chunks/settings.Dklhv7k8.js";import{_ as i,c as a,o,U as r}from"./chunks/framework.aGaNZw_P.js";const l="/assets/workfow_git.DeZk0AM0.png",n="/assets/netlify-vuepress.D7DKcbTd.png",p="/assets/vuepress-exemple.AZnOqqA8.png",u="/assets/github-portfolio.D0KATfPF.png",c="/assets/step1-portfolio.Rcgwv_Z2.png",d="/assets/step2-portfolio.CsGBalAq.png",m="/assets/step3-portfolio.DcVItA48.png",v="/assets/step4-portfolio.CSsvtHdm.png",f="/assets/step5-portfolio.C1G_O73Y.png",h="/assets/step6-portfolio-logs.Bap5ZPT4.png",b="/assets/portfolio-preview.CY22hg4B.png",A=JSON.parse('{"title":"Déployer votre portfolio avec Netlify","description":"Dans ce document nous allons voir comment déployer votre portfolio simplement dans « le cloud » avec la plateforme Netlify / Vercel.","frontmatter":{"description":"Dans ce document nous allons voir comment déployer votre portfolio simplement dans « le cloud » avec la plateforme Netlify / Vercel.","next":"../pages-portfolio.md"},"headers":[],"relativePath":"tp/ci/jamstack/netlify-portfolio.md","filePath":"tp/ci/jamstack/netlify-portfolio.md","lastUpdated":1675343940000}'),g={name:"tp/ci/jamstack/netlify-portfolio.md"},q=r('<h1 id="deployer-votre-portfolio-avec-netlify" tabindex="-1">Déployer votre portfolio avec Netlify <a class="header-anchor" href="#deployer-votre-portfolio-avec-netlify" aria-label="Permalink to &quot;Déployer votre portfolio avec Netlify&quot;">​</a></h1><p>Dans ce document nous allons voir comment déployer votre portfolio simplement dans « le cloud » avec la plateforme <a href="https://www.netlify.com" target="_blank" rel="noreferrer">Netlify</a>.</p><details class="details custom-block"><summary>Sommaires</summary><nav class="table-of-contents"><ul><li><a href="#introduction">Introduction</a></li><li><a href="#principe-de-fonctionnement">Principe de fonctionnement</a><ul><li><a href="#jamstack">JamStack ?</a></li></ul></li><li><a href="#deployer-votre-portfolio">Déployer votre portfolio</a><ul><li><a href="#creer-le-site-sur-github-gitlab">Créer le site sur Github / Gitlab</a></li><li><a href="#connecter-github-gitlab-a-netlify">Connecter Github / Gitlab à Netlify</a></li><li><a href="#compilation-build">Compilation &amp; Build</a></li><li><a href="#apporter-des-modifications">Apporter des modifications</a></li><li><a href="#parametrage">Paramétrage</a></li><li><a href="#aller-plus-loin">Aller plus loin</a></li></ul></li></ul></nav></details><h2 id="introduction" tabindex="-1">Introduction <a class="header-anchor" href="#introduction" aria-label="Permalink to &quot;Introduction&quot;">​</a></h2><p>Netlify est une plateforme gérant l&#39;ensemble des problématiques de déploiement, mais également d&#39;intégration continue pour que vous puisiez vous concentrer dans ce qui <strong>vous intéresse</strong> le développement de votre site Internet.</p><p>La solution de Netlify est intéressante, car elle nous permet entre autres de :</p><ul><li>Remplacer votre serveur.</li><li>Intégration continue (CI).</li><li>Déploiement continu (CD).</li><li>Intercepter les formulaires pour envoyer des emails sans devoir ajouter du PHP.</li></ul><p>Et le tout vous allez le voir très très simplement (et en grande partie gratuitement)</p><h2 id="principe-de-fonctionnement" tabindex="-1">Principe de fonctionnement <a class="header-anchor" href="#principe-de-fonctionnement" aria-label="Permalink to &quot;Principe de fonctionnement&quot;">​</a></h2><p>NetLify est une solution qui repose entièrement sur votre Workflow de travail GIT (vous pouvez passer par une archive ZIP, mais ça n&#39;aurait aucun sens).</p><p><img src="'+l+'" alt="Workflow GIT" loading="lazy"></p><p>Nous allons donc :</p><ul><li>Connecter Github / Gitlab.</li><li>Choisir le projet.</li><li>Configurer le projet (branche, formulaire, script de déploiement)</li></ul><p>Vous allez le voir, la solution vous guidera pour que vous connectiez simplement votre projet Git et Netlify.</p><div class="danger custom-block"><p class="custom-block-title">Trop beau pour être vrai ?</p><p>C&#39;est magique, ça semble parfait, non ? Si c&#39;est magique … C&#39;est qu&#39;il y a un truc ! Le truc ici c&#39;est que Netlify est compatible uniquement avec des sites pensés jamStack.</p></div><h3 id="jamstack" tabindex="-1">JamStack ? <a class="header-anchor" href="#jamstack" aria-label="Permalink to &quot;JamStack ?&quot;">​</a></h3><p>La JamStack c&#39;est une nouvelle façon de voir la conception de site Internet, cette nouvelle façon de faire va nous permettre de réduire les couts d&#39;hébergements / et bénéficier de l&#39;avantage du Cloud (CI/CD, compression des ressources graphiques également nommées ASSETS, FAAS…)</p><p>Plein de mots qui font peur, mais ne vous inquiétez pas… C&#39;est beaucoup plus simple qu&#39;il n&#39;y parait. Ici pas de PHP pour générer vos pages nous allons tout concevoir en HTML / JavaScript (VanillaJS, React, Vue, …) / CSS</p><p><img src="'+e+'" alt="JamStack" loading="lazy"></p><p><strong>JavaScript</strong> Les fonctionnalités dynamiques sont gérées par JavaScript. Vous êtes libres d’utiliser la bibliothèque ou le framework que vous voulez.</p><p><strong>APIs</strong> Les opérations côté serveur sont abstraites sous forme d’APIs réutilisables, accessibles en HTTPS à l’aide de JavaScript. Ces opérations peuvent être déléguées à des services tiers ou bien à vos propres fonctions. C&#39;est ce que l&#39;on appelle souvent FAAS (Function As A Service)</p><p><strong>Markup</strong> Les sites web sont servis sous forme de fichiers HTML statiques. Ses fichiers peuvent être générés à partir de fichiers sources (Markdown, générateur de sites, ou simplement avec du HTML à l&#39;ancienne).</p><div class="danger custom-block"><p class="custom-block-title">Est-ce la meilleure façon ?</p><p>C&#39;est à la mode, oui… Mais est-ce la meilleure façon ? Je ne sais pas. Sachez juste que pour l&#39;instant c&#39;est un standard et que beaucoup l&#39;utilisent.</p><p><strong>Il faut donc le connaitre / le maitriser.</strong></p></div><p><a href="https://jamstack.wtf/" target="_blank" rel="noreferrer">Plus d&#39;information sur la JamStack</a></p><div class="tip custom-block"><p class="custom-block-title">Votre portfolio est-il JamStack ?</p><p>C&#39;est une bonne question, non ? À votre avis ? Parlons-en !</p></div><h2 id="deployer-votre-portfolio" tabindex="-1">Déployer votre portfolio <a class="header-anchor" href="#deployer-votre-portfolio" aria-label="Permalink to &quot;Déployer votre portfolio&quot;">​</a></h2><p>L&#39;objectif ici est de rendre votre portfolio accessible sur Internet grâce au cloud. Dans un premier temps, nous allons donc devoir partager votre Portfolio sur Github / Gitlab.</p><p>Avant de continuer, nous allons tester en local votre portfolio afin de vérifier que tout fonctionne comme attendu.</p><details class="details custom-block"><summary>Vous n&#39;avez pas de site ?</summary><p>Vous devez avoir un portfolio pour l&#39;examen, mais si vous n&#39;avez pour l&#39;instant rien de disponible, il est tout à fait possible de continuer le TP. Pour ça je vous propose d&#39;utiliser autre chose !</p><p>Vous utilisez depuis le début d&#39;année mon site, mon site est <strong>un site de type JamStack</strong> il utilise VueJS et pour écrire les pages je ne fais pas de HTML j&#39;écris du Markdown.</p><p>Je n&#39;ai rien inventé. J&#39;utilise un outil qui s&#39;appelle <a href="https://vuepress.vuejs.org/" target="_blank" rel="noreferrer">VuePress</a>, VuePress est un générateur de site statique, c&#39;est-à-dire un site qui ne sera pas différent à chaque chargement de page. Il est possible d&#39;utiliser VuePress dans beaucoup d&#39;usages différents :</p><ul><li>De la documentation.</li><li>Un Blog</li><li>Un portfolio (<a href="https://github.com/forestryio/portfolio-vuepress" target="_blank" rel="noreferrer">exemple</a>)</li><li>Et via les thèmes vous pouvez tout imaginer (<a href="https://github.com/vuepress/awesome-vuepress#community-themes" target="_blank" rel="noreferrer">exemple</a>)</li></ul><div class="language-sh vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npx</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> create-vuepress-site</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="'+n+`" alt="VuePress Init" loading="lazy"></p><p>Cette commande va nous créer un projet « vide » que nous pourrons déployer sur Netlify en quelques minutes. Vous allez voir… C&#39;est magique !</p><p>⚠️ Avant d&#39;aller plus loin, je vous laisse tester ce que vous allez déployer avec :</p><div class="language-sh vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> docs</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dev</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>Vous devriez avoir :</p><p><img src="`+p+'" alt="VuePress exemple" loading="lazy"></p></details><h3 id="creer-le-site-sur-github-gitlab" tabindex="-1">Créer le site sur Github / Gitlab <a class="header-anchor" href="#creer-le-site-sur-github-gitlab" aria-label="Permalink to &quot;Créer le site sur Github / Gitlab&quot;">​</a></h3><p>Nous allons utiliser à 100% le principe de CI / CD, nous allons donc mettre en place notre projet sur Github / Gitlab pour que celui-ci puisse être « observer » (<em>watch</em> en anglais) par Netlify.</p><p><img src="'+t+'" alt="Intégration continue" loading="lazy"></p><div class="tip custom-block"><p class="custom-block-title">Github ?</p><p>Dans la suite des exemples je vais utiliser Github, mais le fonctionnement est <strong>identique</strong> si vous décidez d&#39;utiliser GitLab.</p></div><p>Je vous laisse créer votre projet sur Github / Gitlab. Je pense que vous l&#39;avez déjà fait plusieurs fois. Si ce n&#39;est pas le cas, n&#39;hésitez pas à me solliciter.</p><p><img src="'+u+'" alt="Github" loading="lazy"></p><div class="danger custom-block"><p class="custom-block-title">Privé ou Public ?</p><p>Ici vous avez le choix… Cependant je pense que pour l&#39;instant il est peut-être plus raisonnable de mettre votre projet en privé. Pourquoi ? Github / Gitlab est un peu votre vitrine, ce que vous y déposez sera regardé lors d&#39;un recrutement, attention donc…</p></div><h3 id="connecter-github-gitlab-a-netlify" tabindex="-1">Connecter Github / Gitlab à Netlify <a class="header-anchor" href="#connecter-github-gitlab-a-netlify" aria-label="Permalink to &quot;Connecter Github / Gitlab à Netlify&quot;">​</a></h3><p>Maintenant que nous avons un projet sur Github / Gitlab, nous allons connecter la plateforme Netlify à votre code. Celle-ci prendra en charge <strong>automatiquement</strong> tout le processus de compilation de votre projet.</p><p>Concrètement, qu&#39;est-ce que ça veut dire ? Lors d&#39;une modification de votre code source, Netlify va se déclencher et lancer « une machine » qui :</p><ul><li>Clonera la nouvelle version de votre site web.</li><li>Va installer les dépendances de votre projet.</li><li>Testera votre projet si vous avez des tests.</li><li>Lancera le script de « build ».</li><li>Sauvegardera dans leur CDN le résultat de la compilation.</li><li>… (et bien plus si vous avez activé d&#39;autres options).</li></ul><p>Nous allons donc suivre la configuration « ultra simple » de Netlify</p><p><img src="'+c+'" alt="Step 1" loading="lazy"><img src="'+d+'" alt="Step 2" loading="lazy"><img src="'+m+'" alt="Step 3" loading="lazy"><img src="'+v+'" alt="Step 4" loading="lazy"></p><div class="tip custom-block"><p class="custom-block-title">Ici rien de bien compliqué</p><p>La seule partie « vraiment intéressante », c&#39;est la partie Build Settings. Pourquoi n&#39;avons-nous rien spécifié pour :</p><ul><li>Build</li><li>Publish directory</li></ul><p>Pourquoi ceux qui utilisent VuePress ont-ils quelque chose ?</p></div><h3 id="compilation-build" tabindex="-1">Compilation &amp; Build <a class="header-anchor" href="#compilation-build" aria-label="Permalink to &quot;Compilation &amp; Build&quot;">​</a></h3><p>Et voilà ! Votre site est en cours de compilation… Dans quelques instants vous aurez déployé sur Internet un site complètement fonctionnel.</p><p><img src="'+f+'" alt="Step 5" loading="lazy"></p><div class="danger custom-block"><p class="custom-block-title">Un peu de curiosité</p><p>Je vous laisse regarder ce que fait Netlify pendant le build notamment le Deploy Log.</p><p><img src="'+h+'" alt="Step 6" loading="lazy"></p></div><p>Le site est <a href="https://pedantic-leakey-407680.netlify.app/" target="_blank" rel="noreferrer">maintenant en ligne voici le mien par exemple</a></p><h3 id="apporter-des-modifications" tabindex="-1">Apporter des modifications <a class="header-anchor" href="#apporter-des-modifications" aria-label="Permalink to &quot;Apporter des modifications&quot;">​</a></h3><p>Je vous laisse modifier votre portfolio. Si vous avez correctement configuré votre stack applicatif, vous devriez normalement déclencher une recompilation de votre site web.</p><p>C&#39;est à vous.</p><p>PS: N&#39;oubliez pas de commiter et pusher.</p><h3 id="parametrage" tabindex="-1">Paramétrage <a class="header-anchor" href="#parametrage" aria-label="Permalink to &quot;Paramétrage&quot;">​</a></h3><p>Mais Netlify c&#39;est pas uniquement un simple CDN qui compile automatiquement vos sources ! C&#39;est aussi tout un tas d&#39;options permettant d&#39;optimiser votre site.</p><p><img src="'+s+'" alt="Settings" loading="lazy"></p><p>Ces règles sont nommées PostProcessing sur Netlify. Ne vous y trompez pas, les règles en question ne sont que des outils préparamètrés pour vous faire gagner du temps. Si vous le souhaitez, il est complètement possible de faire la même chose avec des solutions comme Gitlab-CI.</p><p>Nous allons faire le tour ensemble des options. Je vous attends.</p><h3 id="aller-plus-loin" tabindex="-1">Aller plus loin <a class="header-anchor" href="#aller-plus-loin" aria-label="Permalink to &quot;Aller plus loin&quot;">​</a></h3><p>Nous avons vu la base, regardons ce que nous allons pouvoir faire très simplement avec Netlify.</p><h4 id="les-branches" tabindex="-1">Les branches <a class="header-anchor" href="#les-branches" aria-label="Permalink to &quot;Les branches&quot;">​</a></h4><p>Tester en production, personne n&#39;aime ça… Pourtant vous pourriez vouloir montrer à votre client / collègue votre travail sans forcément le montrer sur votre ordinateur. Avec Netlify c&#39;est possible :</p><p>Dans les paramètres de votre projet, vérifiez que les options suivantes sont actives :</p><p><img src="'+b+'" alt="Preview" loading="lazy"></p><p>À partir de maintenant, si vous créez une branche dans votre projet Git, une version de <code>prévisualisation</code> sera créée pour tester en temps réel votre modification.</p><ul><li>Créer une branche.</li><li>Apporter une modification.</li><li>Vérifier que Netlify a bien créé un sous-domaine permettant de valider votre modification.</li></ul><div class="tip custom-block"><p class="custom-block-title">Un instant !</p><ul><li>À votre avis quel est l&#39;intérêt ?</li><li>Pourquoi est-ce intéressant dans le cadre de la méthode agile ?</li></ul></div><h4 id="les-formulaires" tabindex="-1">Les formulaires <a class="header-anchor" href="#les-formulaires" aria-label="Permalink to &quot;Les formulaires&quot;">​</a></h4><p>Notre site est statique, oui… Donc exit le traitement serveur vous me direz ? Et bien pas vraiment… Souvent sur un site Internet ce que nous avons besoin c&#39;est « juste » d&#39;un envoi d&#39;email.</p><p>Et bien avec Netlify c&#39;est possible ! Et c&#39;est très simple ! La procédure sera la suivante :</p><ul><li>Ajouter un formulaire dans notre site Internet.</li><li>Activation de l&#39;option et mise en place de notification</li></ul><p>La documentation explique très bien la procédure : <a href="https://docs.netlify.com/forms/setup/#html-forms" target="_blank" rel="noreferrer">consulter la documentation</a></p><h4 id="la-compression-des-assets" tabindex="-1">La compression des ASSETS <a class="header-anchor" href="#la-compression-des-assets" aria-label="Permalink to &quot;La compression des ASSETS&quot;">​</a></h4><p>Des images trop lourdes ? Un CSS non compressé ? Des fichiers non minifiés ? Aucun problème, regardons comment répondre à cette problématique.</p><h4 id="des-alternatives" tabindex="-1">Des alternatives <a class="header-anchor" href="#des-alternatives" aria-label="Permalink to &quot;Des alternatives&quot;">​</a></h4><p>Netlify n&#39;est pas la seule solution pour mettre en ligne simplement un site web statique. Avant de passer à Gitlab Pages, je vous propose de regarder d&#39;autres solutions comme par exemple :</p><ul><li><a href="https://surge.sh/" target="_blank" rel="noreferrer">Surge</a></li><li><a href="https://vercel.com/" target="_blank" rel="noreferrer">Vercel</a></li></ul><p>Vercel est une solution presque identique à Netlify. Vous pouvez donc tester dès maintenant Vercel pour voir les différences.</p><p>Surge par contre est une solution un peu différente. Elle repose sur l&#39;utilisation d&#39;un outil pour déployer votre site. Nous pouvons le faire à la main depuis notre machine, mais nous allons perdre le côté automatique.</p><p>C&#39;est pour ça que je vous propose pour continuer de tester Gitlab Pages, qui va reposer sur l&#39;utilisation de Gitlab-CI pour le déploiement. Avec Gitlab-CI, nous allons pouvoir faire beaucoup plus de choses qu&#39;avec Netlify / Vercel. Mais, pour faire cela, nous allons devoir écrire les règles et les commandes nous-mêmes.</p><h4 id="la-suite" tabindex="-1">La suite <a class="header-anchor" href="#la-suite" aria-label="Permalink to &quot;La suite&quot;">​</a></h4><p>Netlify est vraiment une solution simple et intéressante pour livrer en continu des sites web. Vous l&#39;avez vu, il est possible en quelques clics de mettre en ligne un site, cependant cette mise en ligne est très simpliste :</p><ul><li>Vous n&#39;avez que très peu la main sur les outils.</li><li>Vous ne pouvez pas faire autre chose que de la JamStack.</li></ul><p>Pour aller plus loin, je vous propose de tester Gitlab Pages qui, comme Netlify, va nous permettre de mettre en ligne votre site. Mais, cette fois-ci, vous allez voir que nous aurons la main sur l&#39;ensemble des opérations.</p><p><a href="./../pages-portfolio.html">La suite est par ici =&gt;</a></p>',84),k=[q];function y(_,P,C,S,z,N){return o(),a("div",null,k)}const V=i(g,[["render",y]]);export{A as __pageData,V as default};
