import{_ as s,a as e,b as i,c as a,d as n,e as t}from"./chunks/le_contenu.PE7MFgD4.js";import{_ as l,c as r,o as p,U as d}from"./chunks/framework.aGaNZw_P.js";const o="/assets/server_bdd.D1nShcBy.png",h="/assets/exemple_MLD.DS0HBqlW.png",u="/assets/pagination.DgyK4rq4.png",k="/assets/sql_join.B2TeAuPH.png",f=JSON.parse('{"title":"Complément Cours Base de données","description":"","frontmatter":{},"headers":[],"relativePath":"tp/php/sql/support.md","filePath":"tp/php/sql/support.md","lastUpdated":1619182110000}'),c={name:"tp/php/sql/support.md"},g=d('<h1 id="complement-cours-base-de-donnees" tabindex="-1">Complément Cours Base de données <a class="header-anchor" href="#complement-cours-base-de-donnees" aria-label="Permalink to &quot;Complément Cours Base de données&quot;">​</a></h1><p>Nous allons maintenant voir la base de données via le PHP. La base de données est un élément important des systèmes d&#39;information moderne.</p><details class="details custom-block"><summary>Table des matières</summary><nav class="table-of-contents"><ul><li><a href="#introduction">Introduction</a></li><li><a href="#php-et-les-base-de-donnees">PHP et les base de données</a></li><li><a href="#le-langage-sql">Le langage SQL</a></li><li><a href="#modeliser-la-base-de-donnees">Modéliser la base de données</a></li><li><a href="#les-contraintes">Les Contraintes</a></li><li><a href="#les-cardinalites">Les cardinalités</a></li><li><a href="#cles-etrangere-et-comportement">Clés étrangère et comportement</a></li><li><a href="#phpmyadmin">PHPMyAdmin</a></li><li><a href="#sql-le-langage-de-requetage">SQL : Le langage de requêtage</a></li><li><a href="#obtenir-des-donnees">Obtenir des données</a><ul><li><a href="#gerer-de-la-pagination">Gérer de la pagination</a></li><li><a href="#ordre-de-recuperation">Ordre de récupération</a></li><li><a href="#obtenir-de-donnees-de-plusieurs-tables">Obtenir de données de plusieurs tables</a></li></ul></li><li><a href="#ajouter-des-donnees">Ajouter des données</a></li><li><a href="#modifier-des-donnees">Modifier des données</a></li><li><a href="#supprimer-une-donnee">Supprimer une donnée</a></li><li><a href="#sql-et-php">SQL et PHP</a><ul><li><a href="#utils-db-php">utils/db.php</a></li></ul></li><li><a href="#requete-prepare-ou-requete-normal">Requête préparé ou requête normal ?</a></li><li><a href="#pratiquer">Pratiquer</a></li></ul></nav></details><div class="warning custom-block"><p class="custom-block-title">Un instant</p><p>La base de données est un vaste sujet. Nous avons ici une introduction à ce qu&#39;il faut connaitre au minimum pour avancer dans nos différents projets.</p><p><a href="/cheatsheets/sql/">Voir l&#39;aide mémoire SQL</a></p></div><h2 id="introduction" tabindex="-1">Introduction <a class="header-anchor" href="#introduction" aria-label="Permalink to &quot;Introduction&quot;">​</a></h2><p>Une base de données va être en charge de sauvegarder et d&#39;organiser les données pour qu&#39;il soit utilisable. Nous avons actuellement deux types de bases de données :</p><ul><li>Relationnelle</li><li>Non Relationnelle</li></ul><p>Les bases de données relationnelles, est celle que l&#39;on rencontre pour l&#39;instant le plus, mais ça change petit à petit et vous rencontrerez très certainement (et très rapidement des BDD non relationnelles).</p><p>Pour faire simple, une base de données « Relationnelle », indique que la structure et les règles de validations de vos données seront portées par votre <strong>moteur de base de données</strong>.</p><p>Une base de données non relationnelle sera plus ouverte. Elle stocke de l&#39;information sans forcément avoir de structure forte. Votre logique de données et la validation des éléments en base seront traitées par <strong>votre code</strong>.</p><p><img src="'+o+'" alt="Serveur de base de données" loading="lazy"></p><h2 id="php-et-les-base-de-donnees" tabindex="-1">PHP et les base de données <a class="header-anchor" href="#php-et-les-base-de-donnees" aria-label="Permalink to &quot;PHP et les base de données&quot;">​</a></h2><p>Dans le cours PHP, nous utiliserons des bases de données relationnelles, plus tard avec le JavaScript nous utiliserons des bases de données non relationnelles.</p><p>Il existe plusieurs systèmes de base de données (MySQL, Oracle, MariaDB, Postgresql, …). PHP est compatible avec presque tous les systèmes de base de données « connu » et ça par défaut ! Il intègre une API qui s&#39;appelle <a href="https://www.php.net/manual/fr/book.pdo.php" target="_blank" rel="noreferrer">PDO</a>, cette API est de base avec PHP, il suffit juste de l&#39;utiliser.</p><div class="tip custom-block"><p class="custom-block-title">Petite note</p><p>Après avoir longtemps « stagné » le PHP, depuis quelques années change, s&#39;adapte, se modernise. Les bonnes pratiques en PHP pour l&#39;accès aux Bases de données (BDD) ont changé pour que celle-ci soit plus sécurisée.</p><p>Les exemples que vous pourriez trouver en ligne peuvent être pour la plupart « obsolète ». Je vous conseille vivement de regarder la documentation officielle, plutôt qu&#39;une simple recherche Google.</p></div><p><img src="'+s+'" alt="PDO &amp; MYSQLi" loading="lazy"></p><p>MySQL étant intégré à XAMPP / WAMP je vais l&#39;utiliser dans la suite de mon cours. Mais rien ne vous empêche d&#39;utiliser d&#39;autre système tel que PostgreSQL.</p><h2 id="le-langage-sql" tabindex="-1">Le langage SQL <a class="header-anchor" href="#le-langage-sql" aria-label="Permalink to &quot;Le langage SQL&quot;">​</a></h2><p>Nous allons maintenant voir un gros sujet. Nous avons vu qu&#39;il était possible de stocker des données dans des bases de données. Ces entrepôts de données sont le coeur de nos programmes modernes, tous les programmes que vous allez réaliser existent toujours pour afficher, traiter, emmagasiner de l&#39;information ; cette donnée est le coeur de votre métier encore plus sur Internet.</p><p>Nous allons donc prendre un peu de temps, pour voir comment :</p><ul><li>Modéliser.</li><li>Sauvegarder.</li><li>Requêter.</li></ul><p>Nous allons donc modéliser les bases de données grâce à des MLD et nous récupèrerons / modifierons les données avec le langage SQL (le mot langage est important).</p><h2 id="modeliser-la-base-de-donnees" tabindex="-1">Modéliser la base de données <a class="header-anchor" href="#modeliser-la-base-de-donnees" aria-label="Permalink to &quot;Modéliser la base de données&quot;">​</a></h2><p>Modéliser une base de données est une étape très importante, elle fait partie intégrante de la phase de conception et <strong>elle ne doit surtout pas être négligée</strong>.</p><p>Cette étape de modélisation doit être faite avant chaque création d&#39;une base de données, mais également lors de la modification de celle-ci, je pense qu&#39;il est intéressant de faire ça en dehors d&#39;un ordinateur avec une simple feuille de papier; vous pouvez bien évidemment utiliser un outil en ligne pour créer votre modélisation.</p><p>Cette modélisation s&#39;appelle un <strong>MLD</strong> (Modèle Conceptuel de Données), ce MLD va regrouper l&#39;ensemble de la structure de notre base de données (nom des tables, nom des colonnes, types de données), mais également les contraintes <strong>relationnelles</strong>, c&#39;est-à-dire les contraintes entre les tables (nombre maximum, jointures, etc.)</p><p>Pour réaliser le MLD nous avons plusieurs solutions :</p><ul><li>Avec un papier et un crayon.</li><li><a href="https://dbdiagram.io/home" target="_blank" rel="noreferrer">DBDiagram</a></li><li><a href="http://draw.io/" target="_blank" rel="noreferrer">draw.io</a></li></ul><p>Avant d&#39;aller plus loin, nous allons modéliser ensemble une première base de données très simple. Cette base de données sera la suivante :</p><ul><li>Des Utilisateurs (Identifiant, Nom, Prénom, Date de naissance, Sexe, Code Pays).</li><li>Des pays (Code Pays, Nom)</li></ul><p>Un MLD repose toujours sur le même principe, c&#39;est un ensemble de « rectangle » relié ensemble par des traits.</p><table><thead><tr><th>Table</th></tr></thead><tbody><tr><td><u>#idTable (int)</u></td></tr><tr><td>nom (varchar)</td></tr><tr><td>prénom (varchar)</td></tr></tbody></table><p><em>Nous avons donc :</em></p><ul><li>Un rectangle.</li><li>En titre le nom de la table.</li><li>En dessous la liste des champs avec le type de la donnée. <ul><li>L&#39;élément souligné est une clé (également préfixé par un <code>#</code>)</li></ul></li></ul><div class="tip custom-block"><p class="custom-block-title">Une clé ?</p><p>Une clé ou un identifiant sont une colonne que l&#39;on va « marquer » comme étant particulière. Cette colonne va être utilisée par le moteur de base de données pour :</p><ul><li>Obligatoire.</li><li>Représente une valeur unique dans la base.</li><li>Effectuer des opérations sur la table (UPDATE, DELETE, …).</li><li>Permettre la jointure entre les tables.</li><li>Nommée correctement</li></ul><p>⚠️ Vous devez <strong>toujours</strong> avoir une clé ⚠️</p></div><p>Maintenant que nous avons posé la base, réfléchissons à notre problématique « Utilisateurs et Pays ».</p><details class="details custom-block"><summary>Voilà à quoi ça peut ressembler</summary><p><img src="'+h+'" alt="Exemple de MLD" loading="lazy"></p></details><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>Ne vous inquiétez pas, nous allons nous entrainer de multiple fois.</p></div><p><img src="'+e+'" alt="MCD" loading="lazy"></p><h2 id="les-contraintes" tabindex="-1">Les Contraintes <a class="header-anchor" href="#les-contraintes" aria-label="Permalink to &quot;Les Contraintes&quot;">​</a></h2><ul><li>La clé primaire sert à identifier une ligne de manière unique.</li><li>La clé étrangère permet de gérer des relations entre plusieurs tables, <strong>et garantissent la cohérence des données.</strong></li><li>L&#39;INDEX est utilisé pour accélérer les requêtes indispensable à la création de clés primaires et de clés étrangères.</li></ul><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>Ne vous inquiétez pas, nous allons nous entrainer de multiple fois.</p></div><h2 id="les-cardinalites" tabindex="-1">Les cardinalités <a class="header-anchor" href="#les-cardinalites" aria-label="Permalink to &quot;Les cardinalités&quot;">​</a></h2><p>Les cardinalités seront les liens entre nos tables, elle vont dans les schémas relationnels en modélisation des données, sert à compter le nombre minimum et maximum de possibilités que chaque classe contient dans la relation liant deux ou plusieurs objets.</p><table><thead><tr><th style="text-align:center;">Cardinalités</th><th style="text-align:center;">Usages</th></tr></thead><tbody><tr><td style="text-align:center;">0..1</td><td style="text-align:center;">Aucune ou une instance</td></tr><tr><td style="text-align:center;">1</td><td style="text-align:center;">Une instance exactement</td></tr><tr><td style="text-align:center;">0..* ou *</td><td style="text-align:center;">Aucune ou plusieurs instances</td></tr><tr><td style="text-align:center;">1..*</td><td style="text-align:center;">Une instance ou plusieurs (au moins une)</td></tr></tbody></table><h2 id="cles-etrangere-et-comportement" tabindex="-1">Clés étrangère et comportement <a class="header-anchor" href="#cles-etrangere-et-comportement" aria-label="Permalink to &quot;Clés étrangère et comportement&quot;">​</a></h2><p>Nous avons vu ensemble qu&#39;il était possible de définir des liens entre les tables, c&#39;est ce que l&#39;on appelle des contraintes, les contraintes ont plusieurs comportements possibles en cas de modifications :</p><ul><li>NO ACTION</li><li>CASCADE</li><li>SET NULL</li><li>SET DEFAULT</li></ul><p>Il est possible de combiner CASCADE, SET NULL, SET DEFAULT et NO ACTION pour des tables liées par des relations.</p><p>Nous allons donc pouvoir définir le comportement que le moteur de base de données va avoir en cas de :</p><ul><li>Suppression (ON DELETE)</li><li>De mise à jour (ON UPDATE)</li></ul><div class="tip custom-block"><p class="custom-block-title">L&#39;objectif est l&#39;intégrité des données</p><p>L&#39;important dans une base de données relationnelle c&#39;est de s&#39;assurer que les données sont « cohérentes ». Le concept de comportement en cas de suppression est donc primordial.</p><p>Le moteur de base de données sera en charge de s&#39;assurer que la donnée reste logique et cohérente en fonction des règles que <strong>vous</strong> avez définies lors de la conception de la base de données.</p></div><h2 id="phpmyadmin" tabindex="-1">PHPMyAdmin <a class="header-anchor" href="#phpmyadmin" aria-label="Permalink to &quot;PHPMyAdmin&quot;">​</a></h2><p>PHPMyAdmin est un outil qui va nous permettre d&#39;administrer notre serveur de base de données. Celui-ci est intégré à votre serveur XAMPP, vu que c&#39;est un site Internet il sera directement accessible par votre navigateur :</p><p><a href="http://localhost/phpmyadmin/" target="_blank" rel="noreferrer">Accéder à PHPMyAdmin</a></p><p><img src="'+i+'" alt="PhpMyAdmin" loading="lazy"></p><p>L&#39;interface de PHPMyAdmin est découpée en 3 morceaux :</p><p><em>La liste des bases de données</em>:</p><p><img src="'+a+'" alt="Les BDD" loading="lazy"></p><p><em>Les actions possibles</em>:</p><p><img src="'+n+'" alt="Les BDD" loading="lazy"></p><p><em>La partie centrale sera différente en fonction de la page / actions (contenu, création, etc)</em>:</p><p><img src="'+t+`" alt="Les BDD" loading="lazy"></p><div class="tip custom-block"><p class="custom-block-title">Un instant</p><p>Avant d&#39;aller plus loin, nous allons faire le tour ensemble de l&#39;interface de phpMyAdmin. Pour découvrir quelques fonctionnalités.</p><p>👋 phpMyAdmin est très complet et permet de tout faire. <strong>Mais</strong> ce n&#39;est pas le seul outil qui permet d&#39;administrer une base de données, nous avons également :</p><ul><li><a href="https://www.mysql.com/fr/products/workbench/" target="_blank" rel="noreferrer">MySQLWorkbench (gratuit)</a></li><li><a href="https://www.jetbrains.com/datagrip/features/" target="_blank" rel="noreferrer">DataGrip (payant)</a></li><li><a href="https://dbeaver.io/" target="_blank" rel="noreferrer">DBeaver (gratuit)</a></li></ul><p>D&#39;ailleurs, je vous propose de tester DBeaver si ça vous dit.</p></div><h2 id="sql-le-langage-de-requetage" tabindex="-1">SQL : Le langage de requêtage <a class="header-anchor" href="#sql-le-langage-de-requetage" aria-label="Permalink to &quot;SQL : Le langage de requêtage&quot;">​</a></h2><p>Nous avons un langage « universel » pour accéder / manipuler une base de données. Ce langage est découpé en 4 grandes catégories.</p><table><thead><tr><th>Catégorie</th><th>Mot-clé</th><th>Usage</th></tr></thead><tbody><tr><td>Définition d&#39;une base</td><td><code>CREATE</code>, <code>ALTER</code>, <code>TRUNCATE</code>, <code>DROP</code>, <code>RENAME</code></td><td>Structure de la base</td></tr><tr><td>Manipulation des données</td><td><code>INSERT</code>, <code>UPDATE</code>, <code>DELETE</code>, <code>MERGE</code></td><td>Gestion des données en base</td></tr><tr><td>Transaction</td><td><code>COMMIT</code>, <code>ROLLBACK</code></td><td>Groupement d&#39;opérations</td></tr><tr><td>Contrôle d&#39;accès</td><td><code>GRANT</code>, <code>REVOKE</code></td><td>Droit d&#39;accès aux données</td></tr><tr><td>Accès aux données</td><td><code>SELECT</code></td><td>Récupération d&#39;enregistrements de table(s)</td></tr></tbody></table><h2 id="obtenir-des-donnees" tabindex="-1">Obtenir des données <a class="header-anchor" href="#obtenir-des-donnees" aria-label="Permalink to &quot;Obtenir des données&quot;">​</a></h2><p>Comme vu précédemment le SQL va nous permettre différentes opérations autour des tables de notre base données. Celle que nous allons nous servir le plus est « l&#39;obtention de données ». L&#39;obtention de données se réalise avec la commande.</p><div class="language-sql vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">SELECT</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>La commande <code>SELECT</code> permet d&#39;obtenir des données. Cette requête est très simple elle est <strong>toujours</strong> formée de la même manière à savoir :</p><div class="language-sql vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">SELECT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> quoi </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">FROM</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> votreTable </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">WHERE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> condition(s);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li><code>quoi</code> : Ce que vous souhaitez obtenir, <code>*</code> pour l&#39;ensemble, sinon <code>nom_colonne</code> séparé par des virgules.</li><li><code>table</code> : La table que vous souhaitez requêter.</li><li><code>condition(s)</code> : La ou les condition(s) que vous souhaitez appliquer à votre récupération de données.</li></ul><p><em>Quelques exemples :</em></p><p>Avec une table telle que</p><table><thead><tr><th>#id</th><th>nom</th><th>prenom</th><th>age</th><th>pays</th></tr></thead><tbody><tr><td>1</td><td>Brosseau</td><td>Valentin</td><td>33</td><td>FR</td></tr><tr><td>2</td><td>Doe</td><td>John</td><td>14</td><td>US</td></tr><tr><td>3</td><td>Bernard</td><td>Michel</td><td>56</td><td>FR</td></tr></tbody></table><div class="language-sql vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- Récupère l&#39;ensemble des utilisateurs</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">SELECT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> FROM</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utilisateurs;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- Utilisateur de plus de 18ans</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">SELECT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> FROM</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utilisateurs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">WHERE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> age </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 18</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- Utilisateurs de plus de 18ans et de France</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">SELECT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> FROM</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utilisateurs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">WHERE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> age </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 18</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> AND</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> pays </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;FR&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- Nom et Prénom des Utilisateurs</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">SELECT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> nom, prenom </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">FROM</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utilisateurs;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><table><thead><tr><th>Liste des opérateurs de conditions</th></tr></thead><tbody><tr><td>=</td></tr><tr><td>&gt;</td></tr><tr><td>&lt;</td></tr><tr><td>=&gt;</td></tr><tr><td>&gt;=</td></tr><tr><td>!=</td></tr><tr><td>BETWEEN</td></tr><tr><td>LIKE</td></tr><tr><td>IN</td></tr></tbody></table><div class="tip custom-block"><p class="custom-block-title">C&#39;est à vous</p><ul><li>Nous allons maintenant créer notre première <code>base de données</code> et notre première <code>table</code> grâce à PHPMyAdmin.</li><li>Insérer un jeu de données fictif.</li><li>Réaliser des requêtes pour s&#39;entrainer.</li></ul></div><h3 id="gerer-de-la-pagination" tabindex="-1">Gérer de la pagination <a class="header-anchor" href="#gerer-de-la-pagination" aria-label="Permalink to &quot;Gérer de la pagination&quot;">​</a></h3><p>Rapidement vous allez devoir faire des requêtes avec de la pagination, c&#39;est-à-dire avec un nombre restreint de résultats pour gérer des choses que vous avez certainement déjà vu :</p><p><img src="`+u+`" alt="Pagination exemple" loading="lazy"></p><div class="language-sql vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- Première page (0 à 10)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">SELECT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> FROM</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utilisateurs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">LIMIT</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> OFFSET </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- Seconde page (10 à 20)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">SELECT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> FROM</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utilisateurs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">LIMIT</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> OFFSET </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">--- …</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="ordre-de-recuperation" tabindex="-1">Ordre de récupération <a class="header-anchor" href="#ordre-de-recuperation" aria-label="Permalink to &quot;Ordre de récupération&quot;">​</a></h3><p>Trier les résultats est aussi également utile.</p><div class="language-sql vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- Trier page age croissante</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">SELECT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> FROM</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utilisateurs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ORDER BY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> age </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ASC</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- Trier page age décroissante</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">SELECT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> FROM</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utilisateurs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ORDER BY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> age </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">DESC</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="obtenir-de-donnees-de-plusieurs-tables" tabindex="-1">Obtenir de données de plusieurs tables <a class="header-anchor" href="#obtenir-de-donnees-de-plusieurs-tables" aria-label="Permalink to &quot;Obtenir de données de plusieurs tables&quot;">​</a></h3><p>Votre données peut-être « découpée » dans plusieurs table afin d&#39;éviter les doublons. Cette opération est <strong>très courante</strong> en SQL, en effet il est important de découper la données dans plusieurs tables pour éviter la redondances d&#39;informations (comme vu ensemble précédemment).</p><p>Cette opération en SQL est appelé une <code>jointure</code>. Nous avons plusieurs façon de joindre les données</p><p><img src="`+k+`" alt="Jointure SQL" loading="lazy"></p><div class="danger custom-block"><p class="custom-block-title">Trop de choix ?</p><p>Le choix dépend des données et des opérations que vous souhaitez faire. Mais sachez que dans 90% du temps ce que vous souhaiter faire c&#39;est un <strong>LEFT JOIN</strong>.</p></div><div class="tip custom-block"><p class="custom-block-title">C&#39;est à vous</p><p>Nous allons à nouveau mettre en pratique. Nous allons créer une seconde table. Nous allons créer une table de <code>pays</code> elle contiendra la liste des pays en lien avec la table <code>utilisateurs</code> créé précédemment.</p><table><thead><tr><th>#code</th><th>nom</th><th>iso_code</th></tr></thead><tbody><tr><td>FR</td><td>France</td><td>FRA</td></tr><tr><td>DE</td><td>Allemagne</td><td>DEU</td></tr><tr><td>IT</td><td>Italie</td><td>ITA</td></tr></tbody></table><ul><li>Insérer une liste de pays suffisamment importante</li><li>Créer la requête qui permet d&#39;afficher les informations du pays en plus de l&#39;utilisateur</li></ul></div><h2 id="ajouter-des-donnees" tabindex="-1">Ajouter des données <a class="header-anchor" href="#ajouter-des-donnees" aria-label="Permalink to &quot;Ajouter des données&quot;">​</a></h2><p>Nous avons vu qu&#39;il était possible d&#39;ajouter des données via une interface graphique (PHPMyAdmin), mais bien évidemment notre code va également devoir ajouter des données. Les requêtes d&#39;ajout de données s&#39;appellent un <code>INSERT</code>, cette requête prend la forme suivante :</p><p><em>Ajout de certains champs</em>:</p><div class="language-sql vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">insert into</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utilisateurs (nom, prenom, age) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">values</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Test&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Insert&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">22</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><em>Tout les champs</em>:</p><div class="language-sql vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">INSERT INTO</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utilisateurs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">VALUES</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">99</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Test&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Insert&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">12</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;IT&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="modifier-des-donnees" tabindex="-1">Modifier des données <a class="header-anchor" href="#modifier-des-donnees" aria-label="Permalink to &quot;Modifier des données&quot;">​</a></h2><p>Ce type de requête s&#39;appelle un <code>UPDATE</code>, c&#39;est également disponible directement dans PHPMyAdmin mais comme l&#39;<code>INSERT</code> nous serons amené à le faire directement dans le code.</p><div class="language-sql vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">UPDATE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utilisateurs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">SET</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;valentin&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> WHERE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;Valentin-Update&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">UPDATE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utilisateurs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">SET</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;Valentine&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> WHERE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> id </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="supprimer-une-donnee" tabindex="-1">Supprimer une donnée <a class="header-anchor" href="#supprimer-une-donnee" aria-label="Permalink to &quot;Supprimer une donnée&quot;">​</a></h2><p>Pour supprimer une donnée il suffit de</p><div class="language-sql vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">DELETE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> FROM</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utilisateurs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">WHERE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> id </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="danger custom-block"><p class="custom-block-title">ATTENTION</p><p>Attention !!! Si vous oubliez le <strong>WHERE</strong> vous allez vider l&#39;ensemble de la table. (Et aucun retour en arrière possible)</p></div><h2 id="sql-et-php" tabindex="-1">SQL et PHP <a class="header-anchor" href="#sql-et-php" aria-label="Permalink to &quot;SQL et PHP&quot;">​</a></h2><p>Nous allons maintenant écrire le code qui va nous permettre d&#39;accéder à la base de données. En PHP, nous avons à notre disposition plusieurs connecteurs SQL (API).</p><ul><li>mysql_* (déprécié, n&#39;existe plus, mais vous trouverez encore peut-être des exemples en ligne <strong>à éviter</strong>)</li><li>MySQLi (le remplacement de mysql_*)</li><li>PDO (PDO_MySQL)</li></ul><p>Nous avons donc deux possibilités, la différence entre les deux ? Il y en a plusieurs, mais PDO à un grand avantage c&#39;est qu&#39;il permet de changer simplement de base de données (via des connecteurs pour MariaDB, Oracle, …). À mon avis <strong>PDO</strong> est doit-être votre choix par défaut dans le cas d&#39;un nouveau projet.</p><p><img src="`+s+`" alt="PDO vs MySQL" loading="lazy"></p><p>Nous allons travailler intelligemment, nous allons utiliser les includes et les variables pour éviter de mettre le code de la connexion à la base de données dans chaque page de notre site.</p><p>Nous allons également « sortir » / « mettre » en variables les informations de connexion à notre base de données à savoir :</p><ul><li>l&#39;IP du serveur de base de données.</li><li>Le login.</li><li>Le mot de passe.</li><li>Le nom de la base de données</li></ul><p>🔥 L&#39;organisation est très importante ! Cette étape de « découpage » peut paraitre superflue, mais c&#39;est là où se jouera votre réussite.</p><h3 id="utils-db-php" tabindex="-1">utils/db.php <a class="header-anchor" href="#utils-db-php" aria-label="Permalink to &quot;utils/db.php&quot;">​</a></h3><p>Nous allons écrire dans ce fichier le code nous permettant de nous connecter à la base de données. Cette partie du code est fournie directement dans la documentation PHP… Comme je suis sympa, je vous fournis directement le code :</p><div class="language-php vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Cette partie est à customiser</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$server </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;localhost&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$db </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;bart&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$user </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;root&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$passwd </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Fin de la partie customisable</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Cette partie est générique à l&#39;ensemble de vos projets utilisant une base de données.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$dsn </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;mysql:host=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$server</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">;dbname=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$db</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$pdo </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> PDO</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">($dsn, $user, $passwd);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>🔥 Et c&#39;est tout ! Voilà, si vous utilisez un <code>include</code> du fichier <code>utils/db.php</code> votre code sera connecté à la base de données et vous pourrez réaliser des requêtes SQL.</p><div class="tip custom-block"><p class="custom-block-title">Nous venons d&#39;écrire une <code>librairie</code></p><p>Ce que vous venez d&#39;écrire est une « librairie », vous allez pouvoir réutiliser ce code autant de fois que vous le souhaitez. Il est générique, vous n&#39;avez plus qu&#39;à le « copier / coller » dans vos différents projets nécessitant une base de données.</p></div><h2 id="requete-prepare-ou-requete-normal" tabindex="-1">Requête préparé ou requête normal ? <a class="header-anchor" href="#requete-prepare-ou-requete-normal" aria-label="Permalink to &quot;Requête préparé ou requête normal ?&quot;">​</a></h2><p>Nous avons deux façons d&#39;écrire les requêtes avec PDO :</p><ul><li>Les requêtes « classique ».</li><li>Et les requêtes préparées.</li></ul><p>Dans quel cas utiliser l&#39;un, et dans quel cas utiliser l&#39;autre ? C&#39;est simple, vous avez des valeurs variables (paramètres, saisie utilisateur, etc.) ?</p><ul><li><strong>OUI</strong> : Requête préparée.</li><li><strong>NON</strong> : Requête classique.</li></ul><div class="language-php vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Requête préparée :</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$results </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $pdo</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">query</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fetchAll</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\PDO</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">FETCH_ASSOC</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$stmt</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $pdo</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">prepare</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">SELECT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> FROM</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> phrases </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">WHERE</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> id </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ?&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$stmt</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">execute</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">([</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">22</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Paramètre qui va remplacer le « ? ».</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$results </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $stmt</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fetchAll</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\PDO</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">FETCH_ASSOC</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Requête classique</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$results </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $pdo</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">query</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">SELECT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> FROM</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> phrases&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fetchAll</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\PDO</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">FETCH_ASSOC</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="pratiquer" tabindex="-1">Pratiquer <a class="header-anchor" href="#pratiquer" aria-label="Permalink to &quot;Pratiquer&quot;">​</a></h2><p>Nous allons maintenant mettre en pratique avec deux projets :</p><ul><li><a href="/tp/php/sql/tp5.html">Persister Bart en Base de données</a></li><li><a href="/tp/php/sql/tp6.html">Greta TV personnalisable</a></li></ul>`,128),m=[g];function E(b,y,v,F,q,D){return p(),r("div",null,m)}const P=l(c,[["render",E]]);export{f as __pageData,P as default};
