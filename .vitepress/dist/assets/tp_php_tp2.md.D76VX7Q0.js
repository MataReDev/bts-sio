import{_ as s}from"./chunks/bart_form_step2.D_4u8mZN.js";import{_ as a,c as i,o as n,U as e,k as l}from"./chunks/framework.aGaNZw_P.js";const t="/assets/bart_form_step1.Bm926WNb.png",y=JSON.parse(`{"title":"Jouer avec les formulaires","description":"Faire des sites « statiques » c'est bien… Mais c'est mieux si nous pouvions échanger un peu avec notre utilisateur. La première étape de l'échange va passer par la construction de formulaire pour récolter des informations utilisateurs.","frontmatter":{"description":"Faire des sites « statiques » c'est bien… Mais c'est mieux si nous pouvions échanger un peu avec notre utilisateur. La première étape de l'échange va passer par la construction de formulaire pour récolter des informations utilisateurs."},"headers":[],"relativePath":"tp/php/tp2.md","filePath":"tp/php/tp2.md","lastUpdated":1694160171000}`),r={name:"tp/php/tp2.md"},p=e('<h1 id="jouer-avec-les-formulaires" tabindex="-1">Jouer avec les formulaires <a class="header-anchor" href="#jouer-avec-les-formulaires" aria-label="Permalink to &quot;Jouer avec les formulaires&quot;">​</a></h1><p>Faire des sites « statiques » c&#39;est bien… Mais c&#39;est mieux si nous pouvions échanger un peu avec notre utilisateur. La première étape de l&#39;échange va passer par la construction de formulaire pour récolter des informations utilisateurs.</p><h2 id="introduction" tabindex="-1">Introduction <a class="header-anchor" href="#introduction" aria-label="Permalink to &quot;Introduction&quot;">​</a></h2><p>Dans le TP <a href="./tp1.1.html">précédent</a> nous avons vu comment créer une page dynamique avec la punition de Bart… Mais la page était cependant très statique, à chaque chargement les valeurs sont identiques. Dans ce TP nous allons dynamiser tout ça :</p><ul><li>Plusieurs pages</li><li>Nombre de lignes dynamiques.</li><li>Phrase personnalisable.</li></ul><div class="tip custom-block"><p class="custom-block-title">N&#39;oubliez pas</p><p>Nous avons précédemment complété le projet avec une fonction et un include. Nous repartirons donc de cette version.</p></div><h2 id="structuration-du-projet" tabindex="-1">Structuration du projet <a class="header-anchor" href="#structuration-du-projet" aria-label="Permalink to &quot;Structuration du projet&quot;">​</a></h2><p>Nous allons retoucher votre site pour ajouter quelques éléments « de navigation », nous allons donc :</p><ul><li>Créer une page d&#39;accueil (<code>index.php</code>).</li><li>Créer une « toolbar » permettant de revenir à l&#39;accueil.</li><li>Créer une page de résultat (<code>bart.php</code>) qui affichera le tableau avec les choix de l&#39;utilisateur.</li></ul><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>Nous allons bien évidemment structurer nos dossiers et notre architecture comme vue précédemment. C&#39;est-à-dire en utilisant autant qu&#39;il semble nécessaire la mécanique d&#39;<code>include</code> (<code>common/functions.php</code>, <code>common/header.php</code> etc…)</p></div><h2 id="la-structure" tabindex="-1">La structure <a class="header-anchor" href="#la-structure" aria-label="Permalink to &quot;La structure&quot;">​</a></h2><p>Le projet final va ressembler à :</p>',12),o=l("iframe",{width:"560",height:"315",src:"https://www.youtube.com/embed/3OydDaemW-0",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""},null,-1),u=e('<h2 id="la-page-avec-le-formulaire-index-php" tabindex="-1">La page avec le formulaire (index.php) <a class="header-anchor" href="#la-page-avec-le-formulaire-index-php" aria-label="Permalink to &quot;La page avec le formulaire (index.php)&quot;">​</a></h2><p>La page <code>index.php</code> va afficher le formulaire, celui-ci permettra à l&#39;utilisateur de choisir :</p><ul><li>La taille de la punition.</li><li>La phase à écrire sur le tableau</li></ul><p>Voilà à quoi celle-ci doit ressembler :</p><p><img src="'+t+`" alt="Étape 1" loading="lazy"></p><h3 id="le-formulaire" tabindex="-1">Le formulaire <a class="header-anchor" href="#le-formulaire" aria-label="Permalink to &quot;Le formulaire&quot;">​</a></h3><p>Cette page va contenir le formulaire, comme vu ensemble dans le cours de formulaire nous permettra de recueillir le choix de l&#39;utilisateur. Une fois ce choix soumis au serveur via l&#39;action votre page de traitement <code>bart.php</code> affichera le résultat de la demande.</p><p>Pour rappel le minimum nécessaire pour faire votre formulaire est :</p><div class="language-html vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">form</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> action</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;bart.php&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> method</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;post&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">input</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;submit&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> value</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Punir !&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">form</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="warning custom-block"><p class="custom-block-title">Un instant</p><p>N&#39;oubliez pas de regarder ma proposition de design. Le choix du nombre de phrase n&#39;est pas libre, il s&#39;agit d&#39;un <code>select</code> HTML.</p></div><h2 id="la-page-«-resultat-»-bart-php" tabindex="-1">La page « résultat » (bart.php) <a class="header-anchor" href="#la-page-«-resultat-»-bart-php" aria-label="Permalink to &quot;La page « résultat » (bart.php)&quot;">​</a></h2><p>La page <code>bart.php</code> va contenir la logique d&#39;affichage de votre projet, elle va se charger, voilà comment nous allons procéder :</p><ul><li>Prendre les valeurs en provenance du <code>$_POST</code>.</li><li>Afficher les valeurs reçues sur le tableau de Bart (de manière identique a précédemment).</li><li>Permettre à l&#39;utilisateur de revenir sur la page d&#39;accueil via la <code>toolbar</code>.</li></ul><p><img src="`+s+`" alt="Étape 2" loading="lazy"></p><h3 id="affichage" tabindex="-1">Affichage <a class="header-anchor" href="#affichage" aria-label="Permalink to &quot;Affichage&quot;">​</a></h3><p>Pour l&#39;affichage nous allons utiliser les valeurs en provenance de votre formulaire, celles-ci seront reçues dans la variable super-globales <code>$_POST</code>.</p><p>Cette variable est un tableau, nous y accédons donc via <code>un clé</code>, exemple :</p><div class="language-php vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># La valeur du champ suivant (nommé phrase):</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">input</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> type</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;text&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;phrase&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Sera accessible dans :</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$_POST[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;phrase&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">];</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Et pourra être affiché avec :</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">echo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $_POST[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;phrase&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">];</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><div class="tip custom-block"><p class="custom-block-title">Astuce rapide</p><p>Vous ne savez pas ce que contient <code>$_POST</code> ?</p><p>Vous pouvez facilement afficher <strong>temporairement</strong> son contenu avec la ligne de code suivante:</p><div class="language-php vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">echo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;&lt;pre&gt;&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> .</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> print_r</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">($_POST) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;&lt;/pre&gt;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></div><p>En vous inspirant du code précédent et du code que vous avez déjà fait. Écrire le code permettant d&#39;afficher la phrase choisi par l&#39;utilisateur autant de fois que celui-ci le souhaite.</p><h3 id="valeur-par-defaut" tabindex="-1">Valeur par défaut <a class="header-anchor" href="#valeur-par-defaut" aria-label="Permalink to &quot;Valeur par défaut&quot;">​</a></h3><p>Votre page est maintenant fonctionnelle. BRAVO ! Cependant… Si vous accédez directement à la page <code>bart.php</code> (sans passer par le formulaire), celle-ci n&#39;affiche rien… C&#39;est dommage !</p><p>Je vous propose de modifier ça avec des conditions (<code>if</code>). Voilà un exemple de condition :</p><div class="language-php vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;?</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">php</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$phrase </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Je ne copie pas le code de valentin&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">isset</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">($_POST[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;phrase&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">])){</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    $phrase </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $_POST[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;phrase&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">];</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">echo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $phrase;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><div class="tip custom-block"><p class="custom-block-title">un doute sur quelque chose ?</p><p><code>isset</code> nous ne l&#39;avons jamais vu celui-ci ? Pas grave <a href="https://www.php.net/manual/en/function.isset.php" target="_blank" rel="noreferrer">pour plus d&#39;information le bon réflexe la documentation</a></p></div><p>Avec cet exemple de code et les informations que nous avons vus ensemble. Je pense que vous serez capable d&#39;écrire seule le code permettant d&#39;afficher la page <code>bart.php</code> même sans les données du formulaire.</p><h3 id="allons-plus-loin" tabindex="-1">Allons plus loin <a class="header-anchor" href="#allons-plus-loin" aria-label="Permalink to &quot;Allons plus loin&quot;">​</a></h3><p>Vous n&#39;aimez pas Bart ? Je vous propose d&#39;ajouter la sélection du type de personnage sur le formulaire :</p><ul><li>Ajouter un <code>select</code> avec dedans (bart, leela, lisa, ou autre…).</li><li>Trouver les images pour l&#39;affichage.</li><li>Utiliser la valeur obtenue dans le <code>$_POST</code> pour afficher la bonne personne.</li></ul><p>✋ Je ne vous donne pas plus d&#39;information! Avec ce que nous avons vu ensemble, vous pouvez y arriver seule.</p>`,30),h=[p,o,u];function c(d,k,m,g,b,v){return n(),i("div",null,h)}const F=a(r,[["render",c]]);export{y as __pageData,F as default};
