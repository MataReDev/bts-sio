import{_ as l}from"./chunks/structure_dossiers.DE3FJtJD.js";import{_ as t}from"./chunks/namespace_resolver.-7TJPEmA.js";import{_ as p,c as r,o,U as i,k as s,a as e}from"./chunks/framework.aGaNZw_P.js";const h="/assets/liste.CDYShM8h.png",d="/assets/mvc.BhBF6RYO.png",k="/assets/mcd_exemple.CLkynAkE.jpeg",u="/assets/parties.sGXS6qIN.png",c="/assets/routeur.Cq8fFPvA.png",m="/assets/sample.CwH70FFN.png",n="/assets/todoControler.ciAxmu4j.png",a="/assets/todos.CGVI9iKi.png",g="/assets/umlTodoModel.CQrSoiAH.jpg",b="/assets/todoPreview.e46o6DtV.png",E="/assets/todo_resultat_liste.CIVrgr5m.png",F="/assets/todo_resultat_ajouter.R2Su5GWw.png",y="/assets/todo_resultat_terminer.BSSdWZyF.png",$=JSON.parse('{"title":"TP TODO List","description":"","frontmatter":{},"headers":[],"relativePath":"tp/php/mvc/tp1.1.md","filePath":"tp/php/mvc/tp1.1.md","lastUpdated":1695301708000}'),v={name:"tp/php/mvc/tp1.1.md"},C=i('<h1 id="tp-todo-list" tabindex="-1">TP TODO List <a class="header-anchor" href="#tp-todo-list" aria-label="Permalink to &quot;TP TODO List&quot;">​</a></h1><p>Dans ce TP, nous allons prendre en main <a href="./tp1.html">la structure de code présente ici</a>.</p><details class="details custom-block"><summary>Sommaire</summary><nav class="table-of-contents"><ul><li><a href="#introduction">Introduction</a></li><li><a href="#le-projet">Le projet</a></li><li><a href="#la-structure">La structure</a><ul><li><a href="#le-modele">Le Modèle</a></li><li><a href="#la-vue">La Vue</a></li><li><a href="#le-controleur">Le Contrôleur</a></li><li><a href="#le-routeur">Le Routeur</a></li><li><a href="#vous-souhaitez-plus-de-detail">Vous souhaitez plus de détail ?</a></li></ul></li><li><a href="#recuperer-le-code-source-d-exemple">Récupérer le code source d&#39;exemple</a><ul><li><a href="#globalement">Globalement</a></li><li><a href="#la-configuration">La configuration</a></li><li><a href="#telecharger-le-code-source">Télécharger le code source</a></li></ul></li><li><a href="#faire-fonctionner-le-code">Faire fonctionner le code</a></li><li><a href="#un-serveur-integre">Un serveur intégré ?</a></li><li><a href="#modifier-la-page-«-home-»">Modifier la page « Home »</a></li><li><a href="#creer-la-page-«-test-»">Créer la page « Test »</a><ul><li><a href="#creer-la-methode">Créer la méthode</a></li><li><a href="#creer-la-vue-page">Créer la vue / page</a></li><li><a href="#utiliser-des-variables-dans-votre-vue">Utiliser des variables dans votre vue</a></li><li><a href="#ajouter-une-seconde-variable">Ajouter une seconde variable</a></li><li><a href="#creer-la-route">Créer la route</a></li></ul></li><li><a href="#place-au-projet-«-la-todo-list-»">Place au projet « La TODO list »</a><ul><li><a href="#bootstrap">Bootstrap</a></li><li><a href="#modelisation-de-la-base-de-donnees">Modélisation de la base de données</a></li><li><a href="#creer-le-modele">Créer le modèle</a></li><li><a href="#modifier-le-constructeur">Modifier le constructeur</a></li><li><a href="#creer-la-methode-«-marquercommetermine-»">Créer la méthode « marquerCommeTermine() »</a></li><li><a href="#initialiser-la-base-de-donnees">Initialiser la base de données</a></li><li><a href="#creer-le-controleur">Créer le contrôleur</a></li><li><a href="#definir-les-routes-dans-le-routeur">Définir les routes dans le routeur</a></li><li><a href="#ajouter-le-constructeur-construct">Ajouter le constructeur __construct()</a></li><li><a href="#la-methode-liste">La méthode liste()</a></li><li><a href="#le-template-de-la-page-liste">Le template de la page liste</a></li><li><a href="#la-methode-ajouter-texte">La méthode ajouter($texte = &#39;&#39;)</a></li><li><a href="#la-methode-terminer-id">La méthode terminer($id = &#39;&#39;)</a></li><li><a href="#la-methode-supprimer-id">La méthode supprimer($id = &#39;&#39;)</a></li></ul></li><li><a href="#ajouter-un-lien-dans-la-page-d-accueil">Ajouter un lien dans la page d&#39;accueil</a></li><li><a href="#masquer-les-todo-terminees">Masquer les TODO terminées</a></li><li><a href="#ajouter-une-page-d-authentification">Ajouter une page d&#39;authentification</a></li><li><a href="#evolution-1-qui-a-cree-la-todo">Évolution 1 : Qui a créé la TODO ?</a></li><li><a href="#evolution-2-envoi-d-email">Évolution 2 : Envoi d&#39;email</a></li><li><a href="#bonus-mot-de-passe-oublie">Bonus, mot de passe oublié</a></li><li><a href="#bonus-une-page-d-accueil-personnalisee">Bonus, une page d&#39;accueil personnalisée</a></li></ul></nav></details><h2 id="introduction" tabindex="-1">Introduction <a class="header-anchor" href="#introduction" aria-label="Permalink to &quot;Introduction&quot;">​</a></h2><p>Comme précisé dans le cours et dans nos échanges, la structure « MVC » est proposée ici comme phase transitoire entre votre code PHP de première année et du Laravel que l&#39;on peut retrouver en entreprise. En effet, même si la structure MVC a été créée avec la prise en compte de contrainte de sécurité, elle n’est en aucun cas dimensionnée pour réaliser un site client avec plusieurs centaines d&#39;utilisateurs.</p><ul><li><a href="/cheatsheets/poo/">Aide mémoire Programmation Orientée Objet</a></li><li><a href="/cheatsheets/poo-uml/">La modélisation objet</a></li><li><a href="/cheatsheets/mini-mvc-sample/">Aide mémoire Mini MVC Sample</a></li></ul><div class="tip custom-block"><p class="custom-block-title">C&#39;est important</p><p>Le point d&#39;introduction est important. Savoir justifier d&#39;une solution est tout aussi important que la solution en elle-même. Si vous décidez d&#39;utiliser ma structure dans d&#39;autres développements vous devez le faire avec conviction et pas juste « parceque ».</p><p>Des changements mineurs ont été ajoutés à la structure en 2022/2023 :</p><ul><li>Le système de « template » n&#39;affiche plus par défaut la page. Il ne faut pas oublier le return.</li><li>L&#39;accès à base de données est maintenant « Lazy », la connexion à celle-ci ne sera faite que lors de la <strong>première requête</strong>.</li><li>Le connecteur de base de données est maintenant partagé avec l&#39;ensemble des modèles.</li></ul><p>Ceci étant dit, nous pouvons continuer 🚀 !</p></div><h2 id="le-projet" tabindex="-1">Le projet <a class="header-anchor" href="#le-projet" aria-label="Permalink to &quot;Le projet&quot;">​</a></h2><p>Si vous avez déjà testé de nouvelles technologies, il existe un type de projet qui permet « de prendre en main » facilement du code inconnu. Ce type de projet est une TODO List.</p><p>Je vous propose donc de réaliser une TODO List en utilisant la structure MVC.</p><p><em>Voilà ce que nous allons réaliser :</em></p><p><img src="'+h+'" alt="Le projet" loading="lazy"></p><h2 id="la-structure" tabindex="-1">La structure <a class="header-anchor" href="#la-structure" aria-label="Permalink to &quot;La structure&quot;">​</a></h2><p>La structure de code MVC reprend les bases des frameworks modernes types Laravel. C&#39;est-à-dire un découpage « MVC », le découpage MVC signifie :</p><ul><li><strong>M</strong>odèle</li><li><strong>V</strong>ue</li><li><strong>C</strong>ontrôleur</li></ul><p><img src="'+d+'" alt="MVC" loading="lazy"></p><h3 id="le-modele" tabindex="-1">Le Modèle <a class="header-anchor" href="#le-modele" aria-label="Permalink to &quot;Le Modèle&quot;">​</a></h3><p>Le modèle représente la couche de votre application qui va manipuler les données. Concrètement c&#39;est celle-ci qui va parler en SQL avec votre moteur de base de données.</p><p>Vous trouverez dans celle-ci <strong>autant de méthodes que nécessaire</strong>, vous pouvez <em>(et à mon avis vous devez)</em> spécialiser vos modèles aux différentes tables présentes dans votre projet.</p><div class="tip custom-block"><p class="custom-block-title">Par exemple</p><p>Si nous avons la base de données suivante :</p><p><img src="'+k+'" alt="Exemple MCD" loading="lazy"></p><p>Nous devrions créer au minimum <em>3 modèles</em> :</p><ul><li>Client</li><li>BonDeCommande</li><li>Produit</li></ul><p>Avec à chaque fois des méthodes spécifiques exemple, nous pourrions avoir</p><table><thead><tr><th style="text-align:left;">Modèle</th><th style="text-align:left;">Méthodes</th></tr></thead><tbody><tr><td style="text-align:left;">Client</td><td style="text-align:left;"><code>CreerClient()</code>, <code>ModifierClient()</code>, <code>SupprimerClient()</code></td></tr><tr><td style="text-align:left;">BonDeCommande</td><td style="text-align:left;"><code>CreerBdc()</code>, <code>ModifierBdc()</code>, <code>SupprimerBdc()</code></td></tr><tr><td style="text-align:left;">Produit</td><td style="text-align:left;"><code>CreerProduit()</code>, <code>ModifierProduit()</code>, <code>SupprimerProduit()</code></td></tr></tbody></table></div><div class="danger custom-block"><p class="custom-block-title">STOP ! Ce qu&#39;il faut retenir</p><p>Ce qu&#39;il faut retenir c&#39;est :</p><ul><li>Autant d&#39;objets que de tables.</li><li>Des méthodes spécifiques aux actions à faire dans la table.</li></ul></div>',21),f=s("div",{class:"tip custom-block"},[s("p",{class:"custom-block-title"},"CRUD"),s("p",null,"Ce genre d'objet s'appelle un CRUD (Create, Update, Delete). C'est une structure que nous retrouverons très souvent. Vous allez voir que c'est tellement courant qu'en général ils sont écrits automatiquement par le Framework."),s("iframe",{src:"https://giphy.com/embed/11ISwbgCxEzMyY",width:"480",height:"360",frameBorder:"0",class:"giphy-embed",allowFullScreen:""})],-1),A=i('<h3 id="la-vue" tabindex="-1">La Vue <a class="header-anchor" href="#la-vue" aria-label="Permalink to &quot;La Vue&quot;">​</a></h3><p>La vue, vous connaissez! Ici, rien de nouveau. Le <code>V</code> de MVC c&#39;est juste la représentation graphique de ce que vous souhaitez afficher (en HTML + CSS + JavaScript).</p><p>Cependant par rapport à vos premiers développements nous allons découper au maximum le code HTML en différents fichiers ; Objectif éviter le code dupliqué en utilisant une organisation qui ressemblera à :</p><p><img src="'+u+'" alt="Découpage" loading="lazy"></p><div class="tip custom-block"><p class="custom-block-title">L&#39;objectif ?</p><ul><li>Éviter le code dupliqué.</li><li>Faciliter la modification.</li><li>Se concentrer sur la partie du code « Métier » de la page en cours.</li></ul></div><h3 id="le-controleur" tabindex="-1">Le Contrôleur <a class="header-anchor" href="#le-controleur" aria-label="Permalink to &quot;Le Contrôleur&quot;">​</a></h3><p>Et le contrôleur dans tout ça ? Et bien le contrôleur va assembler :</p><ul><li>Votre modèle (l&#39;accès aux données).</li><li>Votre Vue (l&#39;affichage).</li></ul><p>Le code va prendre les demandes des clients « appel HTTP » réaliser le traitement en base de données et afficher « la vue » résultat au client.</p><p>Comme pour le modèle, le contrôleur est un objet qui doit posséder idéalement autant de méthode que de page (et peut-être plus).</p><h3 id="le-routeur" tabindex="-1">Le Routeur <a class="header-anchor" href="#le-routeur" aria-label="Permalink to &quot;Le Routeur&quot;">​</a></h3><p>Nous l&#39;avons vu en cours, en plus du MVC classique, nous allons ajouter une dernière brique « essentiel » au bon fonctionnement et à la maintenance de votre site Internet. Cette brique est nommée un <strong>Routeur</strong>.</p><p>Le routeur va contenir la déclaration des « liens » de votre site Internet afin de les aiguiller vers la bonne fonctionnalité dans votre contrôleur.</p><p>Nous pouvons schématiser le fonctionnement :</p><p><img src="'+c+'" alt="Intégration du routeur" loading="lazy"></p><div class="tip custom-block"><p class="custom-block-title">Vous êtes ici ?</p><p>Appeler-moi nous allons discuter un peu de cette architecture, qui est la base de presque l&#39;ensemble des frameworks modernes (Laravel, VueJS, React …)</p></div><h3 id="vous-souhaitez-plus-de-detail" tabindex="-1">Vous souhaitez plus de détail ? <a class="header-anchor" href="#vous-souhaitez-plus-de-detail" aria-label="Permalink to &quot;Vous souhaitez plus de détail ?&quot;">​</a></h3><p>L&#39;idée ici était de rappeler les bases, si vous souhaitez plus de détail sur l&#39;architecture MVC que je vous propose <a href="./tp1.html">rendez-vous ici</a></p><h2 id="recuperer-le-code-source-d-exemple" tabindex="-1">Récupérer le code source d&#39;exemple <a class="header-anchor" href="#recuperer-le-code-source-d-exemple" aria-label="Permalink to &quot;Récupérer le code source d&#39;exemple&quot;">​</a></h2><p>Assez de blabla, un peu comme pour un projet Laravel, nous n&#39;allons pas partir de 0 ! Vous allez partir d&#39;un code initial qui vous servira de base de travail.</p><p>Le code en question est « vide », il s&#39;agit uniquement d&#39;une structure que <strong>vous devez</strong> respecter. Un peu comme en entreprise vous vous intégrez dans une équipe, je vous propose ici de respecter quelques règles qui sont des standards du développement.</p><p>Comme indiqué en introduction, la structuration d&#39;un développement est aussi importante que le développement en lui-même. C&#39;est pour ça qu&#39;avant même de développer il est important de prendre en main la structure des dossiers et fichiers proposés dans le code présenté en exemple.</p><p>La structure de base en termes de dossier ressemble à :</p><p><img src="'+l+'" alt="Structure des dossiers" loading="lazy"></p><div class="tip custom-block"><p class="custom-block-title">Compliqué ?</p><p>Pas d&#39;inquiétude, pas de stress ! nous allons voir ensemble comment prendre en main le code.</p></div><h3 id="globalement" tabindex="-1">Globalement <a class="header-anchor" href="#globalement" aria-label="Permalink to &quot;Globalement&quot;">​</a></h3><p>Le code présent utilise différents aspects du développement objet :</p><ul><li>Des objets permettant d&#39;encapsuler / organiser la logique autour de représentation.</li><li>De l&#39;héritage afin d&#39;organiser le code hiérarchiquement.</li><li>Des interfaces permettant de définir un comportement.</li></ul><p>Les éléments de <code>base</code> sont toujours dans un dossier nommé <code>base</code>. Vous retrouverez ce dossier pour les contrôleurs, les routes, les modèles.</p><h3 id="la-configuration" tabindex="-1">La configuration <a class="header-anchor" href="#la-configuration" aria-label="Permalink to &quot;La configuration&quot;">​</a></h3><p>Avant d&#39;aller plus loin, intéressons-nous à la configuration. Dans un projet, il est évident qu&#39;il ne faut pas mettre la configuration n&#39;importe où. Vous l&#39;avez vécu en entreprise, vous avez peut-être eu à votre disposition plusieurs serveurs / machines / ordinateurs.</p><p>Votre code va fonctionner de manière identique entre chaque environnement, par contre ce qui va certainement changer c&#39;est l&#39;accès à la base de données. Cet accès, est dépendant d&#39;une configuration (Utilisateur, Mot de passe, Serveur …) dans une structure MVC on essai de ne pas mettre cette configuration n&#39;importe où !</p><p>Dans l&#39;organisation que je vous propose, cette configuration est centralisée dans le fichier <code>configs.php</code> à la racine du code source.</p><div class="tip custom-block"><p class="custom-block-title">La configuration c&#39;est bien !</p><p>C&#39;est peut-être un détail pour vous… Mais pour moi ça veut dire beaucoup ! Actuellement vous avez un serveur, mais demain peut-être 20… Et pour votre projet final, vous aurez à déployer rapidement votre application sur un autre serveur que celui sur lequel vous avez développé.</p><p>Prenez <strong>dès maintenant</strong> l&#39;habitude de mettre votre configuration (IP, Serveur, mot de passe de BDD, etc.) dans le fichier <code>configs.php</code>. Dans l&#39;architecture que je vous propose vous trouverez le minimum nécessaire au bon fonctionnement d&#39;une application.</p></div><h3 id="telecharger-le-code-source" tabindex="-1">Télécharger le code source <a class="header-anchor" href="#telecharger-le-code-source" aria-label="Permalink to &quot;Télécharger le code source&quot;">​</a></h3><p>Le projet de base est disponible <a href="https://github.com/c4software/mini-mvc-sample/archive/refs/tags/2.8.zip" target="_blank" rel="noreferrer">à l&#39;adresse suivante en cliquant ici</a></p><div class="tip custom-block"><p class="custom-block-title">C&#39;est un projet vide</p><p>Même si celui-ci contient à première vue « beaucoup de fichiers », le projet vous avez téléchargé est bien un projet vide.</p></div><h2 id="faire-fonctionner-le-code" tabindex="-1">Faire fonctionner le code <a class="header-anchor" href="#faire-fonctionner-le-code" aria-label="Permalink to &quot;Faire fonctionner le code&quot;">​</a></h2><p>La première étape est de faire fonctionner le code sur votre machine. Je vous laisse mettre en place le code fourni dans votre dossier <code>htdocs</code> ou <code>www</code> en fonction de l&#39;outil que vous utilisez.</p><p><strong>Attention aux fichiers cachés</strong>, dans l&#39;archive il y a un fichier .htaccess ne l&#39;oubliez pas !</p><div class="tip custom-block"><p class="custom-block-title">.htaccess ?</p><p>Vous avez déjà entendu parler de ce fichier ? C&#39;est un fichier important, il va nous permettre de définir / redéfinir le comportement de votre serveur Web pour par exemple activer l’URL REWRITING` (réécriture d&#39;URL).</p><p>La réécriture d&#39;url va nous permettre d&#39;avoir de beaux liens exemple <code>index.php?page=toto</code> deviendra seulement <code>toto.html</code>. Vous voulez en savoir plus ? Je suis là 👋, je vais vous donner un complément d&#39;information.</p></div><table><thead><tr><th style="text-align:center;"></th></tr></thead><tbody><tr><td style="text-align:center;"><img src="'+m+`" alt="Exemple qui fonctionne" loading="lazy"></td></tr><tr><td style="text-align:center;">Si tout fonctionne correctement, vous devriez avoir 👆 (superbe n&#39;est-ce pas)</td></tr></tbody></table><h2 id="un-serveur-integre" tabindex="-1">Un serveur intégré ? <a class="header-anchor" href="#un-serveur-integre" aria-label="Permalink to &quot;Un serveur intégré ?&quot;">​</a></h2><p>La structure MVC possède un serveur web intégré, celui-ci vous permettra de tester votre site web en local sans même avoir besoin de Wamp / Xampp ou autre serveur Apache + PHP.</p><div class="tip custom-block"><p class="custom-block-title">Si votre ordinateur est correctement configuré</p><p>Vous devriez être capable de faire :</p><div class="language-sh vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">php</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mvc</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> serve</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>Cette commande intégrée à la structure MVC lancera un serveur automatiquement (sur le port 9000).</p></div><details class="details custom-block"><summary>Comment ça fonctionne?</summary><div class="language-sh vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Windows (avec XAMPP)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">C:/xampp/php/php</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -S</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> localhost:9000</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Windows (avec WAMP)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">C:/wamp64/bin/php/php8.2.0/php</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -S</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> localhost:9000</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Linux / OSX</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">php</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -S</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> localhost:9000</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></details><h2 id="modifier-la-page-«-home-»" tabindex="-1">Modifier la page « Home » <a class="header-anchor" href="#modifier-la-page-«-home-»" aria-label="Permalink to &quot;Modifier la page « Home »&quot;">​</a></h2><p>Le meilleur moyen pour prendre en main un projet c&#39;est de le modifier, je vous propose donc une première modification très simple :</p><ul><li>Modifier la page d&#39;accueil.</li></ul><p>Je vous propose de mettre en place sur la page d&#39;accueil une photo / image (de votre choix) centrée via de la CSS.</p><div class="tip custom-block"><p class="custom-block-title">C&#39;est à vous</p><p>La bonne démarche à mon sens est là suivante :</p><ul><li>Utiliser un IDE pertinent (exemple PHPStorm ou VSCode).</li><li>Repenser à l&#39;introduction et la notion de MVC. Nous allons effectivement toucher le <code>Vue</code> (elle même appelé par le contrôleur), ça veut dire que vous allez trouver votre fichier dans le dossier <code>views</code>.</li><li>Pour trouver le bon fichier, je vous laisse un peu investiguer, mais sachez que regarder dans le contrôleur semble être une bonne idée…</li></ul><p>👋 Je suis là pour ceux qui sont perdus 🤕</p></div><h2 id="creer-la-page-«-test-»" tabindex="-1">Créer la page « Test » <a class="header-anchor" href="#creer-la-page-«-test-»" aria-label="Permalink to &quot;Créer la page « Test »&quot;">​</a></h2><p>Maintenant que vous avez réalisé votre modification, je vous propose de regarder « Comment ajouter une nouvelle page dans cette superbe architecture (que je trouve déjà géniale) ».</p><p>J&#39;imagine que pour l&#39;instant vous avez peur :</p><ul><li>Mais comment faire pour ajouter une page?</li><li>J&#39;ai bien du HTML dans <code>views</code> mais comment je l&#39;appelle?</li></ul><p>Et bien la réponse à vos questions est</p><ul><li>Une <strong>nouvelle</strong> méthode dans le bon contrôleur.</li><li>Un fichier <code>test.php</code> dans <code>views</code>.</li><li>Une correspondance entre « Votre méthode » et une route dans le <code>routes/Web.php</code>.</li></ul><div class="tip custom-block"><p class="custom-block-title">Nous l&#39;avons vu ensemble</p><p>Le routeur est un « composant » très important du web moderne. Il va nous permettre de piloter les ressources accessibles à notre client en les déclarant dans un fichier.</p><ul><li>À votre avis, pourquoi est-ce important de travailler avec une <code>WHITELIST</code> plutôt qu&#39;une <code>BLACKLIST</code> dans ce genre de situation ?</li></ul></div><p>Vu que c&#39;est la première fois, nous allons le faire ensemble… N&#39;hésitez pas à poser vos questions !</p><p>Voilà en vidéos ce que vous allez réaliser :</p>`,60),D=s("iframe",{width:"560",height:"315",src:"https://www.youtube-nocookie.com/embed/78_oUJrqd9c",title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""},null,-1),q=i(`<h3 id="creer-la-methode" tabindex="-1">Créer la méthode <a class="header-anchor" href="#creer-la-methode" aria-label="Permalink to &quot;Créer la méthode&quot;">​</a></h3><p>Nous allons dans un premier temps créer une méthode dans le contrôleur <code>SampleWebController.php</code>, pour le contenu pas grand-chose pour l&#39;instant. Vous pouvez vous inspirer du contenu de la méthode <code>home()</code>.</p><div class="language-php vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> about</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Template</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">render</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;views/global/test.php&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>Pour l&#39;instant aucun changement, si vous utilisez PHPStorm celui-ci va vous proposer de créer le fichier <code>test.php</code> directement en cliquant sur « la petite lampe jaune ».</p><h3 id="creer-la-vue-page" tabindex="-1">Créer la vue / page <a class="header-anchor" href="#creer-la-vue-page" aria-label="Permalink to &quot;Créer la vue / page&quot;">​</a></h3><p>Si ce n&#39;est pas déjà fait, créé le fichier <code>views/global/test.php</code>. Pour le contenu, je vous laisse libre. Je vous rappelle juste que nous sommes entrain de créer une page « À propos ».</p><div class="tip custom-block"><p class="custom-block-title">Rappel</p><p>ici nous n&#39;écrivons que le contenu, l&#39;entête et le pied de page sont « automatiquement » ajoutés grâce au code présent dans la méthode home de votre contrôleur.</p></div><h3 id="utiliser-des-variables-dans-votre-vue" tabindex="-1">Utiliser des variables dans votre vue <a class="header-anchor" href="#utiliser-des-variables-dans-votre-vue" aria-label="Permalink to &quot;Utiliser des variables dans votre vue&quot;">​</a></h3><p>Nous avons ajouté une page, cependant, cette page est relativement « statique »… Pour aller un peu plus loin, je vous propose de voir comment envoyer des paramètres dans votre <strong>vue</strong>. Contrairement à du PHP comme en première année, vous n&#39;allez pas avoir dans votre vue l&#39;ensemble des variables. Vous n&#39;aurez que celles présentes dans l&#39;<code>array()</code>.</p><p>Si nous reprenons l&#39;exemple précédent :</p><div class="language-php vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Template</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">render</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;views/global/test.php&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">array</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>Combien de variables passons-nous ? Aucune, pour la suite, je vous propose d&#39;ajouter une première variable :</p><div class="language-php vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Template</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">render</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;views/global/test.php&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">array</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;titre&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;À Propos&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">));</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>Puis modifier votre vue pour y ajouter l&#39;usage de votre variable :</p><div class="language-php vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">h1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;&lt;?=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $titre </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?&gt;&lt;/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">h1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>C&#39;est à vous, je vous laisse tester !</p><h3 id="ajouter-une-seconde-variable" tabindex="-1">Ajouter une seconde variable <a class="header-anchor" href="#ajouter-une-seconde-variable" aria-label="Permalink to &quot;Ajouter une seconde variable&quot;">​</a></h3><p>Pour vérifier que vous avez bien compris la procédure. Je vous laisse ajouter une seconde variable. Celle-ci doit-être la date du jour ainsi que l&#39;heure.</p><p><strong>Bien évidemment cette valeur doit être dynamique et changée à chaque chargement de page</strong>.</p><p>Besoin d&#39;aide ? Voilà un indice :</p><div class="language-php vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Template</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">render</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;views/global/about.php&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">array</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;titre&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Votre titre !&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;date&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> …</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">));</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>C&#39;est à vous :</p><ul><li>Modifier votre contrôleur pour ajouter la bonne valeur.</li><li>Modifier votre vue pour afficher la valeur. (En bas de la page à propos).</li><li>Valider le bon fonctionnement.</li></ul><h3 id="creer-la-route" tabindex="-1">Créer la route <a class="header-anchor" href="#creer-la-route" aria-label="Permalink to &quot;Créer la route&quot;">​</a></h3><p>Voilà nous avons maintenant l&#39;ensemble du code, mais celui-ci n&#39;est pas encore accessible. Pour le rendre accessible, vous devez le déclarer dans le routeur.</p><p>Ici nous sommes entrain de faire une page <code>Web</code>, vous devez donc ajouter dans le routeur <code>Web.php</code> l&#39;accès à votre page via l&#39;ajout de la ligne suivante :</p><div class="language-php vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Route</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/test&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, [$main, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;test&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li><strong>Évidemment</strong> c&#39;est à ajouter après la route existante.</li><li>Le premier paramètre correspond au « Chemin / lien d&#39;accès », le second étant la méthode à appeler dans le bon contrôleur.</li></ul><p>👋 Je vous laisse tester l&#39;accès à votre page</p><h2 id="place-au-projet-«-la-todo-list-»" tabindex="-1">Place au projet « La TODO list » <a class="header-anchor" href="#place-au-projet-«-la-todo-list-»" aria-label="Permalink to &quot;Place au projet « La TODO list »&quot;">​</a></h2><p>Avant de commencer, je vous propose de regarder ensemble ce que nous allons réaliser.</p><p>Maintenant que nous avons pris en main le code existant, je vous propose de réaliser une plus grosse modification, l&#39;ajout d&#39;une nouvelle fonctionnalité « La TodoList », pour réaliser l&#39;ensemble du code, je vais bien évidemment vous guider.</p><p>Nous allons donc créer une TODO List. Une TODO List c&#39;est toujours le même genre d&#39;action :</p><ul><li>Une Liste.</li><li>Un ajout dans la liste.</li><li>Un marqué comme terminer « une todo ».</li><li>Un supprimé qui supprime uniquement les taches « avec comme statut, termine = 1 ».</li></ul><p>Nous allons donc avoir 4 fonctionnalités dans notre application. Chaque fonctionnalité je le rappelle sera une méthode de notre contrôleur :</p><table><thead><tr><th style="text-align:center;">Route</th><th style="text-align:right;">Méthode dans le contrôleur</th></tr></thead><tbody><tr><td style="text-align:center;"><code>/list</code></td><td style="text-align:right;"><code>liste()</code></td></tr><tr><td style="text-align:center;"><code>/ajouter</code></td><td style="text-align:right;"><code>ajouter($texte)</code></td></tr><tr><td style="text-align:center;"><code>/terminer</code></td><td style="text-align:right;"><code>terminer($id)</code></td></tr><tr><td style="text-align:center;"><code>/supprimer</code></td><td style="text-align:right;"><code>supprimer($id)</code></td></tr></tbody></table><p>L&#39;étape de définition des différentes actions est <strong>primordiale</strong>, ça va nous permettre de créer notre objet de manière efficace, l&#39;autre bonne façon de représenter notre objet est via une modélisation UML.</p><p><img src="`+n+'" alt="Modélisation UML" loading="lazy"></p><div class="tip custom-block"><p class="custom-block-title">Vous vous intégrez dans un framework</p><p>Parlons un peu de la modélisation UML que je vous propose, comme vous pouvez le constater nous avons ici la définition de la class avec les différentes méthodes définies dans le tableau.</p><p>Nous avons également une classe en plus ; cette classe est « la base » d&#39;un contrôleur, elle définit les méthodes de bases communes à l&#39;ensemble des contrôleurs du framework.</p><p>🗣 Cette classe ne sera <strong>jamais</strong> instanciée directement, la flèche « extends » défini la notion d&#39;héritage.</p></div><h3 id="bootstrap" tabindex="-1">Bootstrap <a class="header-anchor" href="#bootstrap" aria-label="Permalink to &quot;Bootstrap&quot;">​</a></h3><p>Nous allons utiliser Bootstrap pour coder l&#39;interface, n&#39;hésitez donc pas à consulter la documentation :</p><ul><li><a href="https://getbootstrap.com/docs/5.0/getting-started/introduction/" target="_blank" rel="noreferrer">Bootstrap</a></li><li><a href="https://icons.getbootstrap.com/" target="_blank" rel="noreferrer">Bootstrap Icon</a></li></ul><h3 id="modelisation-de-la-base-de-donnees" tabindex="-1">Modélisation de la base de données <a class="header-anchor" href="#modelisation-de-la-base-de-donnees" aria-label="Permalink to &quot;Modélisation de la base de données&quot;">​</a></h3><p>Avant de continuer, je vous propose de définir le format de la base de données. En effet, notre modèle reposera sur celle-ci il faut donc réfléchir à celle-ci. L&#39;idée ici est de faire du code, j&#39;ai donc réfléchi (un peu) à votre place. Le minimum pour que nous puissions réaliser notre « TodoList » est la création de la table suivante :</p><p><img src="'+a+`" alt="Modélisation table TODO" loading="lazy"></p><p>Nous allons créer cette table plus tard, mais pour l&#39;instant, nous avons besoin de la modélisation pour créer notre modèle.</p><h3 id="creer-le-modele" tabindex="-1">Créer le modèle <a class="header-anchor" href="#creer-le-modele" aria-label="Permalink to &quot;Créer le modèle&quot;">​</a></h3><p>Le modèle va être le moyen d&#39;accéder à nos données, c&#39;est ici que nous allons écrire nos requêtes SQL (<strong>et uniquement ici</strong>). Utiliser un framework signifie en général gagner du temps ! Pour l&#39;instant, j&#39;imagine que vous n&#39;en avez pas l&#39;impression, mais je vous assure quand vous maitrisez un framework et/ou une architecture vous gagnerez un temps fou. Ce gain de temps vient de deux éléments :</p><ul><li>L&#39;architecture des dossiers et du code propre et bien organisé.</li><li>Des outils pour créer les différents éléments.</li><li>Du code partagé, utilisé sans copier / collé.</li></ul><p>Le framework que je vous propose entre directement dans cette catégorie « Gagner du temps ». Pour créer notre modèle au lieu de copier / coller du code vous avez de base (intégrer dans le code) un outil en ligne de commande qui s&#39;occupe de tout (si si). Pour créer votre modèle pour accéder au TodoList il vous suffit de :</p><div class="language-sh vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Hors Windows</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">php</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mvc</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> model:create</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> TodoModel</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Sous Windows (avec XAMPP)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">C:/xampp/php/php</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mvc</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> model:create</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> TodoModel</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Sous Windows (avec WAMP)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">C:/wamp64/bin/php/php8.0.14/php</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mvc</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> model:create</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> TodoModel</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><strong>Et c&#39;est tout !</strong> votre modèle pour accéder aux données est prêt 🤝 (il est créé automatiquement dans le dossier <code>models</code>). Nous avons maintenant une classe qui nous permettra d&#39;accéder aux données contenues dans la base de données. L&#39;accès aux données se fera :</p><ul><li>Via les méthodes « de base » (comme vu en cours via l&#39;héritage présent dans la classe).</li><li>Via <strong><em>vos méthodes</em></strong> directement écrite par vous.</li></ul><div class="tip custom-block"><p class="custom-block-title">Pas de magie (jamais)</p><p>Je vous invite à regarder comment fonctionne cette partie dans le code. Ce n’est pas bien compliqué. D&#39;ailleurs, regardons ensemble !</p></div><div class="warning custom-block"><p class="custom-block-title">Vous avez du mal à voir ce que nous avons créé non ?</p><p>Et oui, les commandes magiques c&#39;est bien … mais voilà ce que nous avons créé :</p><p><img src="`+g+'" alt="TodoModel" loading="lazy"></p><ul><li>SQL est « une classe de base », elle est intégrée dans le framework.</li><li>Votre classe <code>TodoModel</code> hérite de la classe SQL. (Vous pouvez m&#39;en dire plus ?)</li><li>Votre classe <code>TodoModel</code> a été créée dans le dossier <code>models</code>. (Je vous laisse aller regarder)</li><li>Pourquoi notre classe ne possède-t-elle qu&#39;une seule méthode ?</li></ul></div><h3 id="modifier-le-constructeur" tabindex="-1">Modifier le constructeur <a class="header-anchor" href="#modifier-le-constructeur" aria-label="Permalink to &quot;Modifier le constructeur&quot;">​</a></h3><p>Dans le constructeur de la classe, je vous laisse modifier les paramètres lors de la création du parent ; afin de spécifier le bon tableName et primaryKey.</p><p>Je vous redonne le schéma de la base de données :</p><p><img src="'+a+`" alt="Modélisation table TODO" loading="lazy"></p><h3 id="creer-la-methode-«-marquercommetermine-»" tabindex="-1">Créer la méthode « marquerCommeTermine() » <a class="header-anchor" href="#creer-la-methode-«-marquercommetermine-»" aria-label="Permalink to &quot;Créer la méthode « marquerCommeTermine() »&quot;">​</a></h3><p>Dans le diagramme UML j&#39;indique la présence d&#39;une méthode <code>marquerCommeTermine()</code>, si vous avez ouvert la classe créée vous allez voir que cette méthode n&#39;est pas présente. Nous allons donc devoir la créer…</p><ul><li>Pourquoi la méthode n&#39;est pas présente ?</li><li>Pourquoi ne pas utiliser les méthodes fournies par le parent ?</li></ul><p>Cette méthode doit marquer comme terminé un enregistrement en base de données, nous allons donc avoir besoin</p><ul><li>D&#39;un <code>id</code> en paramètre de la méthode.</li><li>D&#39;une requête d&#39;update.</li><li>D&#39;un connecteur PDO (pour parler à la base de données)</li></ul><p>Vu que c&#39;est la première fois je vous donne du code, mais attention à bien comprendre ce que vous copié/collé :</p><div class="language-php vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> marquerCommeTermine</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">($id){</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    $stmt </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> $this</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getPdo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">prepare</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">UPDATE</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> todos </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">SET</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> termine </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> WHERE</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> id </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ?&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    $stmt</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">execute</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">([$id]);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="danger custom-block"><p class="custom-block-title">Où mettre la méthode ?</p><p>Vous avez 4 possibilités :</p><ul><li>Dans la vue (Non).</li><li>Dans le routeur (Non).</li><li>Dans le contrôleur (Non).</li><li>Dans le modèle (<strong>Oui</strong>).</li></ul></div><details class="details custom-block"><summary>Besoin d&#39;aide ?</summary><p>Votre classe doit maintenant ressembler à</p><div class="language-php vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;?</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">php</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">namespace</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> models</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">use</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> models\\base\\SQL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> TodoModel</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> extends</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> SQL</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> __construct</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        parent::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">__construct</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;todos&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;id&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> marquerCommeTermine</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">($id){</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        $stmt </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> $this</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getPdo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">prepare</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">UPDATE</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> todos </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">SET</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> termine </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> WHERE</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> id </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ?&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        $stmt</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">execute</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">([$id]);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div></details><p>Questions :</p><ul><li>À votre avis est-ce la seule façon de faire ?</li><li>Avons-nous toutes les méthodes nécessaires pour réaliser notre application ?</li></ul><h3 id="initialiser-la-base-de-donnees" tabindex="-1">Initialiser la base de données <a class="header-anchor" href="#initialiser-la-base-de-donnees" aria-label="Permalink to &quot;Initialiser la base de données&quot;">​</a></h3><p>Votre projet avance petit à petit, nous avons déjà créé :</p><ul><li>La base du projet (structure).</li><li>Le modèle pour accéder aux données.</li><li>Les méthodes permettant de modifier les données.</li></ul><p>C&#39;est déjà pas mal, mais il manque maintenant la base de données en elle-même. Dans un framework cette partie-là est également automatisable (vous verrez avec Laravel c&#39;est encore plus puissant). Dans un framework appliqué les modifications dans la base de données s&#39;appellent réaliser une « migration », avec notre « mini framework » pour créer la base de données il suffit de créer <strong>un fichier</strong> dans le dossier <code>migrations</code> :</p><ul><li>Créer le fichier <code>init.sql</code> dans le dossier Migration, y mettre le contenu suivant :</li></ul><div class="language-sql vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">--</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- Structure de la table \`todos\`</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">--</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> TABLE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> \`</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">todos</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">\` (</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  \`id\`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">11</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  \`texte\`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> varchar</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">200</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  \`termine\`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> tinyint</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NOT NULL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> DEFAULT</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  \`timestamp\`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> timestamp</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> NOT NULL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> DEFAULT</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> current_timestamp</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) ENGINE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">InnoDB </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">DEFAULT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> CHARSET</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">utf8mb4;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">--</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- Index pour les tables déchargées</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">--</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">--</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- Index pour la table \`todos\`</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">--</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ALTER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> TABLE</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> \`todos\`</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  ADD</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> PRIMARY KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\`id\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">--</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- AUTO_INCREMENT pour les tables déchargées</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">--</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">--</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- AUTO_INCREMENT pour la table \`todos\`</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">--</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ALTER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> TABLE</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> \`todos\`</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  MODIFY</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> \`id\`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">11</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> AUTO_INCREMENT;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">COMMIT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><ul><li>Installer la migration (appliquer les modifications sur votre base de données) via la commande :</li></ul><div class="language-sh vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Hors Windows</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">php</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mvc</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> db:migrate</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Sous Windows (avec XAMPP)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">C:/xampp/php/php</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mvc</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> db:migrate</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Sous Windows (avec WAMP)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">C:/wamp64/bin/php/php7.4.9/php</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mvc</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> db:migrate</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>Si tout va bien vous devriez avoir le résultat suivant:</p><div class="language-sh vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=&gt; </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Start</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> migration</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> of</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> «</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> migrations/init.sql</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> »</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=&gt; </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">End</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> migration</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> of</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> «</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> migrations/init.sql</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> »</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div>`,80),B=s("div",{class:"tip custom-block"},[s("p",{class:"custom-block-title"},"Point d'avancement"),s("ul",null,[s("li",null,[e("Ça ne fonctionne pas ? Avez-vous vérifié si vous avez configuré votre projet ("),s("code",null,"configs.php"),e(").")]),s("li",null,"Vérifier si la base a bien été créée dans votre PhpMyAdmin / DataGrip 👌"),s("li",null,"Mais c'est génial !")]),s("iframe",{src:"https://giphy.com/embed/SACoDGYTvVNhZYNb5a",width:"480",height:"360",frameBorder:"0",class:"giphy-embed",allowFullScreen:""})],-1),j=i(`<h3 id="creer-le-controleur" tabindex="-1">Créer le contrôleur <a class="header-anchor" href="#creer-le-controleur" aria-label="Permalink to &quot;Créer le contrôleur&quot;">​</a></h3><p>Notre base est prête… Et si nous écrivions vraiment le code ? Comme pour créer le modèle, le framework vous fait gagner du temps ! Ici aussi pas besoin de copier / coller du code, une simple ligne de commande va vous initialiser un Contrôleur « vide » :</p><div class="language-sh vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Hors Windows</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">php</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mvc</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> controller:create</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> TodoWeb</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Sous Windows (avec XAMPP)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">C:/xampp/php/php</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mvc</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> controller:create</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> TodoWeb</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Sous Windows (avec WAMP)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">C:/wamp64/bin/php/php7.4.9/php</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mvc</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> controller:create</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> TodoWeb</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>Cette commande va initialiser un contrôleur de type Web. Celui-ci est pour l&#39;instant vide de méthode :</p><p><img src="`+n+`" alt="Modélisation UML" loading="lazy"></p><p>Ce contrôleur est pour l&#39;instant vide, nous allons dans un premier temps devoir lui créer un constructeur afin de créer le modèle permettant l&#39;accès à la base de données.</p><h3 id="definir-les-routes-dans-le-routeur" tabindex="-1">Définir les routes dans le routeur <a class="header-anchor" href="#definir-les-routes-dans-le-routeur" aria-label="Permalink to &quot;Définir les routes dans le routeur&quot;">​</a></h3><p>Vous vous souvenez lors de la création de notre première page, nous avions dû ajouter une ligne dans le routeur afin de rendre accessibles les méthodes. Pour notre nouveau contrôleur, ça sera la même chose !</p><table><thead><tr><th style="text-align:center;">Routes</th><th style="text-align:center;">Contrôleur</th><th style="text-align:center;">Méthodes</th></tr></thead><tbody><tr><td style="text-align:center;">/todo/liste</td><td style="text-align:center;"><code>TodoWeb</code></td><td style="text-align:center;"><code>liste()</code></td></tr><tr><td style="text-align:center;">/todo/ajouter</td><td style="text-align:center;"><code>TodoWeb</code></td><td style="text-align:center;"><code>ajouter()</code></td></tr><tr><td style="text-align:center;">/todo/terminer</td><td style="text-align:center;"><code>TodoWeb</code></td><td style="text-align:center;"><code>terminer()</code></td></tr><tr><td style="text-align:center;">/todo/supprimer</td><td style="text-align:center;"><code>TodoWeb</code></td><td style="text-align:center;"><code>supprimer()</code></td></tr></tbody></table><p>Dans le fichier <code>routes/Web.php</code>, ajouter les lignes :</p><div class="language-php vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  $todo </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> TodoWeb</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  Route</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/todo/liste&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, [$todo, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;liste&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]);</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  Route</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/todo/ajouter&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, [$todo, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;ajouter&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]);</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  Route</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/todo/terminer&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, [$todo, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;terminer&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]);</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  Route</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/todo/supprimer&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, [$todo, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;supprimer&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li>Où les ajouter ?</li><li>À quoi correspondent-elles ?</li></ul><h3 id="ajouter-le-constructeur-construct" tabindex="-1">Ajouter le constructeur <code>__construct()</code> <a class="header-anchor" href="#ajouter-le-constructeur-construct" aria-label="Permalink to &quot;Ajouter le constructeur \`__construct()\`&quot;">​</a></h3><p>Le contrôleur aura pour but d&#39;aller récupérer les Todo en base <strong>via</strong> le modèle. Il faut donc donner un accès au modèle depuis la classe. Nous allons donc écrire <strong>le constructeur</strong> de la méthode. En PHP, le constructeur s&#39;écrit :</p><div class="language-php vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $todoModel;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    function</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> __construct</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(){</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        $this</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">todoModel </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> TodoModel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>Je vous laisse réfléchir sur l&#39;endroit ou mettre le code en question.</p><details class="details custom-block"><summary>Voir une solution</summary><div class="language-php vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;?</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">php</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">namespace</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> controllers</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">use</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> controllers\\base\\Web</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">use</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> models\\TodoModel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> TodoWeb</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> extends</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> WebController</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $todoModel;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    function</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> __construct</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(){</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        $this</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">todoModel </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> TodoModel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><div class="danger custom-block"><p class="custom-block-title">un instant ✋</p><p>En PHP objet il y a la notion de namespace, Laravel utilise de base les namespace, ça veut dire que nous allons avoir à utiliser le mot clé <code>use</code> pour importer (include). Quand vous voulez utiliser une classe qui n&#39;est pas dans le même fichier, il faudra déclarer l&#39;emplacement via un <code>use</code>. Exemple, pour que la classe <code>Demo</code> soit accessible depuis une autre classe, il faudra :</p><div class="language-php vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">use</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> App\\Models\\Demo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li>⚠️ Si vous utilisez <strong>PHPStorm,</strong> cet import sera automatique.</li><li>⚠️ Si vous utilisez <strong>VSCode,</strong> il faudra passer par une extension <a href="https://marketplace.visualstudio.com/items?itemName=MehediDracula.php-namespace-resolver" target="_blank" rel="noreferrer">disponible ici</a></li></ul><p>Pour <strong>PHPStorm</strong>, alt+entrée permettra de déclencher l&#39;ajout dû use.</p><p>Pour <strong>VSCode</strong> je vous laisse regarder l&#39;usage de l&#39;extension :</p><p><img src="`+t+`" alt="Namespace Resolver" loading="lazy"></p></div></details><p>:::</p><h3 id="la-methode-liste" tabindex="-1">La méthode <code>liste()</code> <a class="header-anchor" href="#la-methode-liste" aria-label="Permalink to &quot;La méthode \`liste()\`&quot;">​</a></h3><p>La première méthode que nous allons créer est celle de la liste. Elle se nommera <code>liste()</code>, cette méthode sera automatiquement appelée via le <code>routeur</code> à <strong>chaque visite d&#39;un utilisateur</strong>. L&#39;objectif de cette méthode est :</p><ul><li>Récupérer l&#39;ensemble des TODO (Array) actuellement en base via la méthode <code>getAll()</code> du TodoModel modèle.</li><li>Afficher votre <code>vue</code> via un <code>return Template::render</code>.</li></ul><div class="tip custom-block"><p class="custom-block-title">Toujours la même forme</p><p>Vous allez rapidement vous apercevoir que la structure de base est toujours la même. Nous allons toujours faire la même chose lors de la création d&#39;une méthode dans un contrôleur à savoir :</p><div class="language-php vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> maMethodeQueJaiCopierColler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // Pourquoi j&#39;ai copier / coller ceci ? C&#39;est un exemple seulement</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Template</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">render</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;views/global/home.php&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong>Pssst</strong>, ne copier / coller pas le code précédent !! C&#39;est un simple exemple.</p></div><p>Dans notre cas, la méthode va ressembler à :</p><div class="language-php vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> liste</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        $todos </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> $this</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">todoModel</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getAll</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Récupération des TODOS présents en base.</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Template</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">render</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;views/todos/liste.php&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">array</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;todos&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $todos)); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Affichage de votre vue.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>Et c&#39;est tout ! La puissance d&#39;un Frawerork c&#39;est aussi ça, écrire finalement pas énormément de ligne pour afficher une page. Pourtant cette page :</p><ul><li>Affiche une entête.</li><li>Récupère en base de données les éléments.</li><li>Affiche la page.</li><li>Affiche le pied de page.</li></ul><h3 id="le-template-de-la-page-liste" tabindex="-1">Le template de la page liste <a class="header-anchor" href="#le-template-de-la-page-liste" aria-label="Permalink to &quot;Le template de la page liste&quot;">​</a></h3><p>Votre IDE doit actuellement être moyen content… Effectivement, nous avons fait un <code>Template::render</code> de <code>&quot;views/todos/liste.php&quot;</code> pourtant ce fichier n&#39;existe pas.</p><p>Vu qu&#39;il s&#39;agit ici d&#39;un projet découvert, je vais vous en donner le contenu (si vous le souhaitez, vous pouvez également l&#39;écrire) voilà le rendu :</p><p><img src="`+b+`" alt="Interface TODO" loading="lazy"></p><div class="language-php vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">div</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;container p-3&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    &lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">div</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;card&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        &lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">div</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;card-body p-2&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            &lt;!--</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Action</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> --&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            &lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">form</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> action</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./ajouter&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> method</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;post&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;add&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                &lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">div</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;input-group&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                    &lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">input</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;texte&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;texte&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> type</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;text&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;form-control&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> placeholder</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Prendre une note…&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> aria</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">label</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;My new idea&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> aria</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">describedby</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;basic-addon1&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                &lt;/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">div</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            &lt;/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">form</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            &lt;!--</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Liste</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> --&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            &lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">ul</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;list-group pt-3&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                &lt;?</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">php</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                foreach</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ($todos </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $todo) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                    ?&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                    &lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">li</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;list-group-item&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                        &lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">div</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;d-flex&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                            &lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">div</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;flex-grow-1 align-self-center&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;&lt;?=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $todo</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">texte </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?&gt;&lt;/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">div</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                            &lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">div</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                                &lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">a</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> href</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./terminer?id=&lt;?= </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$todo</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">id</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ?&gt;&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;btn btn-outline-success&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                                    &lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;bi bi-check&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;&lt;/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                                &lt;/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">a</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                                &lt;!--</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Action</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> à</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> ajouter</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> pour</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Supprimer</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> --&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                            &lt;/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">div</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                        &lt;/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">div</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                    &lt;/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">li</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                    &lt;?</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">php</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">sizeof</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">($todos) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                    ?&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                    &lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">li</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;list-group-item text-center&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">C</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;est vide !&lt;/li&gt;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                    &lt;?php</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                }</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                ?&gt;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            &lt;/ul&gt;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &lt;/div&gt;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &lt;/div&gt;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&lt;/div&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br></div></div><p>Je vous laisse mettre le contenu dans votre fichier <code>views/todos/liste.php</code>.</p><div class="tip custom-block"><p class="custom-block-title">Valider le bon fonctionnement</p><p>Si vous accédez à votre page <code>todo/liste</code> vous devriez avoir le contenu suivant :</p><p><img src="`+E+`" alt="Résultat Liste vide" loading="lazy"></p></div><h3 id="la-methode-ajouter-texte" tabindex="-1">La méthode <code>ajouter($texte = &#39;&#39;)</code> <a class="header-anchor" href="#la-methode-ajouter-texte" aria-label="Permalink to &quot;La méthode \`ajouter($texte = &#39;&#39;)\`&quot;">​</a></h3><p>Cette méthode sera automatiquement appelé quand vous aller appuyer sur la touche <strong>Entrer</strong> de votre clavier dans le champ de saisie sur la page <code>Liste</code>. L&#39;objectif de cette méthode est de traiter l&#39;action « J&#39;ajoute un nouvel enregistrement dans la base Todo ».</p><p>Pour le code, je vais vous aider un peu, voilà le code du contrôleur :</p><div class="language-php vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ajouter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">($texte </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    $this</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">todoModel</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ajouterTodo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">($texte);</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    $this</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">redirect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./liste&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li>À quoi correspond la méthode <code>redirect(…)</code> ? D&#39;où provient-elle ?</li></ul><p><em>C&#39;est à vous :</em></p><ul><li>Mettre en place le code dans le contrôleur.</li><li>Écrire la méthode ajouterTodo dans le modèle <code>TodoModel</code> (n&#39;oubliez pas l&#39;autocomplétion). <ul><li>Écrire la requête <code>INSERT …</code></li></ul></li><li>Tester le bon fonctionnement</li></ul><p>Dans mon cas voilà le résultat :</p><p><img src="`+F+`" alt="Résultat Liste vide" loading="lazy"></p><h4 id="ajouter-une-validation" tabindex="-1">Ajouter une validation <a class="header-anchor" href="#ajouter-une-validation" aria-label="Permalink to &quot;Ajouter une validation&quot;">​</a></h4><p>Actuellement dans le code que vous avez copié il est possible d&#39;ajouter des « TODO » sans texte. Je vous propose donc d&#39;ajouter un contrôle de saisie <strong>dans le PHP</strong>.</p><p>Le contrôle doit empêcher l&#39;ajoute d&#39;une TODO si <code>$texte == &#39;&#39;</code>.</p><ul><li>Où placez-vous le contrôle ?</li><li>Pourquoi ?</li></ul><h3 id="la-methode-terminer-id" tabindex="-1">La méthode <code>terminer($id = &#39;&#39;)</code> <a class="header-anchor" href="#la-methode-terminer-id" aria-label="Permalink to &quot;La méthode \`terminer($id = &#39;&#39;)\`&quot;">​</a></h3><p>Vous l&#39;avez compris… Je vous donne de moins en moins de code ! La méthode <code>terminer</code> sera très proche de <code>ajouter</code> sauf que celle-ci va prendre en paramètre l&#39;id de l&#39;élément à marquer comme terminé :</p><div class="language-php vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> terminer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">($id </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">){</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">($id </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">){</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        $this</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">todoModel</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">marquerCommeTermine</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">($id);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    $this</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">redirect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./liste&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ul><li>D&#39;où arrive le paramètre <code>$id</code> ?</li><li>Pourquoi est-ce automatique ?</li></ul><p><em>À faire</em> :</p><ul><li>Mettre en place le code, valider le bon fonctionnement avec <strong>PHPMyAdmin</strong></li><li>Modifier la vue pour afficher le bouton vert <strong>seulement si</strong> la tâche est non terminée</li><li>Ajouter un bouton supprimé visible <strong>uniquement si</strong> la tâche est terminée</li></ul><p><img src="`+y+`" alt="Résultat Liste vide" loading="lazy"></p><h3 id="la-methode-supprimer-id" tabindex="-1">La méthode <code>supprimer($id = &#39;&#39;)</code> <a class="header-anchor" href="#la-methode-supprimer-id" aria-label="Permalink to &quot;La méthode \`supprimer($id = &#39;&#39;)\`&quot;">​</a></h3><p>En utilisant le code précédemment fourni, écrire :</p><ul><li>La méthode dans le modèle permettant de supprimer un élément dans la base de données pour un id donné.</li><li>La méthode dans le contrôleur permettant de traiter l&#39;action.</li><li><strong>Ne permettre la suppression</strong> que des Todo ayant <code>termine = 1</code>. La vérification <strong>ne doit pas être</strong> présente que dans la vue.</li></ul><p>C&#39;est à vous.</p><h2 id="ajouter-un-lien-dans-la-page-d-accueil" tabindex="-1">Ajouter un lien dans la page d&#39;accueil <a class="header-anchor" href="#ajouter-un-lien-dans-la-page-d-accueil" aria-label="Permalink to &quot;Ajouter un lien dans la page d&#39;accueil&quot;">​</a></h2><p>Ajouter dans la page d&#39;accueil du site un lien permettant d&#39;accéder à votre TodoList. Quelques consignes à respecter :</p><ul><li>Le lien doit être centré dans la page.</li><li>Le lien doit avoir l&#39;<strong>apparence</strong> d&#39;un bouton. <a href="https://getbootstrap.com/docs/5.0/components/buttons/" target="_blank" rel="noreferrer">Voir la documentation</a></li></ul><h2 id="masquer-les-todo-terminees" tabindex="-1">Masquer les TODO terminées <a class="header-anchor" href="#masquer-les-todo-terminees" aria-label="Permalink to &quot;Masquer les TODO terminées&quot;">​</a></h2><p>Je souhaite finalement masquer de l&#39;affichage par défaut l&#39;ensemble des enregistrements de la table <code>TODO</code> ayant <code>termine = 1</code>.</p><p>Je vous laisse modifier :</p><ul><li>Le code du modèle afin d&#39;y ajouter une méthode.</li><li>Appeler cette méthode depuis votre page à la place du <code>getAll()</code>.</li></ul><details class="details custom-block"><summary>Un doute sur comment procéder ?</summary><p>Vous devez réaliser une requête directement depuis votre modèle. Celle-ci devras retourner le résultat d&#39;une requête SQL via un FetchAll de PDO.</p><div class="language-php vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> getAllTermine</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">($id){</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    $stmt </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> $this</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getPdo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">prepare</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">SELECT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> FROM</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> todos </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">WHERE</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> termine </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    $stmt</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">execute</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">([]);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $stmt</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\PDO</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">FETCH_OBJ</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></details><h2 id="ajouter-une-page-d-authentification" tabindex="-1">Ajouter une page d&#39;authentification <a class="header-anchor" href="#ajouter-une-page-d-authentification" aria-label="Permalink to &quot;Ajouter une page d&#39;authentification&quot;">​</a></h2><p>La partie TODOList ne doit pas être accessible à tous. En utilisant les techniques vues avec la SESSION (<code>$_SESSION</code>) ainsi qu&#39;en réfléchissant sur les impacts en termes de sécurité (protection dans le routeur par exemple). Limiter l&#39;accès de la partie TODOList seulement aux personnes avec un compte sur la plateforme.</p><div class="tip custom-block"><p class="custom-block-title">Quelques éléments pour vous aider</p><p>Pour réaliser une page d&#39;authentification dans votre projet, vous allez devoir ajouter :</p><ul><li>Une page avec un formulaire pour vous connecter (votre vue).</li><li>Une table en base (qui sera utilisé via un modèle).</li><li>Un modèle et un contrôleur dédié à cette action (<code>php mvc model:create AuthModel</code> et <code>php mvc controller:create AuthControler</code>)</li><li>Modifier le routeur pour n&#39;autoriser l&#39;accès aux utilisateurs <strong>authentifié</strong>.</li></ul></div><ul><li>Quels impacts sont à prévoir dans le routeur ?</li><li>Est-ce nécessaire de créer un nouveau modèle ?</li><li>Est-ce nécessaire de créer un nouveau contrôleur ?</li><li>Combien de vue sera(ont) nécessaire(s) en plus de celles existantes ?</li></ul><div class="danger custom-block"><p class="custom-block-title">Attention</p><p>⚠️ Mot de passe et sécurité…</p><ul><li>Comment allez-vous enregistrer le mot de passe en base ? (<a href="https://www.php.net/manual/en/function.password-hash.php" target="_blank" rel="noreferrer">Un peu d&#39;aide</a>)</li><li>Comment allez-vous vérifier l&#39;authentification ? (<a href="https://www.php.net/manual/en/function.password-verify.php" target="_blank" rel="noreferrer">Un peu d&#39;aide</a>)</li></ul></div><h2 id="evolution-1-qui-a-cree-la-todo" tabindex="-1">Évolution 1 : Qui a créé la TODO ? <a class="header-anchor" href="#evolution-1-qui-a-cree-la-todo" aria-label="Permalink to &quot;Évolution 1 : Qui a créé la TODO ?&quot;">​</a></h2><p>Maintenant que nous avons un système d&#39;authentification, je vous propose de sauvegarder qui a créé la TODO pour ce faire :</p><ul><li>Modifier la base de données afin d&#39;ajouter « l&#39;email / nom d&#39;utilisateur » de la personne ayant créé la TODO (évidement, il faudra utiliser une clé étrangère).</li><li>Modifier la méthode d&#39;ajout dans le modèle pour enregistrer l&#39;information <ul><li>Attention, comment allez-vous procéder pour récupérer la personne actuellement connectée ?</li></ul></li><li>Ajouter <strong>dans la vue</strong>, l&#39;affichage de l&#39;identité de la personne. <ul><li>Idéalement en groupant les TODO par nom d&#39;utilisateur / email.</li><li>Ou via l&#39;ajout d&#39;une image de profil (avatar / gravatar) à côté de la TODO.</li></ul></li></ul><h2 id="evolution-2-envoi-d-email" tabindex="-1">Évolution 2 : Envoi d&#39;email <a class="header-anchor" href="#evolution-2-envoi-d-email" aria-label="Permalink to &quot;Évolution 2 : Envoi d&#39;email&quot;">​</a></h2><p>Vous avez mis en place un système de connexion, mais pour l&#39;instant l&#39;utilisateur ne reçois aucun email. Il serait intéressant de lui envoyer un email après la création du compte afin de lui confirmer la bonne création de celui-ci. Il existe plein de façon d&#39;envoyer des emails en PHP. Dans ce TP je vous propose d&#39;utiliser PHPMailer.</p><p>PHPMail est une librairie PHP permettant d&#39;envoyer des emails. Celle-ci s&#39;installe via composer. Pour l&#39;installer, il suffit de lancer la commande suivante (à la racine de votre projet)</p><div class="language-sh vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">composer</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> require</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> phpmailer/phpmailer</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="danger custom-block"><p class="custom-block-title">Installation de composer</p><p>Pour que la commande précédente fonctionne, il faut que composer soit installé sur votre machine. Pour l&#39;installer, je vous invite à suivre la documentation officielle <a href="https://getcomposer.org/download/" target="_blank" rel="noreferrer">disponible ici</a>. Composer est un outil permettant de gérer les dépendances d&#39;un projet PHP, il est très utilisé dans le monde PHP (notamment avec Laravel).</p></div><p>Dans l&#39;AP, vous avez dans le code source un utilitaire permettant la gestion de l&#39;envoi d&#39;email. Celui-ci est présent dans le dossier <code>utils</code>, pour les besoin de cette évolution nous allons en avoir besoin :</p><div class="language-php vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;?</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">php</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">namespace</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> utils</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">use</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> PHPMailer\\PHPMailer\\PHPMailer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> EmailUtils</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> sendEmail</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">($to, $subject, $template, $data)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> bool</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // Récupération des informations de configuration</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        $config </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> include</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;configs.php&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // Construction du message avec la librairie Template</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        $message </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Template</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">render</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;views/emails/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$template</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.php&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, $data, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        $mail </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> PHPMailer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        $mail</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">isSMTP</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        $mail</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Host </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $config[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;MAIL_SERVER&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;localhost&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        $mail</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">SMTPAuth </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        $mail</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Port </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1025</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        $mail</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setFrom</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">($config[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;FROM_EMAIL&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">], </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Contact&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        $mail</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addAddress</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">($to);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        $mail</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Subject </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $subject;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        $mail</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Body </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $message;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        $mail</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">isHTML</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $mail</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">send</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><p>Modifier maintenant le fichier <code>index.php</code> afin d&#39;ajouter l&#39;include des librairies :</p><div class="language-php vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">include</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;vendor/autoload.php&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Pour les librairies externes. (PHPMailer, etc.)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="tip custom-block"><p class="custom-block-title">Avant de continuer</p><p>Appeler-moi nous allons discuter un peu de ce code, il y a plein de choses à dire dessus !</p></div><p>Voici un exemple d&#39;utilisation de cette classe :</p><div class="language-php vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">EmailUtils</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sendEmail</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;you@test.com&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Mon sujet&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;monTemplate&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">array</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;name&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;John Doe&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">));</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li>Quels sont les paramètres de la méthode ?</li><li>À quoi correspond l&#39;array de données ?</li><li>À quoi correspond le paramètre <code>monTemplate</code>, ou doit-il être dans votre projet ?</li><li>Est-ce que le code proposé est suffisant pour envoyer un email ?</li></ul><div class="tip custom-block"><p class="custom-block-title">C&#39;est à vous</p><p>Je vous laisse mettre en place l&#39;envoi d&#39;email dans votre projet. Celui-ci doit être fait <strong>après la création du compte</strong>.</p></div><h2 id="bonus-mot-de-passe-oublie" tabindex="-1">Bonus, mot de passe oublié <a class="header-anchor" href="#bonus-mot-de-passe-oublie" aria-label="Permalink to &quot;Bonus, mot de passe oublié&quot;">​</a></h2><p>Je vous laisse réfléchir à la mise en place d&#39;un système de mot de passe oublié. Celui-ci doit permettre à l&#39;utilisateur de réinitialiser son mot de passe en cas d&#39;oubli.</p><div class="tip custom-block"><p class="custom-block-title">Quelques éléments pour vous aider</p><ul><li>Il faudra certainement ajouter une nouvelle table en base de données.</li><li>Il faudra certainement ajouter une nouvelle page dans votre projet.</li><li>Il faudra certainement ajouter une nouvelle méthode dans votre contrôleur.</li><li>Il faudra certainement ajouter une nouvelle méthode dans votre modèle.</li><li>Il faudra certainement ajouter une nouvelle méthode dans votre routeur.</li><li>Il faudra certainement ajouter un nouvel email dans votre projet.</li></ul></div><h2 id="bonus-une-page-d-accueil-personnalisee" tabindex="-1">Bonus, une page d&#39;accueil personnalisée <a class="header-anchor" href="#bonus-une-page-d-accueil-personnalisee" aria-label="Permalink to &quot;Bonus, une page d&#39;accueil personnalisée&quot;">​</a></h2><p>Il serait intéressant d&#39;arriver sur une page d&#39;accueil personnalisée. Pour ce faire, je vous propose de :</p><ul><li>Créer dans votre contrôleur une méthode qui sera appelée par défaut.</li><li>Modifier votre routeur afin de rediriger vers cette méthode par défaut (si non connecté).</li><li>Créer votre page d&#39;accueil personnalisée (elle doit contenir au minimum un titre, une bouton invitant à la création d&#39;un compte, un bouton invitant à la connexion)</li><li>Si l&#39;utilisateur est déjà connecté, rediriger vers la TODOList.</li></ul><p>Pour vous aider dans la conception de votre page d&#39;accueil, vous pouvez utiliser un template « bootstrap » disponible <a href="https://bootstrapmade.com/bootstrap-landing-page-templates/" target="_blank" rel="noreferrer">ici</a>.</p><p>👋 Bon courage !</p>`,95),P=[C,f,A,D,q,B,j];function x(L,T,_,M,w,z){return o(),r("div",null,P)}const I=p(v,[["render",x]]);export{$ as __pageData,I as default};
